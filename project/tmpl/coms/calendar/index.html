<div class="wrapper">
    <table id="days_<%=id%>" class="table">
        <thead>
            <tr>
                <th mx-click="changeMonth()" class="turn title">⇦</th>
                <th colspan="5" mx-keys="year,month" mx-click="showMonths()" class="title"><%=year%>-<%=month<10?'0'+month:month%></th>
                <th mx-click="changeMonth({next:true})" class="turn title">⇨</th>
            </tr>
        </thead>
        <tbody mx-keys="days,weekText">
            <tr>
                <%for(var i=0;i<weekText.length;i++){%>
                <td class="week"><%=weekText[i]%></td>
                <%}%>
            </tr>
            <%for(var i=0;i<days.length;i++){%>
            <tr>
                <%var tds=days[i]%>
                <%for(var j=0;j<tds.length;j++){%>
                <td class="day<%if(tds[j].otherMonth){%> gray<%}%><%if(tds[j].disabled){%> disabled<%}%><%if(tds[j].selected){%> selected<%}%>"<%if(!tds[j].disabled){%> mx-click="choose({toMonth:<%=tds[j].month%>,date:'<%=tds[j].full%>'})"<%}%> title="<%=tds[j].full%>"><%=tds[j].day%></td>
                <%}%>
            </tr>
            <%}%>
        </tbody>
    </table>
    <table id="months_<%=id%>" class="table none">
        <thead>
            <tr>
                <th mx-click="changeYear()" class="turn title">⇦</th>
                <th mx-keys="year" mx-click="showYears()" class="title"><%=year%></th>
                <th mx-click="changeYear({next:true})" class="turn title">⇨</th>
            </tr>
        </thead>
        <tbody>
            <tr mx-keys="months">
                <td colspan="3">
                <%for(var i=0,m;i<months.length;i++){%>
                <%m=months[i]%>
                <span class="year<%if(m.disabled){%> disabled<%}%><%if(m.selected){%> selected<%}%>"<%if(!m.disabled){%> mx-click="pickMonth({month:'<%=m.month%>'})"<%}%>><%=m.month%></span>
                <%}%>
                </td>
            </tr>
        </tbody>
    </table>
    <table id="years_<%=id%>" class="table none">
        <thead>
            <tr>
                <th mx-click="changeYear({range:true})" class="turn title">⇦</th>
                <th mx-keys="startYear,endYear" class="title"><%=startYear%>-<%=endYear%></th>
                <th mx-click="changeYear({range:true,next:true})" class="turn title">⇨</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td colspan="3" mx-keys="years">
                <%for(var i=0,y;i<years.length;i++){%>
                    <%y=years[i]%>
                    <span class="year<%if(y.selected){%> selected<%}%><%if(y.disabled){%> disabled<%}%><%if(!i||i==years.length-1){%> gray<%}%>"<%if(!y.disabled){%> mx-click="pickYear({year:'<%=y.year%>'})"<%}%>>
                        <%=y.year%>
                    </span>
                <%}%>
                </td>
            </tr>
        </tbody>
    </table>
</div>