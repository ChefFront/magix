/*!3.8.2 MIT kooboy_li@163.com*/let e,t,r=e=>t=>Object.prototype.toString.call(t).slice(8,-1)==e,i=r("Object"),n=r("Array"),a=0,o="",l=[],f=",",s=window,d=document,$=s.setTimeout,h=function(){},c=JSON.stringify,u="\x1e",p="object",g="prototype",m="params",v="path",b="mx-view",w=/[#?].*$/,y=/([^=&?\/#]+)=?([^&#?]*)/g,x=/(?!^)=|&/,k=e=>(e||"mx_")+a++,I=k(),V={rootId:k(),defaultView:I,error(e){throw e}},P=e=>typeof e==p?e:d.getElementById(e),S=e=>!e||typeof e!=p,_=(e,t,r)=>{let i,n,a,o=0;for(a in e)i=e[a],n=t[a],S(i)&&n===i||(r[a]=1,o=1),t[a]=i;return o},j=(e,t,r)=>{if(e=P(e),t=P(t),e&&t&&!(r=e==t))try{r=16==(16&t.compareDocumentPosition(e))}catch(e){}return r},{assign:E,keys:T,hasOwnProperty:O}=Object,A=document.head,C=document.createElement("div"),H=(e,t)=>{t&&!H[e]&&(H[e]=1,C.innerHTML=`<style>${t}`,A.appendChild(C.firstChild))},M=e=>e.id||(e.id=k()),L=(e,t,r,i,a)=>{t=t||l,n(e)||(e=[e]),n(t)||(t=[t]);for(a of e)try{i=a&&a.apply(r,t)}catch(e){V.error(e)}return i},U=(e,t)=>e&&O.call(e,t),q=(e,t,r)=>{let i,n;for(i in t)n=t[i],r[i]=(n+o)[0]==u?e[n]:n},D=(e,t)=>t.f-e.f||t.t-e.t,Z=function(e,t,r,i){(i=this).c=[],i.b=t||5,i.x=i.b+(e||20),i.r=r};E(Z[g],{get(e){let t=this.c[u+e];return t&&(t.f++,t.t=a++,t=t.v),t},each(e,t,r,i,n){i=(r=this).c;for(n of i)e(n.v,t,r)},set(e,t){let r=this,i=r.c,n=u+e,o=i[n],l=r.b;if(!o){if(i.length>=r.x)for(i.sort(D);l--;)(o=i.pop()).f>0&&r.del(o.o);o={o:e},i.push(o),i[n]=o}o.v=t,o.f=1,o.t=a++},del(e){e=u+e;let t=this.c,r=t[e],i=this.r;r&&(r.f=-1,r.v=o,delete t[e],i&&L(i,r.o))},has(e){return U(this.c,u+e)}});let N=(e,r)=>{if(e)if(I==e)t||(t=Et.extend()),r(t);else{let t=[],i=0;i(e)||(e=[e]);let n=e=>n=>{t[e]=n.default,++i==t.length&&r(...t)},a=V.paths;for(let t,r,i,o=e.length;o--;)(r=(t=e[o]).indexOf("/"))>-1&&(i=t.slice(0,r),t=t.slice(r+1),t=(a[i]||`unset/${i}/path/`)+t),t.endsWith(".js")||(t+=".js"),import(t).then(n(o))}else r()},z=function(){},B=(e,t,r,i,n)=>(z[g]=t[g],n=new z,E(n,r),E(e,i),n.constructor=e,e[g]=n,e),R=(e,t,r)=>{let i=d.createEvent("Events");i.initEvent(t,!0,!0);for(let e in r)i[e]=r[e];e.dispatchEvent(i)},W=(e,t)=>{if(!t||!e||1!==e.nodeType)return 0;return(e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector).call(e,t)},F=e=>e._mx||(e._mx=k("e")),J={},Q=()=>!0,G=()=>!1,K={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"},X=(e,t,r,i)=>{let n=F(e),a=J[n]||(J[n]=[]),o={$a:r&&r.i,$b:i,$d:t,$e(t){(t=(e=>{if(!e.isDefaultPrevented){for(let t in K){let r=K[t],i=e[t];e[t]=((...t)=>(e[r]=Q,i&&i.apply(e,t))),e[r]=G}(void 0!==e.defaultPrevented?e.defaultPrevented:"returnValue"in e?!1===e.returnValue:e.getPreventDefault&&e.getPreventDefault())&&(e.isDefaultPrevented=Q)}return e})(t)).isImmediatePropagationStopped()||i.call(e,t,r)}};a.push(o),e.addEventListener(t,o.$e,!1)},Y=(e,t)=>{e.eventTarget=t.e,L(t.f,e,t.v)},ee=(e,t,r,i,n)=>{i?((e,t,r,i)=>{let n=F(e),a=J[n];if(a){let n;for(let e,o=a.length;o--;)if((e=a[o]).$d==t&&e.$b===i){let t=e.$a;if(!r||r&&r.i==t){n=e,a.splice(o,1);break}}n&&e.removeEventListener(t,n.$e,!1)}})(e,t,n,r):X(e,t,n,r)};let te,re=new Z,ie=0,ne=(e,t,r)=>{try{r=decodeURIComponent(r)}catch(e){}te[t]=r},ae=e=>{let t,r=re.get(e);return r||(te={},e==(t=e.replace(w,o))&&x.test(t)&&(t=o),e.replace(t,o).replace(y,ne),re.set(e,r={a:t,b:te})),{path:r.a,params:{...r.b}}},oe=(e,t,r)=>{let i,n,a,l=[];for(n in t)i=t[n]+o,(!r||i||U(r,n))&&(i=encodeURIComponent(i),l.push(a=n+"="+i));return a&&(e+=(e&&(~e.indexOf("?")?"&":"?"))+l.join("&")),e},le=(e,t)=>{let r,i={};if(e)for(r of e)i[t&&r?r[t]:r]=t?r:1+(0|i[r]);return i},fe={config:(e,t)=>(t=V,e&&(t=i(e)?E(t,e):t[e]),t),boot(e){E(V,e),N(V.ini,t=>{E(V,t,e),N(V.exts,()=>{qe.on("changed",Fe),ge.on("changed",Fe),ie=1,He()})})},toMap:le,toTry:L,toUrl:oe,parseUrl:ae,mix:E,has:U,keys:T,inside:j,node:P,applyStyle:H,guid:k,use:N,Cache:Z,nodeId:M},se={fire(e,t,r,i){let n,a,l,f,s=this,d=s[u+e];if(t||(t={}),t.type||(t.type=e),d)for(a=(n=d.length)-1;n--;)(f=d[l=i?n:a-n]).f?(f.x=1,L(f.f,t,s),f.x=o):f.x||(d.splice(l,1),a--);(d=s[`on${e}`])&&L(d,t,s),r&&s.off(e)},on(e,t){let r=u+e;(this[r]||(this[r]=[])).push({f:t})},off(e,t){let r,i=u+e,n=this,a=n[i];if(t){if(a)for(r of a)if(r.f==t){r.f=o;break}}else delete n[i],delete n[`on${e}`]}};fe.Event=se;let de={},$e={},he={},ce=0,ue=e=>{e=(e+o).split(",");for(let t of e)U($e,t)?$e[t]++:$e[t]=1;return e},pe=e=>{let t,r;for(t of e)U($e,t)&&((r=--$e[t])||(delete $e[t],delete de[t]))};let ge={get(e){let t=e?de[e]:de;return t},set(e){ce=_(e,de,he)||ce},digest(e){e&&ge.set(e),ce&&(ce=0,this.fire("changed",{keys:he}),he={})},diff:()=>he,clean:e=>({ctor(){e=ue(e),this.on("destroy",()=>pe(e))}}),...se};fe.State=ge;let me,ve,be,we,ye,xe,ke,Ie,Ve="view",Pe=new Z,Se=new Z,_e=s.location,je=0,Ee={query:{},params:{},href:o},Te=/(?:^.*\/\/[^\/]+|#.*$)/gi,Oe=/^[^#]*#?!?/,Ae=function(e){return this[m][e]||o},Ce=(e,t)=>{e=`#!${e}`,t?_e.replace(e):_e.hash=e},He=()=>{let e,t,r=Le().srcHash;ee(s,"hashchange",(i,n,a)=>{t||(n=Le(),(e=n.srcHash)!=r&&(a=(()=>{i.p=1,r=e,t=o,Ce(e),Ue()}),i={reject(){i.p=1,t=o,Ce(r)},resolve:a,prevent(){t=1}},qe.fire("change",i),t||i.p||a()))}),s.onbeforeunload=((e,t,r)=>{if(e=e||s.event,t={},qe.fire("pageunload",t),r=t.msg)return e&&(e.returnValue=r),r}),Ue()},Me=d.title,Le=e=>{e=e||_e.href;let t,r,n,a,l,f=Pe.get(e);return f||(t=e.replace(Te,o),r=e.replace(Oe,o),n=ae(t),a=ae(r),l={...n[m],...a[m]},f={get:Ae,href:e,srcQuery:t,srcHash:r,query:n,hash:a,params:l},ie&&(((e,t)=>{if(ve||(ve=V.routes||{},be=V.unmatchView,we=V.defaultView,ye=V.defaultPath||"/",xe=V.rewrite),!e[Ve]){let r=e.hash[v]||ye;xe&&(r=xe(r,e[m],ve)),t=ve[r]||be||we,e[v]=r,e[Ve]=t,i(t)&&E(e,t)}})(f),Pe.set(e,f))),f},Ue=()=>{let e=Le(),t=((e,t)=>{let r=e.href,i=t.href,n=r+u+i,a=Se.get(n);if(!a){let i,o;a={params:o={},force:!r};let l,f=e[m],s=t[m],d=T(f).concat(T(s)),$=e=>{let t=f[e],r=s[e];t!=r&&(o[e]={from:t,to:r},i=1)};for(l of d)$(l);f=e,s=t,o=a,$(v),$(Ve),Se.set(n,a={a:i,b:a})}return a})(Ee,Ee=e);return!je&&t.a&&((me=t.b)[v]&&(d.title=e.title||Me),qe.fire("changed",me)),je=0,me},qe={parse:Le,diff:Ue,to(e,t,r,n){!t&&i(e)&&(t=e,e=o);let a=ae(e),l=a[m],f=a[v],s=Ee[v],d=Ee[m],$=Ee.query[m];if(E(l,t),f)for(s in $)U(l,s)||(l[s]=o);else d&&(f=s,l={...d,...l});var h,c,u,p;c=Ee,u=r,p=n,(h=oe(h=f,l,$))!=c.srcHash&&(je=p,Ce(h,u))},...se};fe.Router=qe;let De=e=>{if(!e.$a&&!e.$b&&e.$cc==e.$rc){e.$cr||(e.$cr=1,e.$ca=0,e.fire("created"));let t,{id:r,pId:i}=e;(t=Ne[i])&&!U(t.$d,r)&&(t.$d[r]=1,t.$rc++,De(t))}},Ze=(e,t)=>{if(!e.$ca&&e.$cr){e.$cr=0,e.$ca=1,e.fire("alter",t);let r,{id:i,pId:n}=e;(r=Ne[n])&&U(r.$d,i)&&(r.$rc--,delete r.$d[i],Ze(r,t))}},Ne={},ze=(e,t,r)=>{for(t=e.$e;t.length;)(r=t.shift()).r||e.invoke(r.n,r.a),delete t[r.k]},Be=[],Re=0,We=(e,t,r)=>{if(e&&e.$f!=Re&&(r=e.$v)&&r.$a>1){(t?((e,t,r)=>{let i,n=e.$os;if(n)for(i of n)if(r=U(t,i))break;return r})(r,t):jt(r))&&r.$b();let i,n=e.children();for(i of n)We(Ne[i],t)}},Fe=t=>{let r,i=(t=>(ke||(e=d.body,t=V.rootId,P(t)||(e.id=t),ke=new Je(t)),ke))();(r=t[Ve])?i.mountView(r.to):(Re=a++,We(i,t.keys))},Je=function(e,t,r){var i,n;(r=this).id=e,r.$c={},r.$cc=0,r.$rc=0,r.$g=1,r.$d={},r.$e=[],r.pId=t,n=r,U(Ne,i=e)||(Ne[i]=n,Je.fire("add",{vframe:n}),(i=P(i))&&(i.vframe=n))};E(Je,{all:()=>Ne,get:e=>Ne[e]},se),E(Je[g],se,{mountView(e,t){let r,i,n,a,o,l,f=this,{id:s,pId:d,$g:$}=f,h=P(s);!f.$h&&h&&(f.$h=1,f.$i=h.innerHTML),f.unmountView(),f.$a=0,h&&e&&(f[v]=e,r=ae(e),n=r[v],i=++$,a=r[m],l=(l=(l=(l=Ne[d])&&l.$v)&&l.$d)&&l.$a,e.indexOf(u)>0&&q(l,a,a),f.$n=r[v],E(a,t),N(n,e=>{if(i==f.$g){if(!e)return V.error(Error(`id:${s} cannot load:${n}`));o=_t(e),n=new e(s,f,a,o),f.$v=n,f.$f=Re,Vt(n),L(n.init,a,n),n.$b(),n.$e||(f.$h=0,n.$f||n.endUpdate())}}))},unmountView(){let e,t,r=this,{$v:i,id:n}=r;r.$e=[],i&&(Ie||(t=1,Ie={id:n}),r.$a=1,r.unmountZone(0,1),Ze(r,Ie),r.$v=0,i.$a>0&&(i.$a=0,i.fire("destroy",0,1,1),xt(i,1),Vt(i,1),i.owner=0),i.$a--,(e=P(n))&&r.$h&&(e.innerHTML=r.$i),t&&(Ie=0)),r.$g++},mountVframe(e,t,r){let i,n=this,a=n.id,o=n.$c;return Ze(n,{id:e}),(i=Ne[e])||(U(o,e)||(n.$o=0,n.$cc++),o[e]=e,(i=Be.pop())?Je.call(i,e,a):i=new Je(e,a)),i.mountView(t,r),i},mountZone(e,t){let r,i,n=this,a=[],o=(e=>d.querySelectorAll(e))(`#${e=e||n.id} [${b}]`);n.$b=1;for(r of o)i=M(r),r.$a||(r.$a=1,a.push([i,r.getAttribute(b)]));for([i,r]of a)a[i]?V.error(Error(`vf.id duplicate:${i} at ${n[v]}`)):n.mountVframe(a[i]=i,r);n.$b=0,t||De(n)},unmountVframe(e,t){let r;if(e=e?this.$c[e]:this.id,r=Ne[e]){let{$cr:o,pId:l}=r;r.unmountView(),n=o,(a=Ne[i=e])&&(delete Ne[i],Je.fire("remove",{vframe:a,fcc:n}),(i=P(i))&&(i.$a=i.vframe=0)),r.id=r.pId=r.$c=r.$d=r.$h=0,r.off("alter"),r.off("created"),Be.push(r),(r=Ne[l])&&U(r.$c,e)&&(delete r.$c[e],r.$o=0,r.$cc--,t||De(r))}var i,n,a},unmountZone(e,t){let r,i=this;for(r in i.$c)(!e||r!=e&&j(r,e))&&i.unmountVframe(r,1);t||De(i)},parent(e,t){for(t=this,e=e>>>0||1;t&&e--;)t=Ne[t.pId];return t},children(e){return(e=this).$o||(e.$o=T(e.$c))},invoke(e,t){let r,i,n,a,o,l=this.$e;return(i=this.$v)&&i.$f?r=(n=i[e])&&L(n,t,i):((a=l[o=u+e])&&(a.r=t===a.a),a={n:e,a:t,k:o},l.push(a),l[o]=a),r}}),fe.Vframe=Je;let Qe=new Z(30,10),Ge=/(?:([\w\-]+)\x1e)?([^(]+)\(([\s\S]*)?\)/,Ke={},Xe={},Ye=(t,r)=>{let i,n,a,o,f,s,d,$=[],h=t,c=t.getAttribute(`mx-${r}`),u=[],p=0;if(c&&((f=Qe.get(c))||((f={v:(f=c.match(Ge)||l)[1],n:f[2],i:f[3]}).p=f.i&&L(Function(`return ${f.i}`),l,t),Qe.set(c,f)),f={...f,r:c},$.push(f)),f&&!f.v||Xe[r]){if(!(d=t.$a))for(u.push(h);h!=e&&(h=h.parentNode);){if(Ne[n=h.id]||(n=h.$v)){d=n;break}u.push(h)}if(d){for(c of u)c.$a=d;h=t.id,Ne[h]&&(p=d=h);do{if((i=Ne[d])&&(s=i.$v)){o=(a=s.$so)[r];for(n in o)a={r:n,v:d,n:n},n?W(t,n)&&$.push(a):p&&$.unshift(a);if(s.$e&&!p){f&&!f.v&&(f.v=d);break}p=0}}while(i&&(d=i.pId))}}return $},et=t=>{let r,i,n,a,o,l,f,s,{target:d,type:$}=t,h=[];for(;d!=e;){if((r=Ye(d,$)).length){h=[];for(let{v:e,r:i,n:h,p:c,i:u}of r){if(f!=e){if(f&&t.isPropagationStopped())break;f=e}if(a=(n=Ne[e])&&n.$v){if((l=a[o=h+c+$])&&(t.eventTarget=d,s=c||{},u&&u.indexOf(c)>0&&q(a.$d.$a,s,s={}),t[m]=s,L(l,t,a),t.isImmediatePropagationStopped()))break;0}else t.stopPropagation();0}}if((i=d.$)&&i[$]||t.isPropagationStopped())break;h.push(d),d=d.parentNode||e}for(d of h)(i=d.$||(d.$={}))[$]=1},tt=(t,r,i)=>{let n=0|Ke[t],a=i?-1:1;n&&i!==n||ee(e,t,et,i),Ke[t]=n+a,r&&(Xe[t]=(0|Xe[t])+a)},rt={input_value:1,input_checked:1,input_disabled:1,input_readonly:1,textarea_value:1,textarea_checked:1,textarea_disabled:1,textarea_readonly:1,option_selected:1},it={area:1,br:1,col:1,embed:1,hr:1,img:1,input:1,param:1,source:1,track:1,wbr:1},nt=/^<([a-z\d]+)((?:\s+[-A-Za-z\d_]+(?:="[^"]*")?)*)\s*(\/?)>/,at=/([-A-Za-z\d_]+)(?:="([^"]*)")?/g,ot=/^<\/[a-z\d+]+>/,lt={},ft=/&#?[^\W]+;?/g,st=d.createElement("div"),dt=e=>(U(lt,e)||(st.innerHTML=e,lt[e]=st.innerText),lt[e]),$t=(e,t)=>{let r=M(t);e.$c[r]?e.unmountVframe(r,1):e.unmountZone(r,1)},ht=(e,t,r,i)=>{let n,a,o;for(n of t.i)a=n.d,U(r.j,a)||(n.e?"value"==a?e.value="":e[a]=!1:"id"==a?i.d.push([e,""]):e.removeAttribute(a));for(n of r.i)a=n.d,o=n.f,t.j[a]!=o&&(n.e?"value"==a?e.value=o:e[a]=!0:"id"==a?i.d.push([e,o]):e.setAttribute(a,o))},ct=(e,t,r,i,n,a,o,l,f)=>{if(3==(f=e.h))return d.createTextNode(e.b);l="svg"==f?"http://www.w3.org/2000/svg":t.namespaceURI,(i=d.createElementNS(l,f)).innerHTML=e.b;for(n of e.i)a=n.d,o=n.f,n.e?"value"==a?i.value=o:i[a]=!0:"id"==a?r.d.push([i,o]):i.setAttribute(a,o);return i},ut=(e,t,r,i,n,a,o)=>{let l,f,s,d,$,h,c,u,p,g,m,v,b=e.childNodes,w={};if(t){for(l=($=t.a).length,f=(h=r.a).length,s=0;s<l;s++)(g=(c=$[s]).k)&&(g=w[g]||(w[g]=[])).push({l:b[s],m:c});for(s=0;s<f;s++)if(c=$[s],(g=w[(u=h[s]).k])&&(g=g.pop())){if(m=g.l,v=g.m,m!=b[s]){for($.splice(s,0,c=v),d=$.length;d--;)if($[d]==v){$.splice(d,1);break}e.insertBefore(m,b[s])}pt(b[s],e,c,u,i,n,a,o)}else c?w[c.k]?($.splice(s,0,u),l++,e.insertBefore(ct(u,e,i),b[s])):pt(b[s],e,c,u,i,n,a,o):e.appendChild(ct(u,e,i));for(s=f;s<l;s++)p=e.lastChild,$t(n,p),e.removeChild(p),i.c=1}else i.c=1,e.innerHTML=r.b},pt=(e,t,r,i,n,a,o,l)=>{if(r.h==i.h)if(3==r.h)r.b!=i.b&&(e.nodeValue=i.b);else{let t,f,s,d,$,h,c,p,g,w=i.j[b],y=i.b,x=Ne[e.id];w&&x&&(d=(h=x.$v).$g,c=ae(w),g=y!=x.$i,$=w.indexOf("?")>0||g),w&&x&&x.$n==c[v]?$&&(d?(p=c[m],w.indexOf(u)>-1&&q(o,p,p),x.$i=y,x[v]=w,c={keys:l,inner:y,deep:!h.$e,html:g},ht(e,r,i,n),L(d,[p,c],h)&&h.$b(),f=c.deep):(s=1,f=1,t=1)):(t=1,f=1,s=x),s&&x.unmountVframe(0,1),t&&ht(e,r,i,n),f&&!it[i.h]&&(n.c=1,ut(e,r,i,n,a,o,l))}else $t(a,e),t.replaceChild(ct(i,t,n),e),n.c=1},gt=(e,t,r,i)=>{let n,a,f,s,$=e.$b,h=Ne[$],c=h&&h.$v,u={d:[]},p=P($);if(c&&c.$a>0&&(n=c.$e)){if(r){s=(e=>{let t,r,i,n,a,f,s,d,$,h,c,u=e.length,p=0,g={a:[],b:e},m=[{c:g}],w=(e,t)=>{t.replace(at,(t,r,i)=>{i=i||o,"id"==r?c=i:r==b&&i&&!c&&(c=ae(i)[v]),f.push({d:r,e:rt[e+"_"+r],f:i}),$[r]=i})};for(;p<u;)t=1,0==(i=e.slice(p)).indexOf("</")?(n=i.match(ot))&&(d=(g=m.pop()).c,f=e.slice(g.g,p),"textarea"==d.h?(d.i.push({d:"value",f:f,e:1}),d.j.value=f,d.a=l):d.b=f,g=m[m.length-1].c,p+=n[0].length,t=0):"<"==i[0]&&(n=i.match(nt))&&(a=n[1],s=n[3]||it[a],f=[],$={},c="",w(a,n[2]),d={k:c,h:a,i:f,j:$,a:[]},p+=n[0].length,g.a.push(d),s||(m.push({c:d,g:p}),g=d),t=0),t&&(p+=(h=(r=i.indexOf("<"))<0?i:i.substring(0,r)).length,d={h:3,b:h.replace(ft,dt)},g.a.push(d));return g})(a=wt(n(t),$)),ut(p,e.$d,s,u,h,t,i),e.$d=s;for(f of u.d)f[0].id=f[1];u.c&&(c.endUpdate($),R(d,"htmlchanged",{vId:$}))}c.fire("domready")}},mt=function(e){this.$b=e,this.$c=1,this.$a={vId:e,[u]:1},this.$k={}};E(mt[g],{get(e,t){return t=this.$a,e&&(t=t[e]),t},set(e){let t=this,{$a:r,$k:i}=t;return e&&(t.$c=_(e,r,i)||t.$c),t},digest(e,t,r){let i=this;return i.set(e),e=i.$a,t=i.$k,r=i.$c,i.$c=0,i.$k={},gt(i,e,r,t),i},snapshot(){return this.$e=c(this.$a),this},altered(){let e=this;if(e.$e)return e.$e!=c(e.$a)}});let vt=/^(\$?)([^<]*)<([^>]+)>$/,bt=/\x1f/g,wt=(e,t)=>(e+o).replace(bt,t),yt=(e,t,r)=>(e.$h?r=e:((r=function(e){L(r.$h,e,this)}).$h=[e],r.$i=1),r.$h=r.$h.concat(t.$h||t),r),xt=(e,t)=>{let r,i,n=e.$r;for(r in n)i=n[r],(t||i.x)&&kt(n,r,1)},kt=(e,t,r,i)=>{let n,a,o=e[t];return o&&o!=i&&((n=(a=o.e).destroy)&&r&&L(n,l,a),delete e[t]),a},It=(e,t,r,i,n)=>{i=e[t],e[t]=e[r]=function(...e){(n=this).$a>0&&(n.$a++,n.fire("rendercall"),xt(n),L(i,e,n))}},Vt=(e,t)=>{let r,{$eo:i,$so:n,$el:a,id:o}=e;for(r in i)tt(r,n[r],t);for(r of a)ee(r.e,r.n,Y,t,{i:o,v:e,f:r.f,e:r.e})},Pt=[],St={win:s,doc:d},_t=e=>{if(!e[u]){e[l]=[];let t,r,i,n,a,o,l,s,d,$=e[g],h={},c=[],u={},p={};if(r=$.mixins){for(a of r)for(l in a)t=a[l],i=p[l],"ctor"!=l?(vt.test(l)&&(i?t=yt(i,t):t.$i=1),p[l]=t):e[l].push(t);for(l in p)U($,l)||($[l]=p[l])}for(l in $)if(t=$[l],r=l.match(vt)){[,o,i,n]=r,n=n.split(f);for(s of n){if(a=St[i],d=1,o){if(a){c.push({f:t,e:a,n:s});continue}d=2,(a=u[s])||(a=u[s]={}),a[i]=1}h[s]=h[s]|d,(a=$[s=i+l+s])?a.$i&&(t.$i?$[s]=yt(a,t):U($,l)&&($[s]=t)):$[s]=t}}It($,"render","$b"),$.$eo=h,$.$el=c,$.$so=u,$.$e=$.tmpl,$.$g=$.assign}return e[u]},jt=e=>{let t,r,i,n=e.$l;if(n.f&&(n.p&&(t=me[v]),!t&&n.k)){i=me[m];for(r of n.k)if(t=U(i,r))break}return t},Et=function(e,t,r,i){(i=this).owner=t,i.id=e,i.$l={k:[]},i.$r={},i.$a=1,i.updater=i.$d=new mt(i.id),L(Pt,r,i)},Tt=Et[g];E(Et,{merge(...e){let t,r;for(t of e)(r=t&&t.ctor)&&Pt.push(r),E(Tt,t)},extend(e,t){let r=this,i=(e=e||{}).ctor,n=[];i&&n.push(i);let a=function(e,t,i,a){r.call(this,e,t,i),L(n.concat(a),i,this)};return a.extend=r.extend,B(a,r,e,t)}}),E(Tt,se,{init:h,wrapEvent(e){return wt(e,this.id)},beginUpdate(e,t){(t=this).$a>0&&t.$f&&t.owner.unmountZone(e,1)},endUpdate(e,t,r,i,n){(r=this).$a>0&&(e=e||r.id,t?n=t:(n=r.$f,r.$f=1),(i=r.owner).mountZone(e,t),n||$(r.wrapAsync(ze),0,i))},wrapAsync(e,t){let r=this,i=r.$a;return(...n)=>{if(i>0&&i==r.$a)return e.apply(t||r,n)}},observeLocation(e,t){let r;(r=this.$l).f=1,i(e)&&(t=e[v],e=e[m]),r.p=t,e&&(r.k=(e+o).split(f))},observeState(e){this.$os=(e+o).split(f)},capture(e,t,r,i){return i=this.$r,t?(kt(i,e,1,t),i[e]={e:t,x:r}):t=(i=i[e])&&i.e,t},release(e,t){return kt(this.$r,e,t)},leaveTip(e,t){let r=this,i=n=>{let a="a",o="b";"change"!=n.type&&(a="b",o="a"),i[a]?(n.prevent(),n.reject()):t()?(n.prevent(),i[o]=1,r.leaveConfirm(e,()=>{i[o]=0,n.resolve()},()=>{i[o]=0,n.reject()})):n.resolve()},n=r=>{t()&&(r.msg=e)};qe.on("change",i),qe.on("pageunload",n),r.on("unload",i),r.on("destroy",()=>{qe.off("change",i),qe.off("pageunload",n)})},render:h}),fe.View=Et;let Ot=Date.now,At=function(){this.id=k("b"),this.$={}};E(At[g],{get(e,t,i){let a,l=t!=i,f=this.$;if(e){let t,r=n(e)?e.slice():(e+o).split(".");for(;(t=r.shift())&&f;)f=f[t];t&&(f=i)}return l&&(a=r(t))!=r(f)&&(f=t),f},set(e,t){i(e)||(e={[e]:t}),E(this.$,e)}});let Ct=function(e,t,r){(r=this[e])&&(delete this[e],L(r,t,r.e))},Ht=(e,t,r,i,n,a)=>{let o=[],l=0,f=0;return function(s,d){let $,h=this;f++;let c=h.$b,u=c.k;o[s+1]=h;let p,g={bag:h,error:d};if(d?(l=d,t.fire("fail",g),$=1):a.has(u)||(u&&a.set(u,h),c.t=Ot(),(p=c.a)&&L(p,h,h),(p=c.x)&&t.clear(p),t.fire("done",g),$=1),!r.$d){let t=f==i;t&&(r.$e=0,2==n&&(o[0]=l,L(e,o,r))),1==n&&L(e,[d||null,h,t,s],r)}$&&t.fire("end",g)}},Mt=(e,t,r,i,a)=>{if(e.$d)return e;if(e.$e)return e.enqueue(Mt.bind(e,e,t,r,i,a));e.$e=1,n(t)||(t=[t]);let o=e.constructor,l=0,f=o.$f,s=Ht(r,o,e,t.length,i,o.$c);for(let e of t)if(e){let t,r=o.get(e,a),i=r.e,n=i.$b.k,d=s.bind(i,l++);n&&f[n]?f[n].push(d):r.u?(n&&((t=[d]).e=i,f[n]=t,d=Ct.bind(f,n)),o.$s(i,d)):d()}return e},Lt=function(){let e=this;e.id=k("s"),e.$g=[]};E(Lt[g],{all(e,t){return Mt(this,e,t,2)},save(e,t){return Mt(this,e,t,2,1)},one(e,t){return Mt(this,e,t,1)},enqueue(e){let t=this;return t.$d||(t.$g.push(e),t.dequeue(t.$h)),t},dequeue(...e){let t,r=this;r.$e||r.$d||(r.$e=1,$(()=>{r.$e=0,r.$d||(t=r.$g.shift())&&L(t,r.$h=e)},0))},destroy(e){(e=this).$d=1,e.$g=0}});let Ut=(e,t)=>[c(t),c(e)].join(u),qt=(e,t,r,i)=>{(i=e&&e.$b)&&t[i.n]&&r.del(i.k)},Dt={add(e){let t,r=this.$b;n(e)||(e=[e]);for(t of e)if(t){let{name:e,cache:i}=t;t.cache=0|i,r[e]=t}},create(e){let t=this.meta(e),r=0|e.cache||t.cache,n=new At;n.set(t),n.$b={n:t.name,a:t.after,x:t.cleans,k:r&&Ut(t,e)},i(e)&&n.set(e);let a=t.before;return a&&L(a,n,n),this.fire("begin",{bag:n}),n},meta(e){return this.$b[e.name||e]||e},get(e,t){let r,i,n=this;return t||(r=n.cached(e)),r||(r=n.create(e),i=1),{e:r,u:i}},clear(e){this.$c.each(qt,le((e+o).split(f)))},cached(e){let t,r,i=this,n=i.$c,a=i.meta(e),o=0|e.cache||a.cache;if(o&&(r=Ut(a,e)),r){let e=i.$f[r];e?t=e.e:(t=n.get(r))&&Ot()-t.$b.t>o&&(n.del(r),t=0)}return t},...se};Lt.extend=((e,t,r)=>{let i=function(){Lt.call(this)};return i.$s=e,i.$c=new Z(t,r),i.$f={},i.$b={},B(i,Lt,null,Dt)}),fe.Service=Lt,E(h[g],se),h.extend=function e(t,r){let i=this,n=t&&t.ctor,a=function(...e){i.apply(this,e),n&&n.apply(this,e)};return a.extend=e,B(a,i,t,r)},fe.Base=h,fe.trigger=R;export default fe