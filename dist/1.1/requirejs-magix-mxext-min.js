define("magix/magix",function(){var e=/\/\.\/|\/[^\/.]+?\/\.{2}\/|([^:\/])\/\/+|\.{2}\//,t=/\/[^\/]*$/,n=/[#?].*$/,r="",i=/([^=&?\/#]+)=?([^&=#?]*)/g,a="pathname",o=/^https?:\/\//i,s=0,c="/",f="vframe",u="\n",v=window.console,m=v&&v.error,h=function(){},d={tagName:f,rootId:"magix_vf_root",progress:h,coded:1,execError:function(e){m&&v.error(e)}},l=d.hasOwnProperty,p=function(e,t){return e?l.call(e,t):e},g=function(e){return function(t,n,r){switch(arguments.length){case 0:r=e;break;case 1:r=E._o(t)?w(e,t):p(e,t)?e[t]:null;break;case 2:null===n?(delete e[t],r=n):e[t]=r=n}return r}},x=function(e,t){return t.f==e.f?t.t-e.t:t.f-e.f},y=function(e,t){var n=this;return n.get?(n.c=[],n.x=e||20,n.b=n.x+(0|t||5),void 0):new y(e,t)},w=function(e,t,n){for(var r in t)n&&p(n,r)||(e[r]=t[r]);return e};w(y.prototype,{get:function(e){var t,n=this,r=n.c;return e=a+e,p(r,e)&&(t=r[e],t.f>=1&&(t.f++,t.t=s++,t=t.v)),t},list:function(){return this.c},set:function(e,t,n){var r=this,i=r.c,o=a+e,c=i[o];if(!p(i,o)){if(i.length>=r.b){i.sort(x);for(var f=r.b-r.x;f--;)c=i.pop(),delete i[c.k],c.m&&M(c.m,c.o,c)}c={},i.push(c),i[o]=c}return c.o=e,c.k=o,c.v=t,c.f=1,c.t=s++,c.m=n,t},del:function(e){e=a+e;var t=this.c,n=t[e];n&&(n.f=-1e5,n.v=r,delete t[e],n.m&&(M(n.m,n.o,n),n.m=r))},has:function(e){return e=a+e,p(this.c,e)}});var b=y(60),C=y(),M=function(e,t,n,r,i,a){for(E._a(e)||(e=[e]),t&&(E._a(t)||t.callee)||(t=[t]),r=0;e.length>r;r++)try{a=e[r],i=a&&a.apply(n,t)}catch(o){d.execError(o)}return i},E={mix:w,has:p,safeExec:M,noop:h,config:g(d),start:function(e){var t=this;w(d,e),t.use(d.iniFile,function(n){d=w(d,n,e),d["!tnc"]=d.tagName!=f,t.use(["magix/router","magix/vom"],function(e,n){e.on("!ul",n.locChged),e.on("changed",n.locChged),n.on("progress",d.progress),t.use(d.extensions,e.start)})})},keys:Object.keys||function(e){var t=[];for(var n in e)p(e,n)&&t.push(n);return t},local:g({}),path:function(i,a){var s=i+u+a,f=C.get(s);if(!f){if(o.test(a))f=a;else if(i=i.replace(n,r).replace(t,r)+c,a.charAt(0)==c){var v=o.test(i)?8:0,m=i.indexOf(c,v);f=i.substring(0,m)+a}else f=i+a;for(;e.test(f);)f=f.replace(e,"$1/");C.set(s,f)}return f},pathToObject:function(e,t){var s=e+u+t,f=b.get(s);if(!f){f={};var v={},m=r;n.test(e)?m=e.replace(n,r):~e.indexOf("=")||(m=e);var h=e.replace(m,r);if(m&&o.test(m)){var d=m.indexOf(c,8);m=~d?m.substring(d):c}h.replace(i,function(e,n,r){if(t)try{r=decodeURIComponent(r)}catch(i){}v[n]=r}),f[a]=m,f.params=v,b.set(s,f)}return f},objectToPath:function(e,t,n){var r,i=e[a],o=[],s=e.params;for(var c in s)r=s[c],(!n||r||p(n,c))&&(t&&(r=encodeURIComponent(r)),o.push(c+"="+r));return o.length&&(i=i+"?"+o.join("&")),i},listToMap:function(e,t){var n,r,i,a={};if(E._s(e)&&(e=e.split(",")),e&&(i=e.length))for(n=0;i>n;n++)r=e[n],a[t?r[t]:r]=t?r:1;return a},cache:y},P=Object.prototype.toString;return w(E,{use:function(e,t){$.isArray(e)||(e=[e]),e?require(e,t):t&&t()},_a:$.isArray,_f:$.isFunction,_o:function(e){return"[object Object]"==P.call(e)},_s:function(e){return"[object String]"==P.call(e)},_n:function(e){return"[object Number]"==P.call(e)},extend:function(e,t,n,r){e.superclass=t.prototype,t.prototype.constructor=t;var i=function(){};return i.prototype=t.prototype,e.prototype=new i,E.mix(e.prototype,n),E.mix(e,r),e.prototype.constructor=e,e}})}),define("magix/router",["magix/magix","magix/event"],function(e,t){var n,r,i,a,o=window,s="",c="pathname",f="view",u=e.has,v=e.mix,m=e.keys,h=e.config(),d=e.cache(),l=e.cache(40),p={params:{},href:s},g=/#.*$/,x=/^[^#]*#?!?/,y="params",w=h.nativeHistory,b=h.coded,C=function(t,n,r){if(t){r=this[y],e._s(t)&&(t=t.split(","));for(var i=0;t.length>i&&!(n=u(r,t[i]));i++);}return n},M=function(){return this[c]},E=function(){return this[f]},P=function(e,t,n,r){return n=this,r=n[y],arguments.length>1?r[e]=t:r[e]},_=function(t){var n=e.pathToObject(t,b),r=n[c];return r&&a&&(n[c]=e.path(o.location[c],r)),n},T=v({viewInfo:function(t,n){var i,a;if(!r){r={rs:h.routes||{},nf:h.notFoundView};var o=h.defaultView;r.dv=o;var f=h.defaultPathname||s;i=r.rs,r.f=e._f(i),r.f||i[f]||!o||(i[f]=o),r[c]=f}return t||(t=r[c]),i=r.rs,a=r.f?i.call(h,t,n):i[t],{view:a||r.nf||r.dv,pathname:t}},start:function(){var e=T,t=o.history;i=w&&t.pushState,a=w&&!i,i?e.useState():e.useHash(),e.route()},parseQH:function(e,t){e=e||o.location.href;var n=T,r=d.get(e);if(!r){var i=e.replace(g,s),a=e.replace(x,s),u=_(i),m=_(a),h={};v(h,u[y]),v(h,m[y]),r={get:P,set:P,href:e,refHref:p.href,srcQuery:i,srcHash:a,query:u,hash:m,params:h},d.set(e,r)}if(t&&!r[f]){var l;l=w?r.hash[c]||r.query[c]:r.hash[c];var b=n.viewInfo(l,r);v(r,b)}return r},getChged:function(e,t){var n=e.href,r=t.href,i=n+"\n"+r,a=l.get(i);if(!a){var o,s,u;a={},a[f]=u,a[c]=u,a[y]={};var v,h,d=[c,f];for(v=1;v>=0;v--)h=d[v],s=e[h],u=t[h],s!=u&&(a[h]={from:s,to:u},o=1);var p=e[y],g=t[y];for(d=m(p).concat(m(g)),v=d.length-1;v>=0;v--)h=d[v],s=p[h],u=g[h],s!=u&&(a[y][h]={from:s,to:u},o=1);a.occur=o,a.isParam=C,a.isPathname=M,a.isView=E,l.set(i,a)}return a},route:function(){var e=T,t=e.parseQH(0,1),r=!p.get,i=e.getChged(p,t);p=t,i.occur&&(n=t,e.fire("changed",{location:t,changed:i,force:r}))},navigate:function(t,r,o){var f=T;if(!r&&e._o(t)&&(r=t,t=s),r&&(t=e.objectToPath({params:r,pathname:t},b)),t){var m=_(t),h={};if(h[y]=v({},m[y]),h[c]=m[c],h[c]){if(a){var d=n.query[y];for(var l in d)u(d,l)&&!u(h[y],l)&&(h[y][l]=s)}}else{var p=v({},n[y]);h[y]=v(p,h[y]),h[c]=n[c]}var g,x=e.objectToPath(h,b,n.query[y]);g=i?x!=n.srcQuery:x!=n.srcHash,g&&(i?(f.poped=1,history[o?"replaceState":"pushState"](s,s,x),f.route()):(v(h,n,h),h.srcHash=x,h.hash={params:h[y],pathname:h[c]},f.fire("!ul",{loc:n=h}),x="#!"+x,o?location.replace(x):location.hash=x))}}},t);return T.useState=function(){var e=T,t=location.href;$(o).on("popstate",function(){var n=location.href==t;(e.poped||!n)&&(e.poped=1,e.route())})},T.useHash=function(){$(o).on("hashchange",T.route)},T}),define("magix/body",["magix/magix"],function(e){var t,n=e.has,r=e.mix,i={},a=document.body,o={},s=String.fromCharCode(26),c="mx-ei",f="mx-owner",u="addEventListener",v="removeEventListener",m=a[u],h={},d=65536,l="on",p=",",g=function(e){return e.id||(e.id="mx-e-"+d--)},x=function(e,t,n){return n?e.setAttribute(t,n):n=e.getAttribute(t),n},y=function(){this.returnValue=!1},w=function(){this.cancelBubble=!0},b={special:function(e){r(i,e)},process:function(e){if(e=e||window.event,e&&!e[l]){var r=e.target||e.srcElement||a;for(e[l]=1;r&&1!=r.nodeType;)r=r.parentNode;for(var i,o,u=r,v=e.type,d=h[v]||(h[v]=RegExp(p+v+"(?:,|$)")),b="mx-"+v,$=[];u&&1==u.nodeType&&(i=x(u,b),o=x(u,c),!i&&!d.test(o));)$.push(u),u=u.parentNode;if(i){var C,M=i.split(s);if(M.length>1&&(C=M[0],i=M.pop()),C=C||x(u,f),!C)for(var E=u,P=t.all();E;){if(n(P,E.id)){x(u,f,C=E.id);break}E=E.parentNode}if(!C)throw Error("bad:"+i);var _=t.get(C),T=_&&_.view;T&&(m||(e.preventDefault=y,e.stopPropagation=w),T.pEvt({info:i,se:e,st:v,tId:g(r),cId:g(u)}))}else for(var O;$.length;)O=$.shift(),o=x(O,c)||l,d.test(o)||(o=o+p+v,x(O,c,o))}},act:function(e,n,r){var s=o[e]||0,c=s>0?1:0,f=b.process;if(s+=n?-c:c,!s){r&&(t=r);var h=i[e];h?b.lib(a,e,n,f):m?a[n?v:u](e,f,!1):a[l+e]=n?null:f,n||(s=1)}o[e]=s}},C={focus:2,blur:2,mouseenter:2,mouseleave:2};return b.special(C),b.lib=function(e,t,n,r){var i=C[t];1==i?$(e)[n?"off":"on"](t,r):$(e)[(n?"un":"")+"delegate"]("[mx-"+t+"]",t,r)},b}),define("magix/event",["magix/magix"],function(e){var t=function(e){return"~"+e},n=e.safeExec,r={fire:function(e,r,i,a){var o=t(e),s=this,c=s[o];if(c){r||(r={}),r.type||(r.type=e);for(var f,u,v=c.length,m=v-1;v--;)f=a?v:m-v,u=c[f],(u.d||u.r)&&(c.splice(f,1),m--),u.d||n(u.f,r,s)}i&&delete s[o]},on:function(e,n,r){var i=t(e),a=this[i]||(this[i]=[]),o={f:n};isNaN(r)?(o.r=r,a.push(o)):a.splice(0|r,0,o)},off:function(e,n){var r=t(e),i=this[r];if(i)if(n){for(var a,o=i.length-1;o>=0;o--)if(a=i[o],a.f==n&&!a.d){a.d=1;break}}else delete this[r]},once:function(e,n){this.on(e,n,t)}};return r}),define("magix/vframe",["magix/magix","magix/event","magix/view"],function(e,t,n){var r,i,a,o,s,c=document,f=c.body,u=65536,v=e.safeExec,m=[],h=e.mix,d=e.config("tagName"),l=e.config("rootId"),p=e.config("!tnc"),g=e.has,x=p?"mx-vframe":"mx-defer",y=f.contains,w="querySelectorAll",b=p&&f[w],$=" "+d+"[mx-vframe]",C="alter",M="created",E=function(e){return"object"==typeof e?e:c.getElementById(e)},P=function(e,t,n){return t=E(e),t&&(n=b?c[w]("#"+_(t)+$):t.getElementsByTagName(d)),n||m},_=function(e){return e.id||(e.id="magix_vf_"+u--)},T=function(e,t,n){if(e=E(e),t=E(t),e&&t)if(e!==t)try{n=y?t.contains(e):16&t.compareDocumentPosition(e)}catch(r){n=0}else n=1;return n},O=function(e){var t=this;t.id=e,t.cM={},t.cC=0,t.rC=0,t.sign=1<<30,t.rM={},t.owner=s};return h(O,{root:function(e,t,n){if(!r){a=t,o=n,s=e;var i=E(l);i||(i=c.createElement(d),i.id=l,f.appendChild(i)),r=new O(l),e.add(r)}return r}}),h(h(O.prototype,t),{mountView:function(t,r){var i=this,c=E(i.id);if(c._bak?c._chgd=1:(c._bak=1,c._tmpl=c.innerHTML),i.unmountView(),t){var f=e.pathToObject(t),u=f.pathname,v=--i.sign;e.use(u,function(e){if(v==i.sign){n.prepare(e);var t=new e({owner:i,id:i.id,$:E,path:u,vom:s,location:a});i.view=t,t.on("interact",function(e){e.tmpl||(c._chgd&&(c.innerHTML=c._tmpl),i.mountZoneVframes()),t.on("primed",function(){i.viewPrimed=1,i.fire("viewMounted")}),t.on("rendered",function(){i.mountZoneVframes()}),t.on("prerender",function(){i.unmountZoneVframes(0,1)||i.cAlter()})},0),r=r||{},t.load(h(r,f.params,r),o)}})}},unmountView:function(){var e=this,t=e.view;if(t){i||(i={}),e.unmountZoneVframes(0,1),e.cAlter(i),delete e.view,t.oust();var n=E(e.id);n&&n._bak&&(n.innerHTML=n._tmpl),delete e.viewInited,e.viewPrimed&&(delete e.viewPrimed,e.fire("viewUnmounted")),i=0}e.sign--},mountVframe:function(e,t,n){var r=this;r.fcc&&r.cAlter();var i=s.get(e);return i||(i=new O(e),i.pId=r.id,g(r.cM,e)||r.cC++,r.cM[e]=1,s.add(i)),i.mountView(t,n),i},mountZoneVframes:function(e,t){var n=this,r=e||n.id;n.unmountZoneVframes(r,1);var i=P(r),a=i.length,o={};if(a)for(var s,c,f,u,v=0;a>v;v++)if(s=i[v],c=_(s),!g(o,c)&&(f=s.getAttribute("mx-view"),u=!s.getAttribute(x),u=u!=p,u||f)){n.mountVframe(c,f,t);for(var m,h=P(s),d=0,l=h.length;l>d;d++)m=h[d],o[_(m)]=1}n.cCreated()},unmountVframe:function(e,t){var n=this;e=e||n.id;var r=s.get(e);if(r){var i=r.fcc;r.unmountView(),s.remove(e,i);var a=s.get(r.pId);a&&g(a.cM,e)&&(delete a.cM[e],a.cC--,t||a.cCreated())}},unmountZoneVframes:function(e,t){var n,r,i=this,a=i.cM;for(r in a)e?T(r,e)&&i.unmountVframe(r,n=1):i.unmountVframe(r,n=1);return t||i.cCreated(),n},cCreated:function(e){var t=this;if(t.cC==t.rC){var n=t.view;n&&!t.fcc&&(t.fcc=1,delete t.fca,n.fire(M,e),t.fire(M,e)),s.vfCreated();var r=t.id,i=s.get(t.pId);i&&!g(i.rM,r)&&(i.rM[r]=i.cM[r],i.rC++,i.cCreated(e))}},cAlter:function(e){var t=this;e||(e={});var n=t.fcc;if(delete t.fcc,!t.fca&&n){var r=t.view,i=t.id;r&&(t.fca=1,r.fire(C,e),t.fire(C,e));var a=s.get(t.pId);a&&g(a.rM,i)&&(a.rC--,delete a.rM[i],a.cAlter(e))}},locChged:function(){var t=this,n=t.view;if(t.viewInited&&n.sign>0){var r=n.olChg(o),i={location:a,changed:o,prevent:function(){this.cs=m},to:function(t){t=t||m,e._s(t)&&(t=t.split(",")),this.cs=t}};r&&v(n.locationChange,i,n);for(var c,f=i.cs||e.keys(t.cM),u=0,h=f.length;h>u;u++)c=s.get(f[u]),c&&c.locChged()}}}),O}),define("magix/view",["magix/magix","magix/event","magix/body"],function(e,t,n){var r=e.safeExec,i=e.has,a=",",o=[],s=e.noop,c=e.mix,f="~",u=function(e){return function(){var t,n=this,r=n.notifyUpdate();return r&&(t=e.apply(n,arguments)),t}},v=e.cache(40),m="<",h=">",d=/\smx-(?!view|defer|owner|vframe)[a-z]+\s*=\s*"/g,l=String.fromCharCode(26),p={prevent:function(e){e=e||this.srcEvent,e.preventDefault()},stop:function(e){e=e||this.srcEvent,e.stopPropagation()},halt:function(e){this.prevent(e),this.stop(e)}},g=/(\w+)(?:<(\w+)>)?(?:\(?{([\s\S]*)}\)?)?/,x=/(\w+):([^,]+)/g,y=/([$\w]+)<([\w,]+)>/,w=function(e){var t=this;c(t,e),t.$ol={ks:[]},t.sign=1,r(w.ms,[e],t)};w.ms=[],w.prepare=function(e){if(!e[f]){e[f]=1;var t,n,r,i,o,c=e.prototype,v={};for(var d in c)if(t=c[d],n=d.match(y))for(r=n[1],i=n[2],i=i.split(a),o=i.length-1;o>-1;o--)n=i[o],v[n]=1,c[r+m+n+h]=t;else"render"==d&&t!=s&&(c[d]=u(t));i&&(c.$evts=v)}},w.mixin=function(e,t){t&&w.ms.push(t),c(w.prototype,e)},c(c(w.prototype,t),{render:s,locationChange:s,init:s,hasTmpl:!0,load:function(){var e=this,t=e.hasTmpl,n=arguments,i=e.sign,a=function(a){if(i>0&&i==e.sign){t&&(e.template=e.wrapMxEvent(a)),e.dEvts(),e.fire("interact",{tmpl:t},1),r(e.init,n,e),e.fire("inited",0,1),e.owner.viewInited=1,r(e.render,o,e);var s=!t&&!e.rendered;s&&(e.rendered=1,e.fire("primed",0,1))}};t?e.fetchTmpl(e.path,a):a()},beginUpdate:function(){var e=this;e.sign>0&&e.rendered&&(e.fire("refresh",0,1),e.fire("prerender"))},endUpdate:function(){var e=this;e.sign>0&&(e.rendered||(e.fire("primed",0,1),e.rendered=1),e.fire("rendered"))},notifyUpdate:function(){var e=this;return e.sign>0&&(e.sign++,e.fire("rendercall")),e.sign},wrapMxEvent:function(e){return(e+"").replace(d,"$&"+this.id+l)},wrapAsync:function(e){var t=this,n=t.sign;return function(){n==t.sign&&e&&e.apply(this,arguments)}},setViewHTML:function(e){var t,n=this;n.beginUpdate(),n.sign>0&&(t=n.$(n.id),t&&(t.innerHTML=e)),n.endUpdate()},observeLocation:function(t){var n,r=this;n=r.$ol,n.f=1;var i=n.ks;e._o(t)&&(n.pn=t.pathname,t=t.keys),t&&(n.ks=i.concat((t+"").split(a)))},olChg:function(e){var t=this,n=t.$ol,r=1;return n.f&&(r=0,n.pn&&(r=e.pathname),r||(r=e.isParam(n.ks))),r},oust:function(){var e=this;e.sign>0&&(e.sign=0,e.fire("refresh",0,1),e.fire("destroy",0,1,1),e.dEvts(1)),e.sign--},pEvt:function(e){var t=this;if(t.sign>0){var n=e.info,i=e.se,a=v.get(n);a||(a=n.match(g),a={n:a[1],f:a[2],i:a[3],p:{}},a.i&&a.i.replace(x,function(e,t,n){a.p[t]=n}),v.set(n,a));var o=a.n+m+e.st+h,s=t[o];if(s){var c=p[a.f];c&&c.call(p,i),r(s,{currentId:e.cId,targetId:e.tId,type:e.st,srcEvent:i,halt:p.halt,prevent:p.prevent,stop:p.stop,params:a.p},t)}}},dEvts:function(e){var t=this,r=t.$evts,i=t.vom;for(var a in r)n.act(a,e,i)}});var b={},C="?t="+Math.random(),M={},E={};return w.prototype.fetchTmpl=function(e,t){var n=this,a="template"in n;if(a)t(n.template);else if(i(M,e))t(M[e]);else{var o=e.indexOf("/"),s=e.substring(0,o);b[s]||(b[s]=require.s.contexts._.config.paths[s]);var c=b[s]+e.substring(o+1)+".html",f=E[c],u=function(n){t(M[e]=n)};f?f.push(u):(f=E[c]=[u],$.ajax({url:c+C,success:function(e){r(f,e),delete E[c]},error:function(e,t){r(f,t),delete E[c]}}))}},w.extend=function(t,n,i){var a=this,o=function(){o.superclass.constructor.apply(this,arguments),n&&r(n,arguments,this)};return o.extend=a.extend,e.extend(o,a,t,i)},w}),define("magix/vom",["magix/vframe","magix/magix","magix/event"],function(e,t,n){var r=t.has,i=t.mix,a=0,o=0,s=0,c=0,f={},u={},v={},m=t.mix({all:function(){return f},add:function(e){r(f,e.id)||(a++,f[e.id]=e,m.fire("add",{vframe:e}))},get:function(e){return f[e]},remove:function(e,t){var n=f[e];n&&(a--,t&&o--,delete f[e],m.fire("remove",{vframe:n}))},vfCreated:function(){if(!c){o++;var e=o/a;e>s&&m.fire("progress",{percent:s=e},c=1==e)}},locChged:function(t){var n,r=t.loc;if(r?n=1:r=t.location,i(u,r),!n){i(v,t.changed);var a=e.root(m,u,v);v.view?a.mountView(r.view):a.locChged()}}},n);return m}),define("mxext/mmanager",["magix/magix","magix/event"],function(e,t){var n=e.has,r=e.safeExec,i=e._a,a=e.mix,o="mr",s=String.fromCharCode(26),c=12e5,f=function(e,t,n){t=[];for(n in e)t.push(n,o,e[n]);return t},u=function(e,t,n){for(var r,i=[t.name],a={},o=e.length-1;o>-1;o--)r=e[o],a[r]?e.splice(o,1):i.push(a[r]=f(t[r]),f(n[r]));return i.join(s)},v=function(e){var t=e.cache;if(t){var n=0|e.cacheTime;t=n?n:t===!0?c:0|t}return t},m=Date.now||function(){return+new Date},h=m(),d=function(e){throw Error(e)},l=function(t,n){var a=this;a.$mClass=t,a.$mCache=e.cache(),a.$mCacheKeys={},a.$mMetas={},n=n?i(n)?n:[n]:[],a.$sKeys=["postParams","urlParams"].concat(n),a.id="mm"+h--,r(l.ms,arguments,a)},p=[].slice,g=function(e,t,n,r){return function(){return e.apply(t,[n,r].concat(p.call(arguments)))}},x=function(e,t,n){var i=n.b,a=n.a,o=a[i];if(o){var s=o.q;delete a[i],r(s,e,o.e)}},y=function(e,t,n){var i,a=this,o=t.a,s=t.c,c=t.d,f=t.g,u=t.i,v=t.j,h=t.k,d=t.l,l=t.m,p=t.n,g=t.o;if(!o.$destroy){t.b++,delete s[a.id];var x=a.$mm,y=x.key,w=x.meta;if(c[e]=a,n)t.e=1,i=1,t.f=n,f.msg=n,f[e]=n,v.fire("fail",{model:a,meta:w,msg:n});else{if(!y||y&&!u.has(y)){y&&u.set(y,a),x.done=m();var b=x.after;b&&r(b,[a,w]),v.fire("done",{model:a,meta:w})}x.used>0&&(a.fromCache=1),x.used++}if(h==$.ONE){var C=d?l[e]:l;C&&(p[e]=r(C,[i?f:null,a,f],o))}else if(h==$.ORDER){g[e]={m:a,e:i,s:n};for(var M,E,P=g.i||0;M=g[P];P++)E=d?l[P]:l,M.e&&(f.msg=M.s,f[P]=M.s),p[P]=r(E,[M.e?f:null,M.m,f].concat(p),o);g.i=P}t.b>=t.h&&(t.e||(f=null),h==$.ALL?(c.unshift(f),p[0]=f,p[1]=r(l,c,o)):p.unshift(f),o.$ntId=setTimeout(function(){o.doNext(p)},30))}},w=function(e){return function(){var t=new C(this),n=arguments,r=n[n.length-1];return r&&r.manage&&(r.manage(t),n=p.call(n,0,-1)),t[e].apply(t,n)}},b=function(e,t){return function(n,r){var i=p.call(arguments,1);return this.send(n,i.length>1?i:r,e,t)}};a(l,{create:function(e,t){return new l(e,t)},mixin:function(e,t){t&&l.ms.push(t),a(l.prototype,e)},ms:[]});var $={ALL:1,ONE:2,ORDER:4},C=function(e){this.$host=e,this.$busy=0,this.$reqs={},this.id=o+h--};return a(C.prototype,{send:function(e,t,r,a){var o=this;if(o.$busy)return o.next(function(){this.send(e,t,r,a)}),o;o.$busy=1;var s=o.$host,c=s.$mCache,f=s.$mCacheKeys,u=o.$reqs;i(e)||(e=[e]);var v=e.length,m=[],h=i(t);h&&(m=Array(t.length));for(var l,p={a:o,b:0,c:o.$reqs,d:Array(v),g:{},h:v,i:c,j:s,k:r,l:h,m:t,n:m,o:[]},w=0;e.length>w;w++)if(l=e[w]){var b=s.getModel(l,a),$=b.cKey,C=b.entity,M=g(y,C,w,p);M.id=o.id,$&&n(f,$)?f[$].q.push(M):b.update?(u[C.id]=C,$&&(f[$]={q:[M],e:C},M=x),C.request(M,{a:f,b:$})):M()}else d("empty model");return o},fetchAll:function(e,t){return this.send(e,t,$.ALL)},saveAll:function(e,t){return this.send(e,t,$.ALL,1)},fetchOrder:b($.ORDER),saveOrder:b($.ORDER,1),saveOne:b($.ONE,1),fetchOne:b($.ONE),abort:function(){var e=this;clearTimeout(e.$ntId);var t=e.$host,i=e.$reqs,a=t.$mCacheKeys;for(var o in i){var s=i[o],c=s.$mm.key;if(c&&n(a,c)){for(var f,u=a[c],v=u.q,m=[],h=[],d=0;v.length>d;d++)f=v[d],f.id!=e.id?m.push(f):e.$destroy||h.push(f);r(h,["abort"],e),m.length?u.q=m:s.abort()}else s.abort()}e.$reqs={},e.$queue=[],e.$busy=0},next:function(e){var t=this;if(t.$queue||(t.$queue=[]),t.$queue.push(e),!t.$busy){var n=t.$latest;t.doNext(n)}return t},doNext:function(e){var t=this;t.$busy=0;var n=t.$queue;if(n){var i=n.shift();i&&r(i,e,t)}t.$latest=e},destroy:function(){var e=this;e.$destroy=1,e.abort()}}),a(a(l.prototype,t),{registerModels:function(e){var t=this,n=t.$mMetas;i(e)||(e=[e]);for(var r,a,o=0;e.length>o;o++)r=e[o],r&&(a=r.name,a?n[a]&&d("already exist:"+a):d("miss name"),r.cache=v(r),n[a]=r)},registerMethods:function(e){a(this,e)},createModel:function(e){var t,n=this,i=n.getModelMeta(e),a=v(e)||i.cache,o=new n.$mClass;o.set(i),o.$mm=t={used:0};var s=e.before||i.before;s&&r(s,[o,i]);var c=e.after||i.after;return t.after=c,a&&(t.key=u(n.$sKeys,i,e)),t.meta=i,e.name&&o.set(e),o.setUrlParams(i.urlParams),o.setPostParams(i.postParams),o.setUrlParams(e.urlParams),o.setPostParams(e.postParams),n.fire("inited",{model:o,meta:i}),o},getModelMeta:function(e){var t=this,n=t.$mMetas,r=e.name||e,i=n[r];return i||d("Unfound:"+r),i},getModel:function(e,t){var n,r,i=this;return t||(n=i.getCachedModel(e)),n||(r=1,n=i.createModel(e)),{entity:n,cKey:n.$mm.key,update:r}},saveAll:w("saveAll"),fetchAll:w("fetchAll"),saveOrder:w("saveOrder"),fetchOrder:w("fetchOrder"),saveOne:w("saveOne"),fetchOne:w("fetchOne"),createMRequest:function(e){var t=new C(this);return e&&e.manage&&e.manage(t),t},clearCacheByKey:function(e){var t=this,n=t.$mCache;n.del(e)},clearCacheByName:function(e){for(var t=this,n=t.$mCache,r=n.list(),i=0;r.length>i;i++){var a=r[i],o=a.v,s=o&&o.$mm;if(s){var c=s.meta.name;c==e&&n.del(s.key)}}},getCachedModel:function(e){var t,n=this,r=n.$mCache,i=null,a=n.getModelMeta(e),o=v(e)||a.cache;if(o&&(t=u(n.$sKeys,a,e)),t){var s=n.$mCacheKeys,c=s[t];c?i=c.e:(i=r.get(t),i&&o>0&&m()-i.$mm.done>o&&(n.clearCacheByKey(t),i=0))}return i}}),l}),define("mxext/model",["magix/magix"],function(e){var t=function(t,n){var r=this,i=function(){i.superclass.constructor.apply(this,arguments),n&&e.safeExec(n,arguments,this)};return e.mix(i,r,{prototype:!0}),e.extend(i,r,t)},n=+new Date,r=encodeURIComponent,i=e.has,a=e._o,o=e.toString,s=function(e){this.set(e),this.id="m"+n--};return e.mix(s,{GET:"GET",POST:"POST",extend:t}),e.mix(s.prototype,{sync:e.noop,getPostParams:function(){return this.getParams(s.POST)},getUrlParams:function(){return this.getParams(s.GET)},getParams:function(t){var n=this;t||(t=s.GET);var i,a="$"+t,o=n[a],c=[];for(var f in o){i=o[f],e._a(i)||(i=[i]);for(var u=0;i.length>u;u++)c.push(f+"="+r(i[u]))}return c.join("&")},setUrlParamsIf:function(e,t){this.setParams(e,t,s.GET,!0)},setPostParamsIf:function(e,t){var n=this;n.setParams(e,t,s.POST,!0)},setParams:function(e,t,n,r){var o=this,s="$"+n;o[s]||(o[s]={});var c=o[s];if(!a(e)&&e){var f={};f[e]=t,e=f}for(var u in e)r&&i(c,u)||(c[u]=e[u])},setPostParams:function(e,t){var n=this;n.setParams(e,t,s.POST)},setUrlParams:function(e,t){this.setParams(e,t,s.GET)},get:function(e,t,n){var r=this,i=arguments.length,a=2==i,s=r.$attrs;if(i){for(var c=(e+"").split(".");s&&c[0];)s=s[c.shift()];c[0]&&(s=n)}return a&&o.call(t)!=o.call(s)&&(s=t),s},set:function(e,t){var n=this;if(n.$attrs||(n.$attrs={}),a(e))for(var r in e)n.$attrs[r]=e[r];else e&&(n.$attrs[e]=t)},request:function(e,t){var n=this;n.$abt=0;var r=function(r,i){n.$abt?(r="abort",i=null):(a(i)||(i={data:i}),n.set(i)),e(r,i,t)};n.$trans=n.sync(r)},abort:function(){var e=this,t=e.$trans;t&&t.abort&&t.abort(),delete e.$trans,e.$abt=1},isAborted:function(){return this.$abt}}),s}),define("mxext/view",["magix/magix","magix/view","magix/router"],function(e,t,n){var r=window,i=0,a=e.safeExec,o=e.has,s=[],c="rendercall",f="destroy",u=function(e){r.clearTimeout(e),r.clearInterval(e)},v=function(e){var t=e&&e[f];t&&a(t,s,e)},m=function(e){var t=this,n=t.$res,r=e.type==c,i=e.type!=f;for(var a in n){var o=n[a];(!r||o.mr)&&t.destroyManaged(a,i)}},h=t.extend({navigate:n.navigate,manage:function(t,n,r){var a=this,o=arguments,s=1,c=a.$res;1==o.length?(n=t,t="res_"+i++,s=0):a.destroyManaged(t);var f;f=e._n(n)?u:v;var m={hk:s,res:n,ol:r,mr:n&&n.$reqs,oust:f};return c[t]=m,n},getManaged:function(e,t){var n=this,r=n.$res,i=null;if(o(r,e)){var a=r[e];i=a.res,t&&delete r[e]}return i},removeManaged:function(e){return this.getManaged(e,1)},destroyManaged:function(e,t){var n,r=this,i=r.$res,a=i[e];return!a||t&&a.ol||(n=a.res,a.oust(n),a.hk&&t||delete i[e]),n}},function(){var e=this;e.$res={},e.on("interact",function(){e.on(c,m),e.on("prerender",m),e.on(f,m)}),a(h.ms,arguments,e)},{ms:[],mixin:function(t,n){n&&h.ms.push(n),e.mix(h.prototype,t)}});return h}),document.createElement("vframe");