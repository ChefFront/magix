define("magix/magix",function(){var e=/\/\.\/|\/[^\/.]+?\/\.{2}\/|([^:\/])\/\/+|\.{2}\//,t=/\/[^\/]*$/,r=/[#?].*$/,n="",i=/([^=&?\/#]+)=?([^&=#?]*)/g,a="pathname",o=/^https?:\/\//i,s=0,c="/",f="vframe",u="\n",v=window.console,m=v&&v.error,h=function(){},d={tagName:f,rootId:"magix_vf_root",progress:h,coded:1,execError:function(e){m&&v.error(e)}},l=d.hasOwnProperty,p=function(e,t){return e?l.call(e,t):e},g=function(e){return function(t,r,n){switch(arguments.length){case 0:n=e;break;case 1:n=E._o(t)?w(e,t):p(e,t)?e[t]:null;break;case 2:null===r?(delete e[t],n=r):e[t]=n=r}return n}},x=function(e,t){return t.f==e.f?t.t-e.t:t.f-e.f},y=function(e,t){var r=this;return r.get?(r.c=[],r.x=e||20,r.b=r.x+(0|t||5),void 0):new y(e,t)},w=function(e,t,r){for(var n in t)r&&p(r,n)||(e[n]=t[n]);return e};w(y.prototype,{get:function(e){var t,r=this,n=r.c;return e=a+e,p(n,e)&&(t=n[e],t.f>=1&&(t.f++,t.t=s++,t=t.v)),t},list:function(){return this.c},set:function(e,t,r){var n=this,i=n.c,o=a+e,c=i[o];if(!p(i,o)){if(i.length>=n.b){i.sort(x);for(var f=n.b-n.x;f--;)c=i.pop(),delete i[c.k],c.m&&M(c.m,c.o,c)}c={},i.push(c),i[o]=c}return c.o=e,c.k=o,c.v=t,c.f=1,c.t=s++,c.m=r,t},del:function(e){e=a+e;var t=this.c,r=t[e];r&&(r.f=-1e5,r.v=n,delete t[e],r.m&&(M(r.m,r.o,r),r.m=n))},has:function(e){return e=a+e,p(this.c,e)}});var b=y(60),C=y(),M=function(e,t,r,n,i,a){for(E._a(e)||(e=[e]),t&&(E._a(t)||t.callee)||(t=[t]),n=0;e.length>n;n++)try{a=e[n],i=a&&a.apply(r,t)}catch(o){d.execError(o)}return i},E={mix:w,has:p,safeExec:M,noop:h,config:g(d),start:function(e){var t=this;w(d,e),t.use(["magix/router","magix/vom",e.iniFile],function(r,n,i){d=w(d,i,e),d["!tnc"]=d.tagName!=f,r.on("!ul",n.locChged),r.on("changed",n.locChged),n.on("progress",d.progress),t.use(d.extensions,r.start)})},keys:Object.keys||function(e){var t=[];for(var r in e)p(e,r)&&t.push(r);return t},local:g({}),path:function(i,a){var s=i+u+a,f=C.get(s);if(!f){if(o.test(a))f=a;else if(i=i.replace(r,n).replace(t,n)+c,a.charAt(0)==c){var v=o.test(i)?8:0,m=i.indexOf(c,v);f=i.substring(0,m)+a}else f=i+a;for(;e.test(f);)f=f.replace(e,"$1/");C.set(s,f)}return f},pathToObject:function(e,t){var s=e+u+t,f=b.get(s);if(!f){f={};var v={},m=n;r.test(e)?m=e.replace(r,n):~e.indexOf("=")||(m=e);var h=e.replace(m,n);if(m&&o.test(m)){var d=m.indexOf(c,8);m=~d?m.substring(d):c}h.replace(i,function(e,r,n){if(t)try{n=decodeURIComponent(n)}catch(i){}v[r]=n}),f[a]=m,f.params=v,b.set(s,f)}return f},objectToPath:function(e,t,r){var n,i=e[a],o=[],s=e.params;for(var c in s)n=s[c],(!r||n||p(r,c))&&(t&&(n=encodeURIComponent(n)),o.push(c+"="+n));return o.length&&(i=i+"?"+o.join("&")),i},listToMap:function(e,t){var r,n,i,a={};if(E._s(e)&&(e=e.split(",")),e&&(i=e.length))for(r=0;i>r;r++)n=e[r],a[t?n[t]:n]=t?n:1;return a},cache:y},P=Object.prototype.toString;return w(E,{use:function(e,t){e?($.isArray(e)||(e=[e]),require(e,t)):t&&t()},_a:$.isArray,_f:$.isFunction,_o:function(e){return"[object Object]"==P.call(e)},_s:function(e){return"[object String]"==P.call(e)},_n:function(e){return"[object Number]"==P.call(e)},extend:function(e,t,r,n){e.superclass=t.prototype,t.prototype.constructor=t;var i=function(){};return i.prototype=t.prototype,e.prototype=new i,E.mix(e.prototype,r),E.mix(e,n),e.prototype.constructor=e,e}})}),define("magix/router",["magix/magix","magix/event"],function(e,t){var r,n,i,a,o,s,c=window,f="",u="pathname",v="view",m=e.has,h=e.mix,d=e.keys,l=e.config(),p=e.cache(),g=e.cache(40),x={params:{},href:f},y=/#.*$/,w=/^[^#]*#?!?/,b="params",C=function(t,r,n){if(t){n=this[b],e._s(t)&&(t=t.split(","));for(var i=0;t.length>i&&!(r=m(n,t[i]));i++);}return r},M=function(){return this[u]},E=function(){return this[v]},P=function(e,t,r,n){return r=this,n=r[b],arguments.length>1?n[e]=t:n[e]},_=function(t){var r=e.pathToObject(t,a),n=r[u];return n&&s&&(r[u]=e.path(c.location[u],n)),r},T=h({viewInfo:function(t,r){var i,a;if(!n){n={rs:l.routes||{},nf:l.notFoundView};var o=l.defaultView;n.dv=o;var s=l.defaultPathname||f;i=n.rs,n.f=e._f(i),n.f||i[s]||!o||(i[s]=o),n[u]=s}return t||(t=n[u]),i=n.rs,a=n.f?i.call(l,t,r):i[t],{view:a||n.nf||n.dv,pathname:t}},start:function(){var e=T,t=c.history;i=l.nativeHistory,a=l.coded,o=i&&t.pushState,s=i&&!o,o?e.useState():e.useHash(),e.route()},parseQH:function(e,t){e=e||c.location.href;var r=T,n=p.get(e);if(!n){var a=e.replace(y,f),o=e.replace(w,f),s=_(a),m=_(o),d={};h(d,s[b]),h(d,m[b]),n={get:P,set:P,href:e,refHref:x.href,srcQuery:a,srcHash:o,query:s,hash:m,params:d},p.set(e,n)}if(t&&!n[v]){var l;l=n.hash[u]||i&&n.query[u];var g=r.viewInfo(l,n);h(n,g)}return n},getChged:function(e,t){var r=e.href,n=t.href,i=r+"\n"+n,a=g.get(i);if(!a){var o,s,c;a={},a[v]=c,a[u]=c,a[b]={};var f,m,h=[u,v];for(f=1;f>=0;f--)m=h[f],s=e[m],c=t[m],s!=c&&(a[m]={from:s,to:c},o=1);var l=e[b],p=t[b];for(h=d(l).concat(d(p)),f=h.length-1;f>=0;f--)m=h[f],s=l[m],c=p[m],s!=c&&(a[b][m]={from:s,to:c},o=1);a.occur=o,a.isParam=C,a.isPathname=M,a.isView=E,g.set(i,a)}return a},route:function(){var e=T,t=e.parseQH(0,1),n=!x.get,i=e.getChged(x,t);x=t,i.occur&&(r=t,e.fire("changed",{location:t,changed:i,force:n}))},navigate:function(t,n,i){var c=T;if(!n&&e._o(t)&&(n=t,t=f),n&&(t=e.objectToPath({params:n,pathname:t},a)),t){var v=_(t),d={};if(d[b]=h({},v[b]),d[u]=v[u],d[u]){if(s){var l=r.query[b];for(var p in l)m(l,p)&&!m(d[b],p)&&(d[b][p]=f)}}else{var g=h({},r[b]);d[b]=h(g,d[b]),d[u]=r[u]}var x,y=e.objectToPath(d,a,r.query[b]);x=o?y!=r.srcQuery:y!=r.srcHash,x&&(o?(c.poped=1,history[i?"replaceState":"pushState"](f,f,y),c.route()):(h(d,r,d),d.srcHash=y,d.hash={params:d[b],pathname:d[u]},c.fire("!ul",{loc:r=d}),y="#!"+y,i?location.replace(y):location.hash=y))}}},t);return T.useState=function(){var e=T,t=location.href;$(c).on("popstate",function(){var r=location.href==t;(e.poped||!r)&&(e.poped=1,e.route())})},T.useHash=function(){$(c).on("hashchange",T.route)},T}),define("magix/body",["magix/magix"],function(e){var t,r=e.has,n=e.mix,i={},a=document.body,o={},s=String.fromCharCode(26),c="mx-ei",f="mx-owner",u="addEventListener",v="removeEventListener",m=a[u],h={},d=65536,l="on",p=",",g=function(e){return e.id||(e.id="mx-e-"+d--)},x=function(e,t,r){return r?e.setAttribute(t,r):r=e.getAttribute(t),r},y=function(){this.returnValue=!1},w=function(){this.cancelBubble=!0},b={special:function(e){n(i,e)},process:function(e){if(e=e||window.event,e&&!e[l]){var n=e.target||e.srcElement||a;for(e[l]=1;n&&1!=n.nodeType;)n=n.parentNode;for(var i,o,u=n,v=e.type,d=h[v]||(h[v]=RegExp(p+v+"(?:,|$)")),$="mx-"+v,b=[];u&&1==u.nodeType&&(i=x(u,$),o=x(u,c),!i&&!d.test(o));)b.push(u),u=u.parentNode;if(i){var C,M=i.split(s);if(M.length>1&&(C=M[0],i=M.pop()),C=C||x(u,f),!C)for(var E=u,P=t.all();E;){if(r(P,E.id)){x(u,f,C=E.id);break}E=E.parentNode}if(!C)throw Error("bad:"+i);var _=t.get(C),T=_&&_.view;T&&(m||(e.preventDefault=y,e.stopPropagation=w),T.pEvt({info:i,se:e,st:v,tId:g(n),cId:g(u)}))}else{for(var O;b.length;)O=b.shift(),o=x(O,c)||l,d.test(o)||(o=o+p+v,x(O,c,o));O=null}u=n=null}},act:function(e,r,n){var s=o[e]||0,c=s>0?1:0,f=b.process;if(s+=r?-c:c,!s){n&&(t=n);var h=i[e];h?b.lib(a,e,r,f):m?a[r?v:u](e,f,!1):a[l+e]=r?null:f,r||(s=1)}o[e]=s}},C={focus:2,blur:2,mouseenter:2,mouseleave:2};return b.special(C),b.lib=function(e,t,r,n){var i=C[t];1==i?$(e)[r?"off":"on"](t,n):$(e)[(r?"un":"")+"delegate"]("[mx-"+t+"]",t,n)},b}),define("magix/event",["magix/magix"],function(e){var t=function(e){return"~"+e},r=e.safeExec,n={fire:function(e,n,i,a){var o=t(e),s=this,c=s[o];if(c){n||(n={}),n.type||(n.type=e);for(var f,u,v=c.length,m=v-1;v--;)f=a?v:m-v,u=c[f],(u.d||u.r)&&(c.splice(f,1),m--),u.d||r(u.f,n,s)}i&&delete s[o]},on:function(e,r,n){var i=t(e),a=this[i]||(this[i]=[]),o={f:r};isNaN(n)?(o.r=n,a.push(o)):a.splice(0|n,0,o)},off:function(e,r){var n=t(e),i=this[n];if(i)if(r){for(var a,o=i.length-1;o>=0;o--)if(a=i[o],a.f==r&&!a.d){a.d=1;break}}else delete this[n]},once:function(e,r){this.on(e,r,t)}};return n}),define("magix/vframe",["magix/magix","magix/event","magix/view"],function(e,t,r){var n,i,a,o,s,c,f,u,v,m,h=document,d=h.body,l=65536,p=e.safeExec,g=[],x=e.mix,y=e.config(),w=e.has,$=d.contains,b="querySelectorAll",C="alter",M="created",E=function(e){return"object"==typeof e?e:h.getElementById(e)},P=function(e,t,r){return t=E(e),t&&(r=a?h[b]("#"+_(t)+o):t.getElementsByTagName(n)),r||g},_=function(e){return e.id||(e.id="magix_vf_"+l--)},T=function(e,t,r){if(e=E(e),t=E(t),e&&t)if(e!==t)try{r=$?t.contains(e):16&t.compareDocumentPosition(e)}catch(n){r=0}else r=1;return r},O=function(e){var t=this;t.id=e,t.cM={},t.cC=0,t.rC=0,t.sign=1<<30,t.rM={},t.owner=m};return O.root=function(e,t,r){if(!c){n=y.tagName,i=y["!tnc"],s=i?"mx-vframe":"mx-defer",a=i&&d[b],o=" "+n+"[mx-vframe]",u=t,v=r,m=e;var f=y.rootId,l=E(f);l||(l=h.createElement(n),l.id=f,d.appendChild(l),l=null),c=new O(f),e.add(c)}return c},x(x(O.prototype,t),{mountView:function(t,n){var i=this,a=E(i.id);if(i._a||(i._a=1,i._t=a.innerHTML),i.unmountView(),t){var o=e.pathToObject(t),s=o.pathname,c=--i.sign;e.use(s,function(e){if(c==i.sign){r.prepare(e);var t=new e({owner:i,id:i.id,$:E,path:s,vom:m,location:u});i.view=t;var f=function(){i.mountZoneVframes()};t.on("interact",function(e){e.tmpl||(a.innerHTML=i._t,f()),t.on("primed",function(){i.viewPrimed=1,i.fire("viewMounted")}),t.on("rendered",f),t.on("prerender",function(){i.unmountZoneVframes(0,1)||i.cAlter()})},0),n=n||{},t.load(x(n,o.params,n),v)}})}},unmountView:function(){var e=this,t=e.view;if(t){f||(f={}),e.unmountZoneVframes(0,1),e.cAlter(f),e.view=0,t.oust();var r=E(e.id);r&&e._a&&(r.innerHTML=e._t),e.viewInited=0,e.viewPrimed&&(e.viewPrimed=0,e.fire("viewUnmounted")),f=0}e.sign--},mountVframe:function(e,t,r){var n=this;n.fcc&&n.cAlter();var i=m.get(e);return i||(i=new O(e),i.pId=n.id,w(n.cM,e)||n.cC++,n.cM[e]=1,m.add(i)),i.mountView(t,r),i},mountZoneVframes:function(e,t){var r=this,n=e||r.id;r.unmountZoneVframes(n,1);var a=P(n),o=a.length,c={};if(o)for(var f,u,v,m,h=0;o>h;h++)if(f=a[h],u=_(f),!w(c,u)&&(v=f.getAttribute("mx-view"),m=!f.getAttribute(s),m=m!=i,m||v)){r.mountVframe(u,v,t);for(var d,l=P(f),p=0,g=l.length;g>p;p++)d=l[p],c[_(d)]=1}r.cCreated()},unmountVframe:function(e,t){var r=this;e=e||r.id;var n=m.get(e);if(n){var i=n.fcc;n.unmountView(),m.remove(e,i);var a=m.get(n.pId);a&&w(a.cM,e)&&(delete a.cM[e],a.cC--,t||a.cCreated())}},unmountZoneVframes:function(e,t){var r,n,i=this,a=i.cM;for(n in a)e?T(n,e)&&i.unmountVframe(n,r=1):i.unmountVframe(n,r=1);return t||i.cCreated(),r},cCreated:function(e){var t=this;if(t.cC==t.rC){var r=t.view;r&&!t.fcc&&(t.fcc=1,t.fca=0,r.fire(M,e),t.fire(M,e)),m.vfCreated();var n=t.id,i=m.get(t.pId);i&&!w(i.rM,n)&&(i.rM[n]=i.cM[n],i.rC++,i.cCreated(e))}},cAlter:function(e){var t=this;e||(e={});var r=t.fcc;if(t.fcc=0,!t.fca&&r){var n=t.view,i=t.id;n&&(t.fca=1,n.fire(C,e),t.fire(C,e));var a=m.get(t.pId);a&&w(a.rM,i)&&(a.rC--,delete a.rM[i],a.cAlter(e))}},locChged:function(){var t=this,r=t.view;if(t.viewInited&&r&&r.sign>0){var n=r.olChg(v),i={location:u,changed:v,prevent:function(){this.cs=g},to:function(t){t=t||g,e._s(t)&&(t=t.split(",")),this.cs=t}};n&&p(r.locationChange,i,r);for(var a,o=i.cs||e.keys(t.cM),s=0,c=o.length;c>s;s++)a=m.get(o[s]),a&&a.locChged()}}}),O}),define("magix/view",["magix/magix","magix/event","magix/body"],function(e,t,r){var n=e.safeExec,i=e.has,a=",",o=[],s=e.noop,c=e.mix,f="~",u=function(e){return function(){var t,r=this,n=r.notifyUpdate();return n&&(t=e.apply(r,arguments)),t}},v=e.cache(40),m="<",h=">",d=/\smx-(?!view|defer|owner|vframe)[a-z]+\s*=\s*"/g,l=String.fromCharCode(26),p={prevent:function(e){e=e||this.srcEvent,e.preventDefault()},stop:function(e){e=e||this.srcEvent,e.stopPropagation()},halt:function(e){this.prevent(e),this.stop(e)}},g=/(\w+)(?:<(\w+)>)?(?:\(?{([\s\S]*)}\)?)?/,x=/(\w+):([^,]+)/g,y=/([$\w]+)<([\w,]+)>/,w=function(e){var t=this;c(t,e),t.$ol={ks:[]},t.sign=1,n(w.ms,[e],t)};w.ms=[],w.prepare=function(e){if(!e[f]){e[f]=1;var t,r,n,i,o,c=e.prototype,v={};for(var d in c)if(t=c[d],r=d.match(y))for(n=r[1],i=r[2],i=i.split(a),o=i.length-1;o>-1;o--)r=i[o],v[r]=1,c[n+m+r+h]=t;else"render"==d&&t!=s&&(c[d]=u(t));i&&(c.$evts=v)}},w.mixin=function(e,t){t&&w.ms.push(t),c(w.prototype,e)},c(c(w.prototype,t),{render:s,locationChange:s,init:s,hasTmpl:!0,load:function(){var e=this,t=e.hasTmpl,r=arguments,i=e.sign,a=function(a){if(i>0&&i==e.sign){t&&(e.template=e.wrapMxEvent(a)),e.dEvts(),e.fire("interact",{tmpl:t},1),n(e.init,r,e),e.fire("inited",0,1),e.owner.viewInited=1,n(e.render,o,e);var s=!t&&!e.rendered;s&&(e.rendered=1,e.fire("primed",0,1))}};t?e.fetchTmpl(e.path,a):a()},beginUpdate:function(){var e=this;e.sign>0&&e.rendered&&(e.fire("refresh",0,1),e.fire("prerender"))},endUpdate:function(){var e=this;e.sign>0&&(e.rendered||(e.fire("primed",0,1),e.rendered=1),e.fire("rendered"))},notifyUpdate:function(){var e=this;return e.sign>0&&(e.sign++,e.fire("rendercall")),e.sign},wrapMxEvent:function(e){return(e+"").replace(d,"$&"+this.id+l)},wrapAsync:function(e){var t=this,r=t.sign;return function(){r==t.sign&&e&&e.apply(this,arguments)}},setViewHTML:function(e){var t,r=this;r.beginUpdate(),r.sign>0&&(t=r.$(r.id),t&&(t.innerHTML=e)),r.endUpdate()},observeLocation:function(t){var r,n=this;r=n.$ol,r.f=1;var i=r.ks;e._o(t)&&(r.pn=t.pathname,t=t.keys),t&&(r.ks=i.concat((t+"").split(a)))},olChg:function(e){var t=this,r=t.$ol,n=1;return r.f&&(n=0,r.pn&&(n=e.pathname),n||(n=e.isParam(r.ks))),n},oust:function(){var e=this;e.sign>0&&(e.sign=0,e.fire("refresh",0,1),e.fire("destroy",0,1,1),e.dEvts(1)),e.sign--},pEvt:function(e){var t=this;if(t.sign>0){var r=e.info,i=e.se,a=v.get(r);a||(a=r.match(g),a={n:a[1],f:a[2],i:a[3],p:{}},a.i&&a.i.replace(x,function(e,t,r){a.p[t]=r}),v.set(r,a));var o=a.n+m+e.st+h,s=t[o];if(s){var c=p[a.f];c&&c.call(p,i),n(s,{currentId:e.cId,targetId:e.tId,type:e.st,srcEvent:i,halt:p.halt,prevent:p.prevent,stop:p.stop,params:a.p},t)}}},dEvts:function(e){var t=this,n=t.$evts,i=t.vom;for(var a in n)r.act(a,e,i)}});var b={},C="?t="+Math.random(),M={},E={};return w.prototype.fetchTmpl=function(e,t){var r=this,a="template"in r;if(a)t(r.template);else if(i(M,e))t(M[e]);else{var o=e.indexOf("/"),s=e.substring(0,o);b[s]||(b[s]=require.s.contexts._.config.paths[s]);var c=b[s]+e.substring(o+1)+".html",f=E[c],u=function(r){t(M[e]=r)};f?f.push(u):(f=E[c]=[u],$.ajax({url:c+C,success:function(e){n(f,e),delete E[c]},error:function(e,t){n(f,t),delete E[c]}}))}},w.extend=function(t,r,i){var a=this,o=function(){o.superclass.constructor.apply(this,arguments),r&&n(r,arguments,this)};return o.extend=a.extend,e.extend(o,a,t,i)},w}),define("magix/vom",["magix/vframe","magix/magix","magix/event"],function(e,t,r){var n=t.has,i=t.mix,a=0,o=0,s=0,c=0,f={},u={},v={},m=t.mix({all:function(){return f},add:function(e){n(f,e.id)||(a++,f[e.id]=e,m.fire("add",{vframe:e}))},get:function(e){return f[e]},remove:function(e,t){var r=f[e];r&&(a--,t&&o--,delete f[e],m.fire("remove",{vframe:r}))},vfCreated:function(){if(!c){o++;var e=o/a;e>s&&m.fire("progress",{percent:s=e},c=1==e)}},locChged:function(t){var r,n=t.loc;if(n?r=1:n=t.location,i(u,n),!r){i(v,t.changed);var a=e.root(m,u,v);v.view?a.mountView(n.view):a.locChged()}}},r);return m}),define("mxext/mmanager",["magix/magix","magix/event"],function(e,t){var r=e.has,n=e.safeExec,i=e._a,a=e.mix,o="mr",s=String.fromCharCode(26),c=12e5,f=function(e,t,r){t=[];for(r in e)t.push(r,o,e[r]);return t},u=function(e,t,r){for(var n,i=[t.name],a={},o=e.length-1;o>-1;o--)n=e[o],a[n]?e.splice(o,1):i.push(a[n]=f(t[n]),f(r[n]));return i.join(s)},v=function(e){var t=e.cache;if(t){var r=0|e.cacheTime;t=r?r:t===!0?c:0|t}return t},m=Date.now||function(){return+new Date},h=m(),d=function(e){throw Error(e)},l=function(t,r){var a=this;a.$mClass=t,a.$mCache=e.cache(),a.$mCacheKeys={},a.$mMetas={},r=r?i(r)?r:[r]:[],a.$sKeys=["postParams","urlParams"].concat(r),a.id="mm"+h--,n(l.ms,arguments,a)},p=[].slice,g=function(e,t,r,n){return function(){return e.apply(t,[r,n].concat(p.call(arguments)))}},x=function(e,t){var r=t.b,i=t.a,a=i[r];if(a){var o=a.q;delete i[r],n(o,e,a.e)}},y=function(e,t,r){var i,a=this,o=t.a,s=t.c,c=t.d,f=t.g,u=t.i,v=t.j,h=t.k,d=t.l,l=t.m,p=t.n,g=t.o;t.b++,delete s[a.id];var x=a.$mm,y=x.key,w=x.meta;if(c[e]=a,r)t.e=1,i=1,t.f=r,f.msg=r,f[e]=r,v.fire("fail",{model:a,meta:w,msg:r});else{if(!y||y&&!u.has(y)){y&&u.set(y,a),x.done=m();var $=x.after;$&&n($,[a,w]),v.fire("done",{model:a,meta:w})}x.used>0&&(a.fromCache=1),x.used++}if(!o.$oust){if(h==b.ONE){var C=d?l[e]:l;C&&(p[e]=n(C,[i?f:null,a,f],o))}else if(h==b.ORDER){g[e]={m:a,e:i,s:r};for(var M,E,P=g.i||0;M=g[P];P++)E=d?l[P]:l,M.e&&(f.msg=M.s,f[P]=M.s),p[P]=n(E,[M.e?f:null,M.m,f].concat(p),o);g.i=P}t.b==t.h&&(t.e||(f=null),h==b.ALL?(c.unshift(f),p[0]=f,p[1]=n(l,c,o)):p.unshift(f),o.$ntId=setTimeout(function(){o.doNext(p)},30))}},w=function(e){return function(){var t=new C(this),r=arguments,n=r[r.length-1];return n&&n.manage&&(n.manage(t),r=p.call(r,0,-1)),t[e].apply(t,r)}},$=function(e,t){return function(r,n){var i=p.call(arguments,1);return this.send(r,i.length>1?i:n,e,t)}};a(l,{create:function(e,t){return new l(e,t)},mixin:function(e,t){t&&l.ms.push(t),a(l.prototype,e)},ms:[]});var b={ALL:1,ONE:2,ORDER:4},C=function(e){var t=this;t.$host=e,t.$reqs={},t.id=o+h--,t.$queue=[]};return a(C.prototype,{send:function(e,t,n,a){var o=this;if(o.$busy)return o.next(function(){this.send(e,t,n,a)}),o;o.$busy=1;var s=o.$host,c=s.$mCache,f=s.$mCacheKeys,u=o.$reqs;i(e)||(e=[e]);var v=e.length,m=[],h=i(t);h&&(m=Array(t.length));for(var l,p={a:o,b:0,c:o.$reqs,d:Array(v),g:{},h:v,i:c,j:s,k:n,l:h,m:t,n:m,o:[]},w=0;e.length>w;w++)if(l=e[w]){var $=s.getModel(l,a),b=$.cKey,C=$.entity,M=g(y,C,w,p);M.id=o.id,b&&r(f,b)?f[b].q.push(M):$.update?(u[C.id]=C,b&&(f[b]={q:[M],e:C},M=x),C.request(M,{a:f,b:b})):M()}else d("empty model");return o},fetchAll:function(e,t){return this.send(e,t,b.ALL)},saveAll:function(e,t){return this.send(e,t,b.ALL,1)},fetchOrder:$(b.ORDER),saveOrder:$(b.ORDER,1),saveOne:$(b.ONE,1),fetchOne:$(b.ONE),stop:function(){var e=this;clearTimeout(e.$ntId);var t=e.$host,i=e.$reqs,a=t.$mCacheKeys;for(var o in i){var s=i[o],c=s.$mm.key;if(c&&r(a,c)){for(var f,u=a[c],v=u.q,m=[],h=[],d=0;v.length>d;d++)f=v[d],f.id!=e.id?m.push(f):h.push(f);m.length?(n(h,"abort",u.e),u.q=m):s.abort()}else s.abort()}e.$reqs={},e.$queue=[],e.$busy=0},next:function(e){var t=this;if(t.$queue.push(e),!t.$busy){var r=t.$latest;t.doNext(r)}return t},doNext:function(e){var t=this;t.$busy=0;var r=t.$queue;if(r){var i=r.shift();i&&n(i,e,t)}t.$latest=e},destroy:function(){var e=this;e.$oust=1,e.stop()}}),a(a(l.prototype,t),{registerModels:function(e){var t=this,r=t.$mMetas;i(e)||(e=[e]);for(var n,a,o=0;e.length>o;o++)n=e[o],n&&(a=n.name,a?r[a]&&d("already exist:"+a):d("miss name"),n.cache=v(n),r[a]=n)},registerMethods:function(e){a(this,e)},createModel:function(e){var t,r=this,i=r.getModelMeta(e),a=v(e)||i.cache,o=new r.$mClass;o.set(i),o.$mm=t={used:0};var s=e.before||i.before;s&&n(s,[o,i]);var c=e.after||i.after;return t.after=c,a&&(t.key=u(r.$sKeys,i,e)),t.meta=i,e.name&&o.set(e),o.setUrlParams(i.urlParams),o.setPostParams(i.postParams),o.setUrlParams(e.urlParams),o.setPostParams(e.postParams),r.fire("inited",{model:o,meta:i}),o},getModelMeta:function(e){var t=this,r=t.$mMetas,n=e.name||e,i=r[n];return i||d("Unfound:"+n),i},getModel:function(e,t){var r,n,i=this;return t||(r=i.getCachedModel(e)),r||(n=1,r=i.createModel(e)),{entity:r,cKey:r.$mm.key,update:n}},saveAll:w("saveAll"),fetchAll:w("fetchAll"),saveOrder:w("saveOrder"),fetchOrder:w("fetchOrder"),saveOne:w("saveOne"),fetchOne:w("fetchOne"),createMRequest:function(e){var t=new C(this);return e&&e.manage&&e.manage(t),t},clearCacheByKey:function(e){var t=this,r=t.$mCache;r.del(e)},clearCacheByName:function(e){for(var t=this,r=t.$mCache,n=r.list(),i=0;n.length>i;i++){var a=n[i],o=a.v,s=o&&o.$mm;if(s){var c=s.meta.name;c==e&&r.del(s.key)}}},getCachedModel:function(e){var t,r=this,n=r.$mCache,i=null,a=r.getModelMeta(e),o=v(e)||a.cache;if(o&&(t=u(r.$sKeys,a,e)),t){var s=r.$mCacheKeys,c=s[t];c?i=c.e:(i=n.get(t),i&&o>0&&m()-i.$mm.done>o&&(r.clearCacheByKey(t),i=0))}return i}}),l}),define("mxext/model",["magix/magix"],function(e){var t=function(t,r){var n=this,i=function(){i.superclass.constructor.apply(this,arguments),r&&e.safeExec(r,arguments,this)};return e.mix(i,n,{prototype:!0}),e.extend(i,n,t)},r=+new Date,n=encodeURIComponent,i=e.has,a=e._o,o=e.toString,s=function(e){this.set(e),this.id="m"+r--};return e.mix(s,{GET:"GET",POST:"POST",extend:t}),e.mix(s.prototype,{sync:e.noop,getPostParams:function(){return this.getParams(s.POST)},getUrlParams:function(){return this.getParams(s.GET)},getParams:function(t){var r=this;t||(t=s.GET);var i,a="$"+t,o=r[a],c=[];for(var f in o){i=o[f],e._a(i)||(i=[i]);for(var u=0;i.length>u;u++)c.push(f+"="+n(i[u]))}return c.join("&")},setUrlParamsIf:function(e,t){this.setParams(e,t,s.GET,!0)},setPostParamsIf:function(e,t){var r=this;r.setParams(e,t,s.POST,!0)},setParams:function(e,t,r,n){var o=this,s="$"+r;o[s]||(o[s]={});var c=o[s];if(!a(e)&&e){var f={};f[e]=t,e=f}for(var u in e)n&&i(c,u)||(c[u]=e[u])},setPostParams:function(e,t){var r=this;r.setParams(e,t,s.POST)},setUrlParams:function(e,t){this.setParams(e,t,s.GET)},get:function(e,t,r){var n=this,i=arguments.length,a=2==i,s=n.$attrs;if(i){for(var c=(e+"").split(".");s&&c[0];)s=s[c.shift()];c[0]&&(s=r)}return a&&o.call(t)!=o.call(s)&&(s=t),s},set:function(e,t){var r=this;if(r.$attrs||(r.$attrs={}),a(e))for(var n in e)r.$attrs[n]=e[n];else e&&(r.$attrs[e]=t)},request:function(e,t){var r=this;r.$abt=0;var n=function(n,i){r.$abt||(a(i)||(i={data:i}),r.set(i),e(n,t))};r.$trans=r.sync(r.$temp=n)},abort:function(){var e=this,t=e.$trans,r=e.$temp;r&&r("abort"),e.$abt=1,t&&t.abort&&t.abort(),e.$trans=0},isAborted:function(){return this.$abt}}),s}),define("mxext/view",["magix/magix","magix/view","magix/router"],function(e,t,r){var n=window,i=0,a=e.safeExec,o=e.has,s=[],c="rendercall",f="destroy",u=function(e){n.clearTimeout(e),n.clearInterval(e)},v=function(e){var t=e&&e[f];t&&a(t,s,e)},m=function(e){var t=this,r=t.$res,n=e.type==c,i=e.type!=f;for(var a in r){var o=r[a];(!n||o.mr)&&t.destroyManaged(a,i)}},h=t.extend({navigate:r.navigate,manage:function(t,r,n){var a=this,o=arguments,s=1,c=a.$res;1==o.length?(r=t,t="res_"+i++,s=0):a.destroyManaged(t);var f;f=e._n(r)?u:v;var m={hk:s,res:r,ol:n,mr:r&&r.$reqs,oust:f};return c[t]=m,r},getManaged:function(e,t){var r=this,n=r.$res,i=null;if(o(n,e)){var a=n[e];i=a.res,t&&delete n[e]}return i},removeManaged:function(e){return this.getManaged(e,1)},destroyManaged:function(e,t){var r,n=this,i=n.$res,a=i[e];return!a||t&&a.ol||(r=a.res,a.oust(r),a.hk&&t||delete i[e]),r}},function(){var e=this;e.$res={},e.on("interact",function(){e.on(c,m),e.on("prerender",m),e.on(f,m)}),a(h.ms,arguments,e)},{ms:[],mixin:function(t,r){r&&h.ms.push(r),e.mix(h.prototype,t)}});return h}),document.createElement("vframe");