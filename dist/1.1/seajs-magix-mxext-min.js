!function(a,b,c,d,e,f){f=0,e=function(a){return a.id||(a.id="mx_n_"+ ++f)},d("magix/magix",function(){var c=/\/\.\/|\/[^\/.]+?\/\.{2}\/|([^:\/])\/\/+|\.{2}\//,d=/\/[^\/]*$/,e=/[#?].*$/,f="",g=/([^=&?\/#]+)=?([^&=#?]*)/g,h="pathname",i=/^https?:\/\//i,j=0,k="/",l="vframe",m="\n",n=b.console,o=n&&n.error,p=function(){},q={tagName:l,rootId:"magix_vf_root",progress:p,coded:1,execError:function(a){o&&n.error(a)}},r=q.hasOwnProperty,s=function(a,b){return a&&r.call(a,b)},t=function(b){return function(c,d,e){switch(arguments.length){case 0:e=b;break;case 1:e=A._o(c)?w(b,c):s(b,c)?b[c]:a;break;case 2:d===a?(delete b[c],e=d):b[c]=e=d}return e}},u=function(a,b){return b.f-a.f||b.t-a.t},v=function(a,b){var c=this;return c instanceof v?(c.c=[],c.x=a||20,c.b=c.x+(0|b||5)):c=new v(a,b),c},w=function(a,b,c){for(var d in b)c&&s(c,d)||(a[d]=b[d]);return a};w(v.prototype,{get:function(a){var b,c=this,d=c.c;return a=h+a,s(d,a)&&(b=d[a],b.f>=1&&(b.f++,b.t=j++,b=b.v)),b},list:function(){return this.c},set:function(a,b,c){var d=this,e=d.c,f=h+a,g=e[f];if(!s(e,f)){if(e.length>=d.b){e.sort(u);for(var i=d.b-d.x;i--;)g=e.pop(),delete e[g.k],g.m&&z(g.m,g.o,g)}g={},e.push(g),e[f]=g}return g.o=a,g.k=f,g.v=b,g.f=1,g.t=j++,g.m=c,b},del:function(a){a=h+a;var b=this.c,c=b[a];c&&(c.f=-1e5,c.v=f,delete b[a],c.m&&(z(c.m,c.o,c),c.m=f))},has:function(a){return a=h+a,s(this.c,a)}});var x=v(60),y=v(),z=function(a,b,c,d,e,f){for(A._a(a)||(a=[a]),b&&(A._a(b)||b.callee)||(b=[b]),d=0;d<a.length;d++)try{f=a[d],e=f&&f.apply(c,b)}catch(g){q.execError(g)}return e},A={mix:w,has:s,safeExec:z,noop:p,config:t(q),start:function(a){var b=this;w(q,a),b.use(["magix/router","magix/vom",a.iniFile],function(c,d,e){q=w(q,e,a),q["!tnc"]=q.tagName!=l,c.on("!ul",d.locChged),c.on("changed",d.locChged),d.on("progress",q.progress),b.use(q.extensions,c.start)})},keys:Object.keys||function(a){var b=[];for(var c in a)s(a,c)&&b.push(c);return b},local:t({}),path:function(a,b){var g=a+m+b,h=y.get(g);if(!h){if(i.test(b))h=b;else if(a=a.replace(e,f).replace(d,f)+k,b.charAt(0)==k){var j=i.test(a)?8:0,l=a.indexOf(k,j);h=a.substring(0,l)+b}else h=a+b;for(;c.test(h);)h=h.replace(c,"$1/");y.set(g,h)}return h},pathToObject:function(a,b){var c=a+m+b,d=x.get(c);if(!d){d={};var j={},l=f;e.test(a)?l=a.replace(e,f):~a.indexOf("=")||(l=a);var n=a.replace(l,f);if(l&&i.test(l)){var o=l.indexOf(k,8);l=~o?l.substring(o):k}n.replace(g,function(a,c,d){if(b)try{d=decodeURIComponent(d)}catch(e){}j[c]=d}),d[h]=l,d.params=j,x.set(c,d)}return d},objectToPath:function(a,b,c){var d,e=a[h],f=[],g=a.params;for(var i in g)d=g[i],(!c||d||s(c,i))&&(b&&(d=encodeURIComponent(d)),f.push(i+"="+d));return f.length&&(e=e+"?"+f.join("&")),e},listToMap:function(a,b){var c,d,e,f={};if(A._s(a)&&(a=a.split(",")),a&&(e=a.length))for(c=0;e>c;c++)d=a[c],f[b?d[b]:d]=b?d:1;return f},cache:v},B=Object.prototype.toString;return w(A,{use:function(a,b){a?seajs.use(a,b):b&&b()},_a:$.isArray,_f:$.isFunction,_o:function(a){return"[object Object]"==B.call(a)},_s:function(a){return"[object String]"==B.call(a)},_n:function(a){return"[object Number]"==B.call(a)},extend:function(a,b,c,d){a.superclass=b.prototype,b.prototype.constructor=b;var e=function(){};return e.prototype=b.prototype,a.prototype=new e,A.mix(a.prototype,c),A.mix(a,d),a.prototype.constructor=a,a}})}),d("magix/router",["magix/magix","magix/event"],function(a){var c,d,e,f,g,h,i=a("magix/magix"),j=a("magix/event"),k="",l="pathname",m="view",n=i.has,o=i.mix,p=i.keys,q=i.config(),r=i.cache(),s=i.cache(40),t={params:{},href:k},u=/#.*$/,v=/^[^#]*#?!?/,w="params",x=function(a,b,c){if(a){c=this[w],a=(a+k).split(",");for(var d=0;d<a.length&&!(b=n(c,a[d]));d++);}return b},y=function(){return this[l]},z=function(){return this[m]},A=function(a,b,c,d){return c=this,d=c[w],arguments.length>1?d[a]=b:d[a]},B=function(a){var c=i.pathToObject(a,f),d=c[l];return d&&h&&(c[l]=i.path(b.location[l],d)),c},C=o({viewInfo:function(a,b){var c,e;if(!d){d={rs:q.routes||{},nf:q.notFoundView};var f=q.defaultView;d.dv=f;var g=q.defaultPathname||k;c=d.rs,d.f=i._f(c),d.f||c[g]||!f||(c[g]=f),d[l]=g}return a||(a=d[l]),c=d.rs,e=d.f?c.call(q,a,b):c[a],{view:e||d.nf||d.dv,pathname:a}},start:function(){var a=b.history;e=q.nativeHistory,f=q.coded,g=e&&a.pushState,h=e&&!g,g?C.useState():C.useHash(),C.route()},parseQH:function(a,c){a=a||b.location.href;var d=r.get(a);if(!d){var f=a.replace(u,k),g=a.replace(v,k),h=B(f),i=B(g),j={};o(j,h[w]),o(j,i[w]),d={get:A,set:A,href:a,refHref:t.href,srcQuery:f,srcHash:g,query:h,hash:i,params:j},r.set(a,d)}if(c&&!d[m]){var n;n=d.hash[l]||e&&d.query[l];var p=C.viewInfo(n,d);o(d,p)}return d},getChged:function(a,b){var c=a.href,d=b.href,e=c+"\n"+d,f=s.get(e);if(!f){var g,h,i;f={},f[m]=i,f[l]=i,f[w]={};var j,k,n=[l,m];for(j=1;j>=0;j--)k=n[j],h=a[k],i=b[k],h!=i&&(f[k]={from:h,to:i},g=1);var o=a[w],q=b[w];for(n=p(o).concat(p(q)),j=n.length-1;j>=0;j--)k=n[j],h=o[k],i=q[k],h!=i&&(f[w][k]={from:h,to:i},g=1);f.occur=g,f.isParam=x,f.isPathname=y,f.isView=z,s.set(e,f)}return f},route:function(){var a=C.parseQH(0,1),b=!t.get,d=C.getChged(t,a);t=a,d.occur&&(c=a,C.fire("changed",{location:a,changed:d,force:b}))},navigate:function(a,b,d){if(!b&&i._o(a)&&(b=a,a=k),b&&(a=i.objectToPath({params:b,pathname:a},f)),a){var e=B(a),j={};if(j[w]=o({},e[w]),j[l]=e[l],j[l]){if(h){var m=c.query[w];for(var p in m)n(m,p)&&!n(j[w],p)&&(j[w][p]=k)}}else{var q=o({},c[w]);j[w]=o(q,j[w]),j[l]=c[l]}var r,s=i.objectToPath(j,f,c.query[w]);r=s!=c[g?"srcQuery":"srcHash"],r&&(g?(C.poped=1,history[d?"replaceState":"pushState"](k,k,s),C.route()):(o(j,c,j),j.srcHash=s,j.hash={params:j[w],pathname:j[l]},C.fire("!ul",{loc:c=j}),s="#!"+s,d?location.replace(s):location.hash=s))}}},j);return C.useState=function(){var a=C,b=location.href;$(WIN).on("popstate",function(){var c=location.href==b;(a.poped||!c)&&(a.poped=1,a.route())})},C.useHash=function(){$(WIN).on("hashchange",C.route)},C}),d("magix/body",["magix/magix"],function(d){var f,g=d("magix/magix"),h=g.has,i=g.mix,j={},k={},l=String.fromCharCode(26),m="mx-ei",n="mx-owner",o="addEventListener",p="removeEventListener",q=c.body,r=q[o],s="parentNode",t={},u="on",v=",",w=function(a,b,c){return c?a.setAttribute(b,c):c=a.getAttribute(b),c},x=function(){this.returnValue=!1},y=function(){this.cancelBubble=!0},z={special:function(a){i(j,a)},process:function(c){if(c=c||b.event,c&&!c[u]){var d=c.target||c.srcElement||q;for(c[u]=1;d&&1!=d.nodeType;)d=d[s];for(var g,i,j=d,k=c.type,o=t[k]||(t[k]=new RegExp(v+k+"(?:,|$)")),p="mx-"+k,z=[];j&&1==j.nodeType&&(g=w(j,p),i=w(j,m),!g&&!o.test(i));)z.push(j),j=j[s];if(g){var A,B=g.split(l);if(B.length>1&&(A=B[0],g=B.pop()),A=A||w(j,n),!A)for(var C=j,D=f.all();C;){if(h(D,C.id)){w(j,n,A=C.id);break}C=C[s]}if(!A)throw Error("bad:"+g);var E=f.get(A),F=E&&E.view;F&&(r||(c.preventDefault=x,c.stopPropagation=y),F.pEvt({info:g,se:c,st:k,tId:e(d),cId:e(j)}))}else{for(var G;z.length;)G=z.shift(),i=w(G,m)||u,o.test(i)||(i=i+v+k,w(G,m,i));G=a}j=d=a}},act:function(b,c,d){var e=k[b]||0,g=e>0?1:0,h=z.process;if(e+=c?-g:g,!e){d&&(f=d);var i=j[b];i?z.lib(q,b,c,h):r?q[c?p:o](b,h,!1):q[u+b]=c?a:h,c||(e=1)}k[b]=e}},A={focus:2,blur:2,mouseenter:2,mouseleave:2};return z.special(A),z.lib=function(a,b,c,d){var e=A[b];1==e?$(a)[c?"off":"on"](b,d):$(a)[(c?"un":"")+"delegate"]("[mx-"+b+"]",b,d)},z}),d("magix/event",["magix/magix"],function(a){var b=a("magix/magix"),c=function(a){return"~"+a},d=b.safeExec,e={fire:function(a,b,e,f){var g=c(a),h=this,i=h[g];if(i){b||(b={}),b.type||(b.type=a);for(var j,k,l=i.length,m=l-1;l--;)j=f?l:m-l,k=i[j],(k.d||k.r)&&(i.splice(j,1),m--),k.d||d(k.f,b,h);e=e||0>m}e&&delete h[g]},on:function(a,b,d){var e=c(a),f=this[e]||(this[e]=[]),g={f:b};isNaN(d)?(g.r=d,f.push(g)):f.splice(0|d,0,g)},off:function(a,b){var d=c(a),e=this[d];if(e)if(b){for(var f,g=e.length-1;g>=0;g--)if(f=e[g],f.f==b&&!f.d){f.d=1;break}}else delete this[d]},once:function(a,b){this.on(a,b,c)}};return b.mix(b.local,e),e}),d("magix/vframe",["magix/magix","magix/event","magix/view"],function(b){var d,f,g,h,i,j,k,l,m,n,o,p=b("magix/magix"),q=b("magix/event"),r=b("magix/view"),s=p.safeExec,t=[],u=p.mix,v=p.config(),w=p.has,x="querySelectorAll",y="alter",z="created",A=function(a){return"object"==typeof a?a:c.getElementById(a)},B=function(a,b,f){return b=A(a),b&&(f=g?c[x]("#"+e(b)+h):b.getElementsByTagName(d)),f||t},C=function(a,b,c){if(a=A(a),b=A(b),a&&b)if(a!==b)try{c=j?b.contains(a):16&b.compareDocumentPosition(a)}catch(d){c=0}else c=1;return c},D=function(a){var b=this;b.id=a,b.cM={},b.cC=0,b.rC=0,b.sign=1<<30,b.rM={},b.owner=o,o.add(a,b)};return D.root=function(b,e,l){if(!k){d=v.tagName,f=v["!tnc"],i=f?"mx-vframe":"mx-defer",g=f&&c[x],h=" "+d+"[mx-vframe]";var p=c.body;j=p.contains,m=e,n=l,o=b;var q=v.rootId,r=A(q);r||(r=c.createElement(d),r.id=q,p.appendChild(r),r=a),k=new D(q)}return k},u(u(D.prototype,q),{mountView:function(a,b){var c=this,d=A(c.id);if(c._a||(c._a=1,c._t=d.innerHTML),c.unmountView(),a){var e=p.pathToObject(a),f=e.pathname,g=--c.sign;p.use(f,function(a){if(g==c.sign){r.prepare(a);var h=new a({owner:c,id:c.id,$:A,path:f,vom:o,location:m});c.view=h;var i=function(){c.mountZoneVframes()};h.on("interact",function(a){a.tmpl||(d.innerHTML=c._t,i()),h.on("primed",function(){c.viewPrimed=1,c.fire("viewMounted")}),h.on("rendered",i),h.on("prerender",function(){c.unmountZoneVframes(0,1)||c.cAlter()})},0),b=b||{},h.load(u(b,e.params,b),n)}})}},unmountView:function(){var a=this,b=a.view;if(b){l||(l={}),a.unmountZoneVframes(0,1),a.cAlter(l),a.view=0,b.oust();var c=A(a.id);c&&a._a&&(c.innerHTML=a._t),a.viewInited=0,a.viewPrimed&&(a.viewPrimed=0,a.fire("viewUnmounted")),l=0}a.sign--},mountVframe:function(a,b,c){var d=this;d.fcc&&d.cAlter();var e=o.get(a);return e||(e=new D(a),e.pId=d.id,w(d.cM,a)||d.cC++,d.cM[a]=1),e.mountView(b,c),e},mountZoneVframes:function(a,b){var c=this,d=a||c.id;c.unmountZoneVframes(d,1);var g=B(d),h=g.length,j={};if(h)for(var k,l,m,n,o=0;h>o;o++)if(k=g[o],l=e(k),!w(j,l)&&(m=k.getAttribute("mx-view"),n=!k.getAttribute(i),n=n!=f,n||m)){c.mountVframe(l,m,b);for(var p,q=B(k),r=0,s=q.length;s>r;r++)p=q[r],j[e(p)]=1}c.cCreated()},unmountVframe:function(a,b){var c=this;a=a||c.id;var d=o.get(a);if(d){var e=d.fcc;d.unmountView(),o.remove(a,e);var f=o.get(d.pId);f&&w(f.cM,a)&&(delete f.cM[a],f.cC--,b||f.cCreated())}},unmountZoneVframes:function(a,b){var c,d,e=this,f=e.cM;for(d in f)(!a||C(d,a))&&e.unmountVframe(d,c=1);return b||e.cCreated(),c},cCreated:function(a){var b=this;if(b.cC==b.rC){var c=b.view;c&&!b.fcc&&(b.fcc=1,b.fca=0,c.fire(z,a),b.fire(z,a)),o.vfCreated();var d=b.id,e=o.get(b.pId);e&&!w(e.rM,d)&&(e.rM[d]=e.cM[d],e.rC++,e.cCreated(a))}},cAlter:function(a){var b=this;a||(a={});var c=b.fcc;if(b.fcc=0,!b.fca&&c){var d=b.view,e=b.id;d&&(b.fca=1,d.fire(y,a),b.fire(y,a));var f=o.get(b.pId);f&&w(f.rM,e)&&(f.rC--,delete f.rM[e],f.cAlter(a))}},locChged:function(){var a=this,b=a.view;if(a.viewInited&&b&&b.sign>0){var c=b.olChg(n),d={location:m,changed:n,prevent:function(){this.cs=t},to:function(a){a=a||t,p._s(a)&&(a=a.split(",")),this.cs=a}};c&&s(b.locationChange,d,b);for(var e,f=d.cs||p.keys(a.cM),g=0,h=f.length;h>g;g++)e=o.get(f[g]),e&&e.locChged()}}}),D}),d("magix/view",function(a){var b=a("magix/magix"),c=a("magix/event"),d=a("magix/body"),e=b.safeExec,f=b.has,g=",",h=[],i=b.noop,j=b.mix,k="~",l=function(a){return function(){var b=this,c=b.notifyUpdate();c>0&&a.apply(b,arguments)}},m=b.cache(40),n="<",o=">",p=/\smx-(?!view|defer|owner|vframe)[a-z]+\s*=\s*"/g,q=String.fromCharCode(26),r={prevent:function(a){a=a||this.srcEvent,a.preventDefault()},stop:function(a){a=a||this.srcEvent,a.stopPropagation()},halt:function(a){this.prevent(a),this.stop(a)}},s=/(\w+)(?:<(\w+)>)?(?:\(?{([\s\S]*)}\)?)?/,t=/(\w+):([^,]+)/g,u=/([$\w]+)<([\w,]+)>/,v=function(a){var b=this;j(b,a),b.$ol={ks:[]},b.sign=1,e(v.ms,[a],b)},w=v.prototype;v.ms=[],v.prepare=function(a){if(!a[k]){a[k]=1;var b,c,d,e,f,h=a.prototype,j={};for(var m in h)if(b=h[m],c=m.match(u))for(d=c[1],e=c[2],e=e.split(g),f=e.length-1;f>-1;f--)c=e[f],j[c]=1,h[d+n+c+o]=b;else"render"==m&&b!=i&&(h[m]=l(b));e&&(h.$evts=j)}},v.mixin=function(a,b){b&&v.ms.push(b),j(w,a)},j(j(w,c),{render:i,locationChange:i,init:i,hasTmpl:!0,load:function(){var a=this,b=a.hasTmpl,c=arguments,d=function(d){b&&(a.template=a.wrapMxEvent(d)),a.dEvts(),a.fire("interact",{tmpl:b},1),e(a.init,c,a),a.fire("inited",0,1),a.owner.viewInited=1,e(a.render,h,a);var f=!b&&!a.rendered;f&&(a.rendered=1,a.fire("primed",0,1))};b?a.fetchTmpl(a.path,a.wrapAsync(d)):d()},beginUpdate:function(){var a=this;a.sign>0&&a.rendered&&a.fire("prerender")},endUpdate:function(){var a=this;a.sign>0&&(a.rendered||(a.fire("primed",0,1),a.rendered=1),a.fire("rendered"))},notifyUpdate:function(){var a=this;return a.sign>0&&(a.sign++,a.fire("rendercall")),a.sign},wrapMxEvent:function(a){return(a+"").replace(p,"$&"+this.id+q)},wrapAsync:function(a){var b=this,c=b.sign;return function(){c>0&&c==b.sign&&a&&a.apply(this,arguments)}},setViewHTML:function(a){var b,c=this;c.beginUpdate(),c.sign>0&&(b=c.$(c.id),b&&(b.innerHTML=a)),c.endUpdate()},observeLocation:function(a){var c,d=this;c=d.$ol,c.f=1;var e=c.ks;b._o(a)&&(c.pn=a.pathname,a=a.keys),a&&(c.ks=e.concat((a+"").split(g)))},olChg:function(a){var b=this,c=b.$ol,d=1;return c.f&&(d=0,c.pn&&(d=a.pathname),d||(d=a.isParam(c.ks))),d},oust:function(){var a=this;a.sign>0&&(a.sign=0,a.fire("destroy",0,1,1),a.dEvts(1)),a.sign--},pEvt:function(a){var b=this;if(b.sign>0){var c=a.info,d=a.se,f=m.get(c);f||(f=c.match(s),f={n:f[1],f:f[2],i:f[3],p:{}},f.i&&f.i.replace(t,function(a,b,c){f.p[b]=c}),m.set(c,f));var g=f.n+n+a.st+o,h=b[g];if(h){var i=r[f.f];i&&i.call(r,d),e(h,{currentId:a.cId,targetId:a.tId,type:a.st,srcEvent:d,halt:r.halt,prevent:r.prevent,stop:r.stop,params:f.p},b)}}},dEvts:function(a){var b=this,c=b.$evts,e=b.vom;for(var f in c)d.act(f,a,e)}});var x={},y="?t="+Math.random(),z={},A={};return v.prototype.fetchTmpl=function(a,b){var c=this,d="template"in c;if(d)b(c.template);else if(f(z,a))b(z[a]);else{var g=a.indexOf("/"),h=a.substring(0,g);x[h]||(x[h]=seajs.data.paths[h]);var i=x[h]+a.substring(g+1)+".html",j=A[i],k=function(c){b(z[a]=c)};j?j.push(k):(j=A[i]=[k],$.ajax({url:i+y,success:function(a){e(j,a),delete A[i]},error:function(a,b){e(j,b),delete A[i]}}))}},v.extend=function(a,c,d){var f=this,g=function(){g.superclass.constructor.apply(this,arguments),c&&e(c,arguments,this)};return g.extend=f.extend,b.extend(g,f,a,d)},v}),d("magix/vom",["magix/vframe","magix/magix","magix/event"],function(a){var b=a("magix/vframe"),c=a("magix/magix"),d=a("magix/event"),e=c.has,f=c.mix,g=0,h=0,i=0,j=0,k={},l={},m={},n=c.mix({all:function(){return k},add:function(a,b){e(k,a)||(g++,k[a]=b,n.fire("add",{vframe:b}))},get:function(a){return k[a]},remove:function(a,b){var c=k[a];c&&(g--,b&&h--,delete k[a],n.fire("remove",{vframe:c}))},vfCreated:function(){if(!j){h++;var a=h/g;a>i&&n.fire("progress",{percent:i=a},j=1==a)}},locChged:function(a){var c,d=a.loc;if(d?c=1:d=a.location,f(l,d),!c){f(m,a.changed);var e=b.root(n,l,m);m.view?e.mountView(d.view):e.locChged()}}},d);return n}),d("mxext/mmanager",["magix/magix","magix/event"],function(b){var c=b("magix/magix"),d=b("magix/event"),e=c.has,f=c.safeExec,g=c._a,h=c.mix,i="mr",j=String.fromCharCode(26),k=12e5,l=function(a,b,c){b=[];for(c in a)b.push(c,i,a[c]);return b},m=function(a,b,c){for(var d,e=[b.name],f={},g=a.length-1;g>-1;g--)d=a[g],f[d]?a.splice(g,1):e.push(f[d]=l(b[d]),l(c[d]));return e.join(j)},n=function(a){var b=a.cache;if(b){var c=0|a.cacheTime;b=c?c:b===!0?k:0|b}return b},o=Date.now||function(){return+new Date},p=o(),q=function(a){throw Error(a)},r=function(a,b){var d=this;d.$mClass=a,d.$mCache=c.cache(),d.$mCacheKeys={},d.$mMetas={},b=b?g(b)?b:[b]:[],d.$sKeys=["postParams","urlParams"].concat(b),d.id="mm"+p--,f(r.ms,arguments,d)},s=[].slice,t=function(a,b,c,d){return function(){return a.apply(b,[c,d].concat(s.call(arguments)))}},u=function(a,b){var c=b.b,d=b.a,e=d[c];if(e){var g=e.q;delete d[c],f(g,a,e.e)}},v=function(b,c,d){var e,g=this,h=c.a,i=c.c,j=c.d,k=c.g,l=c.i,m=c.j,n=c.k,p=c.l,q=c.m,r=c.n,s=c.o;c.b++,delete i[g.id];var t=g.$mm,u=t.key,v=t.meta;if(j[b]=g,d)c.e=1,e=1,c.f=d,k.msg=d,k[b]=d,m.fire("fail",{model:g,meta:v,msg:d});else{if(!u||u&&!l.has(u)){u&&l.set(u,g),t.done=o();var w=t.after;w&&f(w,[g,v]),m.fire("done",{model:g,meta:v})}t.used>0&&(g.fromCache=1),t.used++}if(!h.$oust){if(n==y.ONE){var x=p?q[b]:q;x&&(r[b]=f(x,[e?k:a,g,k],h))}else if(n==y.ORDER){s[b]={m:g,e:e,s:d};for(var z,A,B=s.i||0;z=s[B];B++)A=p?q[B]:q,z.e&&(k.msg=z.s,k[B]=z.s),r[B]=f(A,[z.e?k:a,z.m,k].concat(r),h);s.i=B}c.b==c.h&&(c.e||(k=a),n==y.ALL?(j.unshift(k),r[0]=k,r[1]=f(q,j,h)):r.unshift(k),h.$ntId=setTimeout(function(){h.doNext(r)},30))}},w=function(a){return function(){var b=new z(this),c=arguments,d=c[c.length-1];return d&&d.manage&&(d.manage(b),c=s.call(c,0,-1)),b[a].apply(b,c)}},x=function(a,b){return function(c,d){var e=s.call(arguments,1);return this.send(c,e.length>1?e:d,a,b)}};h(r,{create:function(a,b){return new r(a,b)},mixin:function(a,b){b&&r.ms.push(b),h(r.prototype,a)},ms:[]});var y={ALL:1,ONE:2,ORDER:4},z=function(a){var b=this;b.$host=a,b.$reqs={},b.id=i+p--,b.$queue=[]};return h(z.prototype,{send:function(a,b,c,d){var f=this;if(f.$busy)return f.next(function(){this.send(a,b,c,d)}),f;f.$busy=1;var h=f.$host,i=h.$mCache,j=h.$mCacheKeys,k=f.$reqs;g(a)||(a=[a]);var l=a.length,m=[],n=g(b);n&&(m=new Array(b.length));for(var o,p={a:f,b:0,c:f.$reqs,d:new Array(l),g:{},h:l,i:i,j:h,k:c,l:n,m:b,n:m,o:[]},r=0;r<a.length;r++)if(o=a[r]){var s=h.getModel(o,d),w=s.cKey,x=s.entity,y=t(v,x,r,p);y.id=f.id,w&&e(j,w)?j[w].q.push(y):s.update?(k[x.id]=x,w&&(j[w]={q:[y],e:x},y=u),x.request(y,{a:j,b:w})):y()}else q("empty model");return f},fetchAll:function(a,b){return this.send(a,b,y.ALL)},saveAll:function(a,b){return this.send(a,b,y.ALL,1)},fetchOrder:x(y.ORDER),saveOrder:x(y.ORDER,1),saveOne:x(y.ONE,1),fetchOne:x(y.ONE),stop:function(){var a=this;clearTimeout(a.$ntId);var b=a.$host,c=a.$reqs,d=b.$mCacheKeys;for(var g in c){var h=c[g],i=h.$mm.key;if(i&&e(d,i)){for(var j,k=d[i],l=k.q,m=[],n=[],o=0;o<l.length;o++)j=l[o],j.id!=a.id?m.push(j):n.push(j);m.length?(f(n,"abort",k.e),k.q=m):h.abort()}else h.abort()}a.$reqs={},a.$queue=[],a.$busy=0},next:function(a){var b=this;if(b.$queue.push(a),!b.$busy){var c=b.$latest;b.doNext(c)}return b},doNext:function(a){var b=this;b.$busy=0;var c=b.$queue;if(c){var d=c.shift();d&&f(d,a,b)}b.$latest=a},destroy:function(){var a=this;a.$oust=1,a.stop()}}),h(h(r.prototype,d),{registerModels:function(a){var b=this,c=b.$mMetas;g(a)||(a=[a]);for(var d,e,f=0;f<a.length;f++)d=a[f],d&&(e=d.name,e?c[e]&&q("already exist:"+e):q("miss name"),d.cache=n(d),c[e]=d)},registerMethods:function(a){h(this,a)},createModel:function(a){var b,c=this,d=c.getModelMeta(a),e=n(a)||d.cache,g=new c.$mClass;g.set(d),g.$mm=b={used:0};var h=a.before||d.before;h&&f(h,[g,d]);var i=a.after||d.after;return b.after=i,e&&(b.key=m(c.$sKeys,d,a)),b.meta=d,a.name&&g.set(a),g.setUrlParams(d.urlParams),g.setPostParams(d.postParams),g.setUrlParams(a.urlParams),g.setPostParams(a.postParams),c.fire("inited",{model:g,meta:d}),g},getModelMeta:function(a){var b=this,c=b.$mMetas,d=a.name||a,e=c[d];return e||q("Unfound:"+d),e},getModel:function(a,b){var c,d,e=this;return b||(c=e.getCachedModel(a)),c||(d=1,c=e.createModel(a)),{entity:c,cKey:c.$mm.key,update:d}},saveAll:w("saveAll"),fetchAll:w("fetchAll"),saveOrder:w("saveOrder"),fetchOrder:w("fetchOrder"),saveOne:w("saveOne"),fetchOne:w("fetchOne"),createMRequest:function(a){var b=new z(this);return a&&a.manage&&a.manage(b),b},clearCacheByKey:function(a){var b=this,c=b.$mCache;c.del(a)},clearCacheByName:function(a){for(var b=this,c=b.$mCache,d=c.list(),e=0;e<d.length;e++){var f=d[e],g=f.v,h=g&&g.$mm;if(h){var i=h.meta.name;i==a&&c.del(h.key)}}},getCachedModel:function(b){var c,d=this,e=d.$mCache,f=a,g=d.getModelMeta(b),h=n(b)||g.cache;if(h&&(c=m(d.$sKeys,g,b)),c){var i=d.$mCacheKeys,j=i[c];j?f=j.e:(f=e.get(c),f&&h>0&&o()-f.$mm.done>h&&(d.clearCacheByKey(c),f=0))}return f}}),r}),d("mxext/model",["magix/magix"],function(a){var b=a("magix/magix"),c=function(a,c){var d=this,e=function(){e.superclass.constructor.apply(this,arguments),c&&b.safeExec(c,arguments,this)};return b.mix(e,d,{prototype:!0}),b.extend(e,d,a)},d=+new Date,e=encodeURIComponent,f=b.has,g=b._o,h=b.toString,i=function(a){this.set(a),this.id="m"+d--};return b.mix(i,{GET:"GET",POST:"POST",extend:c}),b.mix(i.prototype,{sync:b.noop,getPostParams:function(){return this.getParams(i.POST)},getUrlParams:function(){return this.getParams(i.GET)},getParams:function(a){var c=this;a||(a=i.GET);var d,f="$"+a,g=c[f],h=[];for(var j in g){d=g[j],b._a(d)||(d=[d]);for(var k=0;k<d.length;k++)h.push(j+"="+e(d[k]))}return h.join("&")},setUrlParamsIf:function(a,b){this.setParams(a,b,i.GET,!0)},setPostParamsIf:function(a,b){var c=this;c.setParams(a,b,i.POST,!0)},setParams:function(a,b,c,d){var e=this,h="$"+c;e[h]||(e[h]={});var i=e[h];if(!g(a)&&a){var j={};j[a]=b,a=j}for(var k in a)d&&f(i,k)||(i[k]=a[k])},setPostParams:function(a,b){var c=this;c.setParams(a,b,i.POST)},setUrlParams:function(a,b){this.setParams(a,b,i.GET)},get:function(a,b,c){var d=this,e=arguments.length,f=2==e,g=d.$attrs;if(e){for(var i=(a+"").split(".");g&&i[0];)g=g[i.shift()];i[0]&&(g=c)}return f&&h.call(b)!=h.call(g)&&(g=b),g},set:function(a,b){var c=this;if(c.$attrs||(c.$attrs={}),g(a))for(var d in a)c.$attrs[d]=a[d];else a&&(c.$attrs[a]=b)},request:function(a,b){var c=this;c.$abt=0;var d=function(d,e){c.$abt||(g(e)||(e={data:e}),c.set(e),a(d,b))};c.$trans=c.sync(c.$temp=d)},abort:function(){var a=this,b=a.$trans,c=a.$temp;c&&c("abort"),a.$abt=1,b&&b.abort&&b.abort(),a.$trans=0},isAborted:function(){return this.$abt}}),i}),d("mxext/view",["magix/magix","magix/view","magix/router"],function(b){var c=b("magix/magix"),d=b("magix/view"),e=b("magix/router"),f=window,g=0,h=c.safeExec,i=c.has,j=[],k="rendercall",l="destroy",m=function(a){f.clearTimeout(a),f.clearInterval(a)},n=function(a){var b=a&&a[l];b&&h(b,j,a)},o=function(a){var b=this,c=b.$res,d=a.type==k,e=a.type!=l;for(var f in c){var g=c[f];(!d||g.mr)&&b.destroyManaged(f,e)}},p=d.extend({navigate:e.navigate,manage:function(a,b,d){var e=this,f=arguments,h=1,i=e.$res;1==f.length?(b=a,a="res_"+g++,h=0):e.destroyManaged(a);var j;j=c._n(b)?m:n;var k={hk:h,res:b,ol:d,mr:b&&b.$reqs,oust:j};return i[a]=k,b},getManaged:function(b,c){var d=this,e=d.$res,f=a;if(i(e,b)){var g=e[b];f=g.res,c&&delete e[b]}return f},removeManaged:function(a){return this.getManaged(a,1)},destroyManaged:function(a,b){var c,d=this,e=d.$res,f=e[a];return!f||b&&f.ol||(c=f.res,f.oust(c),f.hk&&b||delete e[a]),c}},function(){var a=this;a.$res={},a.on("interact",function(){a.on(k,o),a.on("prerender",o),a.on(l,o)}),h(p.ms,arguments,a)},{ms:[],mixin:function(a,b){b&&p.ms.push(b),c.mix(p.prototype,a)}});return p}),c.createElement("vframe")}(null,this,document,define);