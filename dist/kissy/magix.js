/*!3.8.8 MIT kooboy_li@163.com*/KISSY.add("magix",(e,t,r)=>{let i,n=e.all,o=e.isObject,f=e.isArray,a=0,s="",l=[],h=",",c=null,d=window,u=document,$=n(u),p=d.setTimeout,m="changed",g="change",b="pageunload",v="value",w="mxs",y="mxa",x="#",k=function(){},V=JSON.stringify,j="\x1e",I="object",T="prototype",A="params",S="path",q="mx-view",H=/[#?].*$/,O=/([^=&?\/#]+)=?([^&#?]*)/g,E=/(?!^)=|&/,U=e=>(e||"mx_")+a++,Z=U(),C={rootId:U(),defaultView:Z,error(e){throw e}},L=e=>typeof e==I?e:u.getElementById(e),M=e=>!e||typeof e!=I,N=(e,t,r)=>{let i,n,o,f=0;for(o in e)i=e[o],n=t[o],M(i)&&n===i||(r[o]=1,f=1),t[o]=i;return f},P=(e,t,r)=>{if(e=L(e),t=L(t),e&&t&&!(r=e==t))try{r=16==(16&t.compareDocumentPosition(e))}catch(e){}return r},{assign:_,keys:z,hasOwnProperty:B}=Object,R=n("head"),F=(e,t)=>{t&&!F[e]&&(F[e]=1,R.append(`<style>${t}`))},W=e=>e.id||(e.id=U()),D=(e,t,r,i,n)=>{t=t||l,f(e)||(e=[e]),f(t)||(t=[t]);for(n of e)try{i=n&&n.apply(r,t)}catch(e){C.error(e)}return i},J=(e,t)=>e&&B.call(e,t),K=(e,t,r)=>{let i,n;if(!r&&M(t))(i=t+s)[0]==j&&(t=e[i]);else for(i in t)n=t[i],r&&!M(n)&&K(e,n,r),i[0]==j&&(delete t[i],i=e[i]),t[i]=(n+s)[0]==j?e[n]:n;return t},Q=(e,t)=>t.f-e.f||t.t-e.t,Y=function(e,t,r,i){(i=this).c=[],i.b=t||5,i.x=i.b+(e||20),i.r=r};_(Y[T],{get(e){let t=this.c[j+e];return t&&(t.f++,t.t=a++,t=t.v),t},each(e,t,r,i,n){i=(r=this).c;for(n of i)e(n.v,t,r)},set(e,t){let r=this,i=r.c,n=j+e,o=i[n],f=r.b;if(!o){if(i.length>=r.x)for(i.sort(Q);f--;)(o=i.pop()).f>0&&r.del(o.o);o={o:e},i.push(o),i[n]=o}o.v=t,o.f=1,o.t=a++},del(e){e=j+e;let t=this.c,r=t[e],i=this.r;r&&(r.f=-1,r.v=s,delete t[e],i&&D(i,r.o))},has(e){return J(this.c,j+e)}});let G=(t,r)=>{e.use(t&&t+s,(e,...t)=>{r&&r.apply(e,t)})},X=e.extend,ee=r.test,te=function(e,t){t=this,e.eventTarget=t.e,D(t.f,e,t.v)},re=(e,r,i,n,o)=>{o?t[`${n?"un":s}delegate`](e,r,i,o):t[n?"detach":"on"](e,r,i,o)};let ie,ne=new Y,oe=0,fe=(e,t,r)=>{try{r=decodeURIComponent(r)}catch(e){}ie[t]=r},ae=e=>{let t,r=ne.get(e);return r||(ie={},e==(t=e.replace(H,s))&&E.test(t)&&(t=s),e.replace(t,s).replace(O,fe),ne.set(e,r={a:t,b:ie})),{path:r.a,params:{...r.b}}},se=(e,t,r)=>{let i,n,o,f=[];for(n in t)i=t[n]+s,(!r||i||J(r,n))&&(i=encodeURIComponent(i),f.push(o=n+"="+i));return o&&(e+=(e&&(~e.indexOf("?")?"&":"?"))+f.join("&")),e},le=(e,t)=>{let r,i={};if(e)for(r of e)i[t&&r?r[t]:r]=t?r:1+(0|i[r]);return i},he=new Y,ce=(e,t,r)=>(he.has(e)?r=he.get(e):(r=D(Function(`return ${e}`)),e.indexOf(j)>-1?K(t,r,1):he.set(e,r)),r),de={config:(e,t)=>(t=C,e&&(t=o(e)?_(t,e):t[e]),t),boot(e){_(C,e),G(C.ini,t=>{_(C,t,e),G(C.exts,()=>{_e.on(m,We),we.on(m,We),oe=1,Le()})})},toMap:le,toTry:D,toUrl:se,parseUrl:ae,mix:_,has:J,keys:z,inside:P,node:L,applyStyle:F,guid:U,use:G,Cache:Y,nodeId:W},ue={fire(e,t,r,i){let n,o,f,a,l=this,h=l[j+e];if(t||(t={}),t.type||(t.type=e),h)for(o=(n=h.length)-1;n--;)(a=h[f=i?n:o-n]).f?(a.x=1,D(a.f,t,l),a.x=s):a.x||(h.splice(f,1),o--);(h=l[`on${e}`])&&D(h,t,l),r&&l.off(e)},on(e,t){let r=j+e;(this[r]||(this[r]=[])).push({f:t})},off(e,t){let r,i=j+e,n=this,o=n[i];if(t){if(o)for(r of o)if(r.f==t){r.f=s;break}}else delete n[i],delete n[`on${e}`]}};de.Event=ue;let $e={},pe={},me={},ge=0,be=e=>{e=(e+s).split(",");for(let t of e)J(pe,t)?pe[t]++:pe[t]=1;return e},ve=e=>{let t,r;for(t of e)J(pe,t)&&((r=--pe[t])||(delete pe[t],delete $e[t]))};let we={get(e){let t=e?$e[e]:$e;return t},set(e){return ge=N(e,$e,me)||ge,this},digest(e){e&&we.set(e),ge&&(ge=0,this.fire(m,{keys:me}),me={})},diff:()=>me,clean:e=>({ctor(){e=be(e),this.on("destroy",()=>ve(e))}}),...ue};de.State=we;let ye,xe,ke,Ve,je,Ie,Te="view",Ae=new Y,Se=new Y,qe=d.location,He=0,Oe={query:{},params:{},href:s},Ee=/(?:^.*\/\/[^\/]+|#.*$)/gi,Ue=/^[^#]*#?!?/,Ze=function(e){return this[A][e]||s},Ce=(e,t)=>{e=`#!${e}`,t?qe.replace(e):qe.hash=e},Le=()=>{let e,t,r=Ne().srcHash;re(d,"hashchange",(i,n,o)=>{t||(n=Ne(),(e=n.srcHash)!=r&&(o=(()=>{i.p=1,r=e,t=s,Ce(e),Pe()}),i={reject(){i.p=1,t=s,Ce(r)},resolve:o,prevent(){t=1}},_e.fire(g,i),t||i.p||o()))}),re(d,"beforeunload",(e,t,r)=>{if(e=e||d.event,t={},_e.fire(b,t),r=t.msg)return e&&(e.returnValue=r),r}),Pe()},Me=u.title,Ne=e=>{e=e||qe.href;let t,r,i,n,f,a=Ae.get(e);return a||(t=e.replace(Ee,s),r=e.replace(Ue,s),i=ae(t),n=ae(r),f={...i[A],...n[A]},a={get:Ze,href:e,srcQuery:t,srcHash:r,query:i,hash:n,params:f},oe&&(((e,t)=>{if(xe||(xe=C.routes||{},ke=C.unmatchView,Ve=C.defaultView,je=C.defaultPath||"/",Ie=C.rewrite),!e[Te]){let r=e.hash[S]||je;Ie&&(r=Ie(r,e[A],xe)),t=xe[r]||ke||Ve,e[S]=r,e[Te]=t,o(t)&&_(e,t)}})(a),Ae.set(e,a))),a},Pe=()=>{let e=Ne(),t=((e,t)=>{let r=e.href,i=t.href,n=r+j+i,o=Se.get(n);if(!o){let i,f;o={params:f={},force:!r};let a,s=e[A],l=t[A],h=z(s).concat(z(l)),c=e=>{let t=s[e],r=l[e];t!=r&&(f[e]={from:t,to:r},i=1)};for(a of h)c(a);s=e,l=t,f=o,c(S),c(Te),Se.set(n,o={a:i,b:o})}return o})(Oe,Oe=e);return!He&&t.a&&((ye=t.b)[S]&&(u.title=e.title||Me),_e.fire(m,ye)),He=0,ye},_e={parse:Ne,diff:Pe,to(e,t,r,i){!t&&o(e)&&(t=e,e=s);let n=ae(e),f=n[A],a=n[S],l=Oe[S],h=Oe[A],c=Oe.query[A];if(_(f,t),a)for(l in c)J(f,l)||(f[l]=s);else h&&(a=l,f={...h,...f});var d,u,$,p;u=Oe,$=r,p=i,(d=se(d=a,f,c))!=u.srcHash&&(He=p,Ce(d,$))},...ue};de.Router=_e;let ze,Be,Re=0,Fe=(e,t,r,i,n,o)=>{if(e&&e.$a!=Re&&(r=e.$v)&&r.$a>1){(t?((e,t,r)=>{let i,n=e.$os;if(n)for(i of n)if(r=J(t,i))break;return r})(r,t):Wt(r))&&r.$b(),n=e.children();for(o of n)Fe(Qe[o],t)}},We=(e,t,r)=>{t=Ke(),(r=e[Te])?t.mountView(r.to):(Re=a++,Fe(t,e.keys))},De=e=>{if(!e.$b&&!e.$d&&e.$cc==e.$rc){e.$cr||(e.$cr=1,e.$ca=0,e.fire("created"));let t,{id:r,pId:i}=e;(t=Qe[i])&&!J(t.$e,r)&&(t.$e[r]=1,t.$rc++,De(t))}},Je=(e,t)=>{if(!e.$ca&&e.$cr){e.$cr=0,e.$ca=1,e.fire("alter",t);let r,{id:i,pId:n}=e;(r=Qe[n])&&J(r.$e,i)&&(r.$rc--,delete r.$e[i],Je(r,t))}},Ke=e=>(ze||(i=u.body,e=C.rootId,L(e)||(i.id=e),ze=new Xe(e)),ze),Qe={},Ye=(e,t,r)=>{for(t=e.$f;t.length;)(r=t.shift()).r||e.invoke(r.n,r.a),delete t[r.k]},Ge=[],Xe=function(e,t,r){var i,n;(r=this).id=e,r.$c={},r.$cc=0,r.$rc=0,r.$g=1,r.$e={},r.$f=[],r.pId=t,n=r,J(Qe,i=e)||(Qe[i]=n,Xe.fire("add",{vframe:n}),(i=L(i))&&(i.vframe=n))};_(Xe,{all:()=>Qe,get:e=>Qe[e]},ue),_(Xe[T],ue,{mountView(e,t){let r,i,n,o,f,a,s=this,{id:l,pId:h,$g:c}=s,d=L(l);!s.$h&&d&&(s.$h=1,s.$i=d.innerHTML),s.unmountView(),s.$b=0,d&&e&&(s[S]=e,r=ae(e),n=r[S],i=++c,o=r[A],a=(a=(a=(a=Qe[h])&&a.$v)&&a.$d)&&a.$a,e.indexOf(j)>0&&K(a,o),s.$n=r[S],_(o,t),G(n,e=>{if(i==s.$g){if(!e)return C.error(Error(`id:${l} cannot load:${n}`));f=Ft(e),n=new e(l,s,o,f),s.$v=n,s.$a=Re,_t(n),D(n.init,o,n),n.$b(),n.$e||(s.$h=0,n.$f||n.endUpdate())}}))},unmountView(){let e,t,r=this,{$v:i,id:o}=r;r.$f=[],i&&(Be||(t=1,Be={id:o}),r.$b=1,r.unmountZone(0,1),Je(r,Be),r.$v=0,i.$a>0&&(i.$a=0,delete nt[o],delete ot[o],i.fire("destroy",0,1,1),Mt(i,1),_t(i,1),i.owner=0),i.$a--,(e=L(o))&&r.$h&&n(e).html(r.$i),t&&(Be=0)),r.$g++},mountVframe(e,t,r){let i,n=this,o=n.id,f=n.$c;return Je(n,{id:e}),(i=Qe[e])||(J(f,e)||(n.$o=0,n.$cc++),f[e]=e,(i=Ge.pop())?Xe.call(i,e,o):i=new Xe(e,o)),i.mountView(t,r),i},mountZone(e,t){let r,i,o=this,f=[];e=e||o.id;let a=n(`#${e} [${q}]`);o.$d=1;for(r of a)r.$a||r.getAttribute("mx-slot")==o.id||(i=W(r),r.$a=1,f.push([i,r.getAttribute(q)]));for([i,r]of f)o.mountVframe(i,r);o.$d=0,t||De(o)},unmountVframe(e,t){let r;if(e=e?this.$c[e]:this.id,r=Qe[e]){let{$cr:f,pId:a}=r;r.unmountView(),n=f,(o=Qe[i=e])&&(delete Qe[i],Xe.fire("remove",{vframe:o,fcc:n}),(i=L(i))&&(i.$a=0,i.vframe=0)),r.id=r.pId=r.$c=r.$e=0,r.off("alter"),r.off("created"),Ge.push(r),(r=Qe[a])&&J(r.$c,e)&&(delete r.$c[e],r.$o=0,r.$cc--,t||De(r))}var i,n,o},unmountZone(e,t){let r,i=this;for(r in i.$c)(!e||r!=e&&P(r,e))&&i.unmountVframe(r,1);t||De(i)},parent(e,t){for(t=this,e=e>>>0||1;t&&e--;)t=Qe[t.pId];return t},children(e){return(e=this).$o||(e.$o=z(e.$c))},invoke(e,t){let r,i,n,o,f,a=this.$f;return(i=this.$v)&&i.$f?r=(n=i[e])&&D(n,t,i):((o=a[f=j+e])&&(o.r=t===o.a),o={n:e,a:t,k:f},a.push(o),a[f]=o),r}}),de.Vframe=Xe,r[T].invokeView=function(e,t){if(this.length){let r=this[0],i=r.vframe;if(void 0===t)return i&&i.invoke(e);for(r of this)(i=r.vframe)&&i.invoke(e,t)}};let et=new Y(30,10),tt=/(?:([\w\-]+)\x1e)?([^(]+)\(([\s\S]*)?\)/,rt={},it={},nt={},ot={},ft=0,at=(e,t)=>{let r,n,o,f,a,s,h=[],c=e,d=e.getAttribute(`mx-${t}`),u=[],$=x,p=0;if(d&&((a=et.get(d))||(a={v:(a=d.match(tt)||l)[1],n:a[2],i:a[3]},et.set(d,a)),a={...a,r:d}),a&&!a.v||it[t]){if((o=ot[n=c.$b])&&1==o[c.$d]&&(s=1,$=n),!s){for(u.push(c);c!=i&&(c=c.parentNode);){if(Qe[n=c.id]||(o=ot[n=c.$b])&&1==o[c.$d]){$=n;break}u.push(c)}for(d of u)(n=ot[$])||(n=ot[$]={}),n[o=d.$d||(d.$d=++ft)]=1,d.$b=$}if($!=x){c=e.id,Qe[c]&&(p=$=c);do{if((r=Qe[$])&&(s=r.$v)){f=(o=s.$so)[t];for(n in f)o={r:n,v:$,n:n},n?!p&&ee(e,n)&&h.push(o):p&&h.unshift(o);if(s.$e&&!p){a&&!a.v&&(a.v=$);break}p=0}}while(r&&($=r.pId))}}return a&&h.push(a),h},st=e=>{let t,r,n,o,f,a,s,l,{target:h,type:c}=e,d=[];for(;h!=i;){if((t=at(h,c)).length){d=[];for(let{v:r,r:i,n:d,i:u}of t){if(s!=r){if(s&&e.isPropagationStopped())break;s=r}(o=(n=Qe[r])&&n.$v)?(a=o[f=d+j+c])&&(e.eventTarget=h,l=u?ce(u,o.$d.$a):{},e[A]=l,D(a,e,o)):e.stopPropagation()}}if((r=nt[a=h.$b])&&(r=r[h.$d])&&r[c]||e.isPropagationStopped()){d.length&&d.push(a);break}d.push(h),s=h.id,Qe[s]&&d.push(s),h=h.parentNode||i}if(a=d.length)for(r=x;a--;)(o=d[a]).nodeType?((t=nt[r])||(t=nt[r]={}),(l=t[s=o.$d||(o.$d=++ft)])||(l=t[s]={},o.$b=r),l[c]=1):r=o},lt=(e,t,r)=>{let n=0|rt[e],o=r?-1:1;n&&r!==n||re(i,e,st,r),rt[e]=n+o,t&&(it[e]=(0|it[e])+o)},ht={input:1,br:1,hr:1,img:1,embed:1,source:1,area:1,param:1,col:1,track:1,wbr:1},ct={input:[v,"checked"],textarea:[v],option:["selected"]},dt=a;let ut=/^<([a-z\d]+)((?:\s+[-A-Za-z\d_]+(?:="[^"]*")?)*)\s*(\/?)>/,$t=/([-A-Za-z\d_]+)(?:="([^"]*)")?/g,pt=/^<\/[a-z\d]+>/,mt={},gt=/&#?[^\W]+;?/g,bt=u.createElement("div"),vt=e=>(J(mt,e)||(bt.innerHTML=e,mt[e]=bt.innerText),mt[e]),wt=e=>e.replace(gt,vt),yt=(e,t)=>{let r,i,n,o,f,a;if(o=e.e,a=e.c,o==dt)return a;if(o&&t){f="<"+o+" ";for(r of e.f)i=r.g,n=r.h,f+=" "+i+'="'+wt(n)+'"';return e.m?f+" />":f+" >"+a+"</"+o+">"}return a},xt=e=>e.j?e.j:(e.j=yt(e,!0),e.j),kt=(e,t)=>{if(e.c)return yt(e,t);let r="";return Array.isArray(e)?e.forEach(function(e){r+=kt(e,t)}):e.b.length>0&&(r=kt(e.b,!0)),e.c=r,yt(e,t)},Vt=/mx-(?!view|vframe|owner|autonomy|datafrom|guid|ssid|dep|html|static)([a-zA-Z]+)/,jt=function(e,t,...r){let i={},n="",f=this;if(t=t||{},r=r||[],e instanceof Function){if(!de.addView)return;let r=U("_mv_");t["mx-view"]=r,de.addView(r,e),e="div"}if(i.i=t,i.f=[],Object.keys(t).forEach(function(e){if("id"==e?n=t[e]:e==q&&t[e]&&!n?n=ae(t[e])[S]:"mxs"==e&&(n||(n=t[e])),Vt.test(e)){var r=t[e],o="";r instanceof Function&&(r=(o=U("_efn_"))+"()",f.constructor[T][o+j+"click"]=t[e]),t[e]=f.id+"\x1e"+r}i.f.push({g:e,h:t[e]})}),t["mx-view"]){let e,r,n,o=[],a=null;i.f.forEach(function(t){"mx-view"===t.g?a=t:t.g.trim().startsWith("view-")&&(e=j+U("sk"),f.updater.$a[e]=t.h,t.h=e,i.i[t.g]=e,r=t.g.replace("view-",""),o.push(r+"="+e))}),n=a.h+"?"+o.join("&"),a.h=n,t["mx-view"]=n}return e&&(i.e=e,i.l=n),i.b=[],r.forEach(function(e){o(e)?i.b.push(e):i.b.push({c:e,e:dt})}),i},It=(e,t)=>{let r=W(t);e.$c[r]?e.unmountVframe(r,1):e.unmountZone(r,1)},Tt=(e,t,r,i)=>{let n,o,f,a=r.i;if(t)for(n of t.f)o=n.g,J(a,o)||("id"==o?i.d.push([e,s]):(i.c=1,e.removeAttribute(o)));for(n of r.f)o=n.g,f=n.h,t&&t.i[o]===f||(f=wt(f),"id"==o?i.d.push([e,f]):(i.c=1,e.setAttribute(o,f)))},At=(e,t,r,i,n)=>{if((n=e.e)==dt)return u.createTextNode(e.c);let o=kt(e);return i=u.createElementNS("svg"==n?"http://www.w3.org/2000/svg":t.namespaceURI,n),Tt(i,0,e,r),o&&(i.innerHTML=o),i},St=(e,t,r,i,n,o,f)=>{if(t){let a,s,l,h,c,d,u=0,$=t.b,p=r.b,m=$.length,g=p.length,b=r.a,v=e.childNodes,w={};for(a=m;a--;)(h=(s=$[a]).l)&&(h=w[h]||(w[h]=[])).push({o:v[a],p:s});for(a=0;a<g;a++){do{s=$[u++]}while(s&&s.q);(h=w[(l=p[a]).l])&&(h=h.pop())?(c=h.o,d=h.p,c!=v[a]&&(d.q=1,s=d,e.insertBefore(c,v[a])),qt(v[a],e,s,l,i,n,o,f)):s?w[s.l]&&b[s.l]?(m++,u--,i.c=1,e.insertBefore(At(l,e,i),v[a])):qt(v[a],e,s,l,i,n,o,f):(e.appendChild(At(l,e,i)),i.c=1)}for(a=g;a<m;a++)u=v[g],It(n,u),e.removeChild(u),i.c=1}else i.c=1,e.innerHTML=kt(r)},qt=(e,t,r,i,n,o,f,a)=>{let l=r.i,c=i.i;if(((e,t,r)=>{let i,n,o=t.e,f=ct[o],a=r.i,l=0;if(f)for(i of f)n=J(a,i)?i!=v||a[i]:i==v&&s,e[i]!=n&&(l=1,e[i]=n);return l})(e,r,i)||J(l,"mxv")||xt(r)!=xt(i))if(r.e==i.e){if(r.e==dt)kt(r)!=kt(i)&&(n.c=1,e.nodeValue=wt(i.c));else if(!l[w]||l[w]!=c[w]){let t,s,d,u,$,p,m,g=c[q],b=kt(i),v=!c[y]||l[y]!=c[y],w=Qe[e.id],x=g&&ae(g);if(g&&w&&w.$n==x[S]&&(u=w.$v)){if(p=b!=kt(r),m=g!=w[S],d=l.mxv,!p&&!m&&d){$=d.split(h);for(d of $)if(J(a,d)){m=1;break}}m||p?(d=u.$g)?($=x[A],g.indexOf(j)>-1&&K(f,$),w[S]=g,x={node:i,html:b,deep:!u.$e,inner:p,query:m},v=1,D(d,[$,x],u)&&n.v.push(u),t=x.deep):(s=1,t=1):v=1}else t=1,s=w;s&&(n.c=1,w.unmountVframe(0,1)),v&&Tt(e,r,i,n),!t||i.m&&r.m||St(e,r,i,n,o,f,a)}}else It(o,e),t.replaceChild(At(i,t,n),e),n.c=1},Ht=function(e){this.$b=e,this.$c=1,this.$a={vId:e,[j]:1},this.$k={}};_(Ht[T],{get(e,t){return t=this.$a,e&&(t=t[e]),t},set(e){let t=this;return t.$c=N(e,t.$a,t.$k)||t.$c,t},digest(e){let t=this.set(e),r=t.$k,i=t.$c;t.$c=0,t.$k={},e=t.$a;let n,f,a=t.$b,h=Qe[a],c=h&&h.$v,d={d:[],v:[]},u=L(a);if(i&&c&&c.$a>0&&(n=c.$e)){delete nt[a],delete ot[a],c.$vcr||(c.$vcr=jt),f=n.call(c,e,a),o(f)?f.e&&(f={b:[f]}):f=(e=>{let t,r,i,n,o,f,a,h,c,d,u,$=e.length,p=0,m=0,g={a:{},b:[],c:e},b=e,y=[g];for(;p<$&&(t=1,"<"==b[0]&&("/"==b[1]?(i=b.match(pt))&&(a=y.pop(),o=e.substring(a.d,p),"textarea"==a.e?(a.f.push({g:v,h:o}),a.i[v]=o,a.b=l):a.c=o,g=y[y.length-1],p+=f=i[0].length,a.j=e.substring(a.k,p),t=0):(i=b.match(ut))&&(n=i[1],t=i[0],o=[],h={},u=s,i[2].replace($t,(e,t,r)=>{r=r||s,"id"==t?u=r:t==q&&r&&!u?u=ae(r)[S]:t!=w||u||(u=r),o.push({g:t,h:r}),h[t]=r}),d=i[3]||J(ht,n),a={j:t,l:u,e:n,f:o,i:h,b:[],a:{},k:p,d:p+=f=t.length},u&&(g.a[u]=1),g.b.push(a),d?a.m=1:(y.push(a),g=a),t=0)),t&&(p+=f=(c=(r=b.indexOf("<"))<0?b:b.substring(0,r)).length,a={e:dt,c:c,j:c},g.b.push(a)),m!=p);)b=b.substring(f),m=p;return g})(f),St(u,t.$d,f,d,h,e,r),t.$d=f;for(f of d.d)f[0].id=f[1];for(f of d.v)f.$b();!d.c&&c.$f||c.endUpdate(a),d.c&&$.fire("htmlchanged",{vId:a}),c.fire("domready")}return Promise.resolve()},snapshot(){return this.$e=V(this.$a),this},altered(){let e=this;if(e.$e)return e.$e!=V(e.$a)},translate(e){return K(this.$a,e,1)},parse(e){return ce(e,this.$a)}});let Ot="default",Et="slot",Ut=/\s+slot(\s*=\s*"[^"]*")?/g,Zt={from(e){let t,r,i,n={},o=e.nodeType,f=o?e.childNodes:e.b;for(t of f)(o?t.nodeType==o&&t.hasAttribute(Et):J(t.i,Et))&&(i=1,n[r=(o?t.getAttribute(Et):t.i[Et])||Ot]=(o?t.outerHTML:t.j).replace(Ut,""));return i||(n[Ot]=(o?e.innerHTML:e.c).replace(Ut,"")),n}};de.Slot=Zt;let Ct=/^(\$?)([^<]*)<([^>]+)>$/,Lt=(e,t,r)=>(e.a?r=e:((r=function(e){D(r.a,e,this)}).a=[e],r.b=1),r.a=r.a.concat(t.a||t),r),Mt=(e,t)=>{let r,i,n=e.$r;for(r in n)i=n[r],(t||i.x)&&Nt(n,r,1)},Nt=(e,t,r,i)=>{let n,o,f=e[t];return f&&f!=i&&((n=(o=f.e).destroy)&&r&&D(n,l,o),delete e[t]),o},Pt=(e,t,r,i,n)=>{i=e[t],e[t]=e[r]=function(...e){(n=this).$a>0&&(n.$a++,n.fire("rendercall"),Mt(n),D(i,e,n))}},_t=(e,t)=>{let r,{$eo:i,$so:n,$el:o,id:f}=e;for(r in i)lt(r,n[r],t);for(r of o)re(r.e,r.n,te,t,{i:f,v:e,f:r.f,e:r.e})},zt=[],Bt={win:d,doc:u},Rt=(e,t,r)=>{let i,n,o,f,a={};for(n of e)for(i in n)o=n[i],f=a[i],"ctor"!=i?(Ct.test(i)&&(f?o=Lt(f,o):o.b=1),a[i]=o):r.push(o);for(i in a)J(t,i)||(t[i]=a[i])},Ft=e=>{if(!e[j]){e[j]=[];let t,r,i,n,o,f,a,s,l,c=e[T],d={},u=[],$={};(r=c.mixins)&&Rt(r,c,e[j]);for(a in c)if(t=c[a],r=a.match(Ct)){[,f,i,n]=r,n=n.split(h);for(s of n){if(o=Bt[i],l=1,f){if(o){u.push({f:t,e:o,n:s});continue}l=2,(o=$[s])||(o=$[s]={}),o[i]=1}d[s]=d[s]|l,(o=c[s=i+j+s])?o.b&&(t.b?c[s]=Lt(t,o):J(c,a)&&(c[s]=t)):c[s]=t}}Pt(c,"render","$b"),c.$eo=d,c.$el=u,c.$so=$,c.$e=c.tmpl,c.$g=c.assign}return e[j]},Wt=e=>{let t,r,i,n=e.$l;if(n.f&&(n.p&&(t=ye[S]),!t&&n.k)){i=ye[A];for(r of n.k)if(t=J(i,r))break}return t},Dt=function(e,t,r,i){(i=this).owner=t,i.id=e,i.$l={k:[]},i.$r={},i.$a=1,i.updater=i.$d=new Ht(i.id),D(zt,r,i)},Jt=Dt[T];_(Dt,{merge(...e){Rt(e,Jt,zt)},extend(e,t){let r=this,i=(e=e||{}).ctor,n=[];i&&n.push(i);let o=function(e,t,i,o){r.call(this,e,t,i),D(n.concat(o),i,this)};return o.extend=r.extend,X(o,r,e,t)}}),_(Jt,ue,{init:k,beginUpdate(e,t){(t=this).$a>0&&t.$f&&t.owner.unmountZone(e,1)},endUpdate(e,t,r,i,n){(r=this).$a>0&&(e=e||r.id,t?n=t:(n=r.$f,r.$f=1),(i=r.owner).mountZone(e,t),n||p(r.wrapAsync(Ye),0,i))},wrapAsync(e,t){let r=this,i=r.$a;return(...n)=>{if(i>0&&i==r.$a)return e.apply(t||r,n)}},observeLocation(e,t){let r;(r=this.$l).f=1,o(e)&&(t=e[S],e=e[A]),r.p=t,e&&(r.k=(e+s).split(h))},observeState(e){this.$os=(e+s).split(h)},capture(e,t,r,i){return i=this.$r,t?(Nt(i,e,1,t),i[e]={e:t,x:r}):t=(i=i[e])&&i.e,t},release(e,t){return Nt(this.$r,e,t)},leaveTip(e,t){let r=this,i=n=>{let o="a",f="b";n.type!=g&&(o="b",f="a"),i[o]?(n.prevent(),n.reject()):t()&&(n.prevent(),i[f]=1,r.leaveConfirm(()=>{i[f]=0,n.resolve()},()=>{i[f]=0,n.reject()},e))},n=r=>{t()&&(r.msg=e)};_e.on(g,i),_e.on(b,n),r.on("unload",i),r.on("destroy",()=>{_e.off(g,i),_e.off(b,n)})},render:k}),de.View=Dt;let Kt=e.type,Qt=e.now,Yt=function(){this.id=U("b"),this.$={}};_(Yt[T],{get(e,t,r){let i,n=t!=r,o=this.$;if(e){let t,i=f(e)?e.slice():(e+s).split(".");for(;(t=i.shift())&&o;)o=o[t];t&&(o=r)}return n&&(i=Kt(t))!=Kt(o)&&(o=t),o},set(e,t){o(e)||(e={[e]:t}),_(this.$,e)}});let Gt=function(e,t,r){(r=this[e])&&(delete this[e],D(r,t,r.e))},Xt=(e,t,r,i,n,o)=>{let f=[],a=c,s=0;return function(l,h){let d,u=this;s++;let $=u.$b,p=$.k;f[l+1]=u;let m,g={bag:u,error:h};if(h?(a=h,t.fire("fail",g),d=1):o.has(p)||(p&&o.set(p,u),$.t=Qt(),(m=$.a)&&D(m,u,u),(m=$.x)&&t.clear(m),t.fire("done",g),d=1),!r.$d){let t=s==i;t&&(r.$e=0,2==n&&(f[0]=a,D(e,f,r))),1==n&&D(e,[h||c,u,t,l],r)}d&&t.fire("end",g)}},er=(e,t,r,i,n)=>{if(e.$d)return e;if(e.$e)return e.enqueue(er.bind(e,e,t,r,i,n));e.$e=1,f(t)||(t=[t]);let o=e.constructor,a=0,s=o.$f,l=Xt(r,o,e,t.length,i,o.$c);for(let e of t)if(e){let t,r=o.get(e,n),i=r.e,f=i.$b.k,h=l.bind(i,a++);f&&s[f]?s[f].push(h):r.u?(f&&((t=[h]).e=i,s[f]=t,h=Gt.bind(s,f)),o.$s(i,h)):h()}return e},tr=function(){let e=this;e.id=U("s"),e.$g=[]};_(tr[T],{all(e,t){return er(this,e,t,2)},save(e,t){return er(this,e,t,2,1)},one(e,t){return er(this,e,t,1)},enqueue(e){let t=this;return t.$d||(t.$g.push(e),t.dequeue(t.$h)),t},dequeue(...e){let t,r=this;r.$e||r.$d||(r.$e=1,p(()=>{r.$e=0,r.$d||(t=r.$g.shift())&&D(t,r.$h=e)},0))},destroy(e){(e=this).$d=1,e.$g=0}});let rr=(e,t)=>[V(t),V(e)].join(j),ir=(e,t,r,i)=>{(i=e&&e.$b)&&t[i.n]&&r.del(i.k)},nr={add(e){let t,r=this.$b;f(e)||(e=[e]);for(t of e)if(t){let{name:e,cache:i}=t;t.cache=0|i,r[e]=t}},create(e){let t=this.meta(e),r=0|e.cache||t.cache,i=new Yt;i.set(t),i.$b={n:t.name,a:t.after,x:t.cleans,k:r&&rr(t,e)},o(e)&&i.set(e);let n=t.before;return n&&D(n,i,i),this.fire("begin",{bag:i}),i},meta(e){return this.$b[e.name||e]||e},get(e,t){let r,i,n=this;return t||(r=n.cached(e)),r||(r=n.create(e),i=1),{e:r,u:i}},clear(e){this.$c.each(ir,le((e+s).split(h)))},cached(e){let t,r,i=this,n=i.$c,o=i.meta(e),f=0|e.cache||o.cache;if(f&&(r=rr(o,e)),r){let e=i.$f[r];e?t=e.e:(t=n.get(r))&&Qt()-t.$b.t>f&&(n.del(r),t=0)}return t},...ue};return tr.extend=((e,t,r)=>{let i=function(){tr.call(this)};return i.$s=e,i.$c=new Y(t,r),i.$f={},i.$b={},X(i,tr,c,nr)}),de.Service=tr,_(k[T],ue),k.extend=function e(t,r){let i=this,n=t&&t.ctor,o=function(...e){i.apply(this,e),n&&n.apply(this,e)};return o.extend=e,X(o,i,t,r)},de.Base=k,e.add(Z,()=>Dt.extend()),de},{requires:["event","node","dom"]});