/*!3.8.2 MIT kooboy_li@163.com*/KISSY.add("magix",function(e,n,t){var r,i=e.all,o=e.isObject,a=e.isArray,f=0,u="",c=[],h=",",s=window,d=document,v=i(d),$=s.setTimeout,l=function(){},p=JSON.stringify,g="\x1e",m="object",b="prototype",w="params",y="path",x="mx-view",k=/[#?].*$/,V=/([^=&?\/#]+)=?([^&#?]*)/g,I=/(?!^)=|&/,_=function(e){return(e||"mx_")+f++},j=_(),S={rootId:_(),defaultView:j,error:function(e){throw e}},T=function(e){return typeof e==m?e:d.getElementById(e)},A=function(e){return!e||typeof e!=m},O=function(e,n,t){var r,i,o,a=0;for(o in e)r=e[o],i=n[o],A(r)&&i===r||(t[o]=1,a=1),n[o]=r;return a},U=function(e,n,t){if(e=T(e),n=T(n),e&&n&&!(t=e==n))try{t=16==(16&n.compareDocumentPosition(e))}catch(e){}return t},q=function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])L(n,i)&&(e[i]=n[i]);return e},C=function(e,n,t){for(t in n=[],e)L(e,t)&&n.push(t);return n},H=S.hasOwnProperty,Z=i("head"),E=function(e,n){n&&!E[e]&&(E[e]=1,Z.append("<style>"+n))},P=function(e){return e.id||(e.id=_())},N=function(e,n,t,r,i){n=n||c,a(e)||(e=[e]),a(n)||(n=[n]);for(var o=0,f=e;o<f.length;o++){i=f[o];try{r=i&&i.apply(t,n)}catch(e){S.error(e)}}return r},L=function(e,n){return e&&H.call(e,n)},M=function(e,n,t){var r,i;for(r in n)i=n[r],t[r]=(i+u)[0]==g?e[i]:i},z=function(e,n){return n.f-e.f||n.t-e.t},B=function(e,n,t,r){(r=this).c=[],r.b=n||5,r.x=r.b+(e||20),r.r=t};q(B[b],{get:function(e){var n=this.c[g+e];return n&&(n.f++,n.t=f++,n=n.v),n},each:function(e,n,t){for(var r=0,i=(t=this).c;r<i.length;r++)e(i[r].v,n,t)},set:function(e,n){var t=this.c,r=g+e,i=t[r],o=this.b;if(!i){if(t.length>=this.x)for(t.sort(z);o--;)(i=t.pop()).f>0&&this.del(i.o);i={o:e},t.push(i),t[r]=i}i.v=n,i.f=1,i.t=f++},del:function(e){e=g+e;var n=this.c,t=n[e],r=this.r;t&&(t.f=-1,t.v=u,delete n[e],r&&N(r,t.o))},has:function(e){return L(this.c,g+e)}});var R,D=function(n,t){e.use(n&&n+u,function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];t&&t.apply(e,n)})},F=e.extend,J=t.test,K=function(e,n){n=this,e.eventTarget=n.e,N(n.f,e,n.v)},Q=function(e,t,r,i,o){o?n[(i?"un":u)+"delegate"](e,t,r,o):n[i?"detach":"on"](e,t,r,o)},W=new B,Y=0,G=function(e,n,t){try{t=decodeURIComponent(t)}catch(e){}R[n]=t},X=function(e){var n,t=W.get(e);return t||(R={},e==(n=e.replace(k,u))&&I.test(n)&&(n=u),e.replace(n,u).replace(V,G),W.set(e,t={a:n,b:R})),{path:t.a,params:q({},t.b)}},ee=function(e,n,t){var r,i,o,a=[];for(i in n)r=n[i]+u,(!t||r||L(t,i))&&(r=encodeURIComponent(r),a.push(o=i+"="+r));return o&&(e+=(e&&(~e.indexOf("?")?"&":"?"))+a.join("&")),e},ne=function(e,n){var t,r={};if(e)for(var i=0,o=e;i<o.length;i++)t=o[i],r[n&&t?t[n]:t]=n?t:1+(0|r[t]);return r},te={config:function(e,n){return n=S,e&&(n=o(e)?q(n,e):n[e]),n},boot:function(e){q(S,e),D(S.ini,function(n){q(S,n,e),D(S.exts,function(){qe.on("changed",Le),he.on("changed",Le),Y=1,Te()})})},toMap:ne,toTry:N,toUrl:ee,parseUrl:X,mix:q,has:L,keys:C,inside:U,node:T,applyStyle:E,guid:_,use:D,Cache:B,nodeId:P},re={fire:function(e,n,t,r){var i,o,a,f,c=this,h=c[g+e];if(n||(n={}),n.type||(n.type=e),h)for(o=(i=h.length)-1;i--;)(f=h[a=r?i:o-i]).f?(f.x=1,N(f.f,n,c),f.x=u):f.x||(h.splice(a,1),o--);(h=c["on"+e])&&N(h,n,c),t&&c.off(e)},on:function(e,n){var t=g+e;(this[t]||(this[t]=[])).push({f:n})},off:function(e,n){var t,r=g+e,i=this[r];if(n){if(i)for(var o=0,a=i;o<a.length;o++)if((t=a[o]).f==n){t.f=u;break}}else delete this[r],delete this["on"+e]}};te.Event=re;var ie={},oe={},ae={},fe=0,ue=function(e){for(var n=0,t=e=(e+u).split(",");n<t.length;n++){var r=t[n];L(oe,r)?oe[r]++:oe[r]=1}return e},ce=function(e){for(var n,t=0,r=e;t<r.length;t++)n=r[t],L(oe,n)&&(--oe[n]||(delete oe[n],delete ie[n]))};var he=q({get:function(e){var n=e?ie[e]:ie;return n},set:function(e){fe=O(e,ie,ae)||fe},digest:function(e){e&&he.set(e),fe&&(fe=0,this.fire("changed",{keys:ae}),ae={})},diff:function(){return ae},clean:function(e){return{ctor:function(){e=ue(e),this.on("destroy",function(){return ce(e)})}}}},re);te.State=he;var se,de,ve,$e,le,pe,ge,me,be="view",we=new B,ye=new B,xe=s.location,ke=0,Ve={query:{},params:{},href:u},Ie=/(?:^.*\/\/[^\/]+|#.*$)/gi,_e=/^[^#]*#?!?/,je=function(e){return this[w][e]||u},Se=function(e,n){e="#!"+e,n?xe.replace(e):xe.hash=e},Te=function(){var e,n,t=Oe().srcHash;Q(s,"hashchange",function(r,i,o){n||(i=Oe(),(e=i.srcHash)!=t&&(o=function(){r.p=1,t=e,n=u,Se(e),Ue()},r={reject:function(){r.p=1,n=u,Se(t)},resolve:o,prevent:function(){n=1}},qe.fire("change",r),n||r.p||o()))}),s.onbeforeunload=function(e,n,t){if(e=e||s.event,n={},qe.fire("pageunload",n),t=n.msg)return e&&(e.returnValue=t),t},Ue()},Ae=d.title,Oe=function(e){e=e||xe.href;var n,t,r,i,a,f=we.get(e);return f||(n=e.replace(Ie,u),t=e.replace(_e,u),r=X(n),i=X(t),a=q({},r[w],i[w]),f={get:je,href:e,srcQuery:n,srcHash:t,query:r,hash:i,params:a},Y&&(!function(e,n){if(de||(de=S.routes||{},ve=S.unmatchView,$e=S.defaultView,le=S.defaultPath||"/",pe=S.rewrite),!e[be]){var t=e.hash[y]||le;pe&&(t=pe(t,e[w],de)),n=de[t]||ve||$e,e[y]=t,e[be]=n,o(n)&&q(e,n)}}(f),we.set(e,f))),f},Ue=function(){var e=Oe(),n=function(e,n){var t=e.href,r=n.href,i=t+g+r,o=ye.get(i);if(!o){var a,f;o={params:f={},force:!t};for(var u=e[w],c=n[w],h=function(e){var n=u[e],t=c[e];n!=t&&(f[e]={from:n,to:t},a=1)},s=0,d=C(u).concat(C(c));s<d.length;s++)h(d[s]);u=e,c=n,f=o,h(y),h(be),ye.set(i,o={a:a,b:o})}return o}(Ve,Ve=e);return!ke&&n.a&&((se=n.b)[y]&&(d.title=e.title||Ae),qe.fire("changed",se)),ke=0,se},qe=q({parse:Oe,diff:Ue,to:function(e,n,t,r){!n&&o(e)&&(n=e,e=u);var i,a,f,c,h=X(e),s=h[w],d=h[y],v=Ve[y],$=Ve[w],l=Ve.query[w];if(q(s,n),d)for(v in l)L(s,v)||(s[v]=u);else $&&(d=v,s=q({},$,s));a=Ve,f=t,c=r,(i=ee(i=d,s,l))!=a.srcHash&&(ke=c,Se(i,f))}},re);te.Router=qe;var Ce=function(e){if(!e.$a&&!e.$b&&e.$cc==e.$rc){e.$cr||(e.$cr=1,e.$ca=0,e.fire("created"));var n=void 0,t=e.id,r=e.pId;(n=Ze[r])&&!L(n.$d,t)&&(n.$d[t]=1,n.$rc++,Ce(n))}},He=function(e,n){if(!e.$ca&&e.$cr){e.$cr=0,e.$ca=1,e.fire("alter",n);var t=void 0,r=e.id,i=e.pId;(t=Ze[i])&&L(t.$d,r)&&(t.$rc--,delete t.$d[r],He(t,n))}},Ze={},Ee=[],Pe=0,Ne=function(e,n,t){if(e&&e.$f!=Pe&&(t=e.$v)&&t.$a>1){(n?function(e,n,t){var r,i=e.$os;if(i)for(var o=0,a=i;o<a.length&&(r=a[o],!(t=L(n,r)));o++);return t}(t,n):yn(t))&&t.$b();for(var r=void 0,i=0,o=e.children();i<o.length;i++)r=o[i],Ne(Ze[r],n)}},Le=function(e){var n,t,i=(ge||(r=d.body,T(t=S.rootId)||(r.id=t),ge=new Me(t)),ge);(n=e[be])?i.mountView(n.to):(Pe=f++,Ne(i,e.keys))},Me=function(e,n,t){var r,i;(t=this).id=e,t.$c={},t.$cc=0,t.$rc=0,t.$g=1,t.$d={},t.$e=[],t.pId=n,i=t,L(Ze,r=e)||(Ze[r]=i,Me.fire("add",{vframe:i}),(r=T(r))&&(r.vframe=i))};q(Me,{all:function(){return Ze},get:function(e){return Ze[e]}},re),q(Me[b],re,{mountView:function(e,n){var t,r,i,o,a,f,u=this,c=u.id,h=u.pId,s=u.$g,d=T(c);!u.$h&&d&&(u.$h=1,u.$i=d.innerHTML),u.unmountView(),u.$a=0,d&&e&&(u[y]=e,t=X(e),i=t[y],r=++s,o=t[w],f=(f=(f=(f=Ze[h])&&f.$v)&&f.$d)&&f.$a,e.indexOf(g)>0&&M(f,o,o),u.$n=t[y],q(o,n),D(i,function(e){if(r==u.$g){if(!e)return S.error(Error("id:"+c+" cannot load:"+i));a=wn(e),i=new e(c,u,o,a),u.$v=i,u.$f=Pe,gn(i),N(i.init,o,i),i.$b(),i.$e||(u.$h=0,i.$f||i.endUpdate())}}))},unmountView:function(){var e,n,t=this,r=t.$v,o=t.id;t.$e=[],r&&(me||(n=1,me={id:o}),t.$a=1,t.unmountZone(0,1),He(t,me),t.$v=0,r.$a>0&&(r.$a=0,r.fire("destroy",0,1,1),ln(r,1),gn(r,1),r.owner=0),r.$a--,(e=T(o))&&t.$h&&i(e).html(t.$i),n&&(me=0)),t.$g++},mountVframe:function(e,n,t){var r,i=this,o=i.id,a=i.$c;return He(i,{id:e}),(r=Ze[e])||(L(a,e)||(i.$o=0,i.$cc++),a[e]=e,(r=Ee.pop())?Me.call(r,e,o):r=new Me(e,o)),r.mountView(n,t),r},mountZone:function(e,n){var t,r,o=this,a=[];e=e||o.id;var f,u=i("#"+e+" ["+x+"]");o.$b=1;for(var c=0,h=u;c<h.length;c++)t=h[c],r=P(t),t.$a||(t.$a=1,a.push([r,t.getAttribute(x)]));for(var s=0,d=a;s<d.length;s++)r=(f=d[s])[0],t=f[1],a[r]?S.error(Error("vf.id duplicate:"+r+" at "+o[y])):o.mountVframe(a[r]=r,t);o.$b=0,n||Ce(o)},unmountVframe:function(e,n){var t,r,i,o;if(e=e?this.$c[e]:this.id,t=Ze[e]){var a=t.$cr,f=t.pId;t.unmountView(),i=a,(o=Ze[r=e])&&(delete Ze[r],Me.fire("remove",{vframe:o,fcc:i}),(r=T(r))&&(r.$a=r.vframe=0)),t.id=t.pId=t.$c=t.$d=t.$h=0,t.off("alter"),t.off("created"),Ee.push(t),(t=Ze[f])&&L(t.$c,e)&&(delete t.$c[e],t.$o=0,t.$cc--,n||Ce(t))}},unmountZone:function(e,n){var t;for(t in this.$c)(!e||t!=e&&U(t,e))&&this.unmountVframe(t,1);n||Ce(this)},parent:function(e,n){for(n=this,e=e>>>0||1;n&&e--;)n=Ze[n.pId];return n},children:function(e){return(e=this).$o||(e.$o=C(e.$c))},invoke:function(e,n){var t,r,i,o,a,f=this.$e;return(r=this.$v)&&r.$f?t=(i=r[e])&&N(i,n,r):((o=f[a=g+e])&&(o.r=n===o.a),o={n:e,a:n,k:a},f.push(o),f[a]=o),t}}),te.Vframe=Me,t[b].invokeView=function(e,n){if(this.length){var t=this[0],r=t.vframe;if(void 0===n)return r&&r.invoke(e);for(var i=0;i<this.length;i++)(r=(t=this[i]).vframe)&&r.invoke(e,n)}};var ze=new B(30,10),Be=/(?:([\w\-]+)\x1e)?([^(]+)\(([\s\S]*)?\)/,Re={},De={},Fe=function(e,n){var t,i,o,a,f,u,h=[],s=e,d=e.getAttribute("mx-"+n),v=[],$=0;if(d&&((a=ze.get(d))||((a={v:(a=d.match(Be)||c)[1],n:a[2],i:a[3]}).p=a.i&&N(Function("return "+a.i),c,e),ze.set(d,a)),a=q({},a,{r:d}),h.push(a)),a&&!a.v||De[n]){if(!(u=e.$a))for(v.push(s);s!=r&&(s=s.parentNode);){if(Ze[i=s.id]||(i=s.$v)){u=i;break}v.push(s)}if(u){for(var l=0,p=v;l<p.length;l++)(d=p[l]).$a=u;s=e.id,Ze[s]&&($=u=s);do{if((t=Ze[u])&&(f=t.$v)){for(i in(o=f.$so)[n])o={r:i,v:u,n:i},i?J(e,i)&&h.push(o):$&&h.unshift(o);if(f.$e&&!$){a&&!a.v&&(a.v=u);break}$=0}}while(t&&(u=t.pId))}}return h},Je=function(e){for(var n,t,i,o,a,f,u,c=e.target,h=e.type,s=[];c!=r;){if((n=Fe(c,h)).length){s=[];for(var d=0,v=n;d<v.length;d++){var $=v[d],l=$.v,p=($.r,$.n),m=$.p,b=$.i;if(f!=l){if(f&&e.isPropagationStopped())break;f=l}if(o=(i=Ze[l])&&i.$v){if((a=o[p+g+h])&&(e.eventTarget=c,u=m||{},b&&b.indexOf(g)>0&&M(o.$d.$a,u,u={}),e[w]=u,N(a,e,o),e.isImmediatePropagationStopped()))break;0}else e.stopPropagation();0}}if((t=c.$)&&t[h]||e.isPropagationStopped())break;s.push(c),c=c.parentNode||r}for(var y=0,x=s;y<x.length;y++)(t=(c=x[y]).$||(c.$={}))[h]=1},Ke={input_value:1,input_checked:1,input_disabled:1,input_readonly:1,textarea_value:1,textarea_checked:1,textarea_disabled:1,textarea_readonly:1,option_selected:1},Qe={area:1,br:1,col:1,embed:1,hr:1,img:1,input:1,param:1,source:1,track:1,wbr:1},We=/^<([a-z\d]+)((?:\s+[-A-Za-z\d_]+(?:="[^"]*")?)*)\s*(\/?)>/,Ye=/([-A-Za-z\d_]+)(?:="([^"]*)")?/g,Ge=/^<\/[a-z\d+]+>/,Xe={},en=/&#?[^\W]+;?/g,nn=d.createElement("div"),tn=function(e){return L(Xe,e)||(nn.innerHTML=e,Xe[e]=nn.innerText),Xe[e]},rn=function(e,n){var t=P(n);e.$c[t]?e.unmountVframe(t,1):e.unmountZone(t,1)},on=function(e,n,t,r){for(var i,o,a,f=0,u=n.i;f<u.length;f++)o=(i=u[f]).d,L(t.j,o)||(i.e?"value"==o?e.value="":e[o]=!1:"id"==o?r.d.push([e,""]):e.removeAttribute(o));for(var c=0,h=t.i;c<h.length;c++)o=(i=h[c]).d,a=i.f,n.j[o]!=a&&(i.e?"value"==o?e.value=a:e[o]=!0:"id"==o?r.d.push([e,a]):e.setAttribute(o,a))},an=function(e,n,t,r,i,o,a,f,u){if(3==(u=e.h))return d.createTextNode(e.b);f="svg"==u?"http://www.w3.org/2000/svg":n.namespaceURI,(r=d.createElementNS(f,u)).innerHTML=e.b;for(var c=0,h=e.i;c<h.length;c++)o=(i=h[c]).d,a=i.f,i.e?"value"==o?r.value=a:r[o]=!0:"id"==o?t.d.push([r,a]):r.setAttribute(o,a);return r},fn=function(e,n,t,r,i,o,a){var f,u,c,h,s,d,v,$,l,p,g,m,b=e.childNodes,w={};if(n){for(f=(s=n.a).length,u=(d=t.a).length,c=0;c<f;c++)(p=(v=s[c]).k)&&(p=w[p]||(w[p]=[])).push({l:b[c],m:v});for(c=0;c<u;c++)if(v=s[c],(p=w[($=d[c]).k])&&(p=p.pop())){if(g=p.l,m=p.m,g!=b[c]){for(s.splice(c,0,v=m),h=s.length;h--;)if(s[h]==m){s.splice(h,1);break}e.insertBefore(g,b[c])}un(b[c],e,v,$,r,i,o,a)}else v?w[v.k]?(s.splice(c,0,$),f++,e.insertBefore(an($,e,r),b[c])):un(b[c],e,v,$,r,i,o,a):e.appendChild(an($,e,r));for(c=u;c<f;c++)l=e.lastChild,rn(i,l),e.removeChild(l),r.c=1}else r.c=1,e.innerHTML=t.b},un=function(e,n,t,r,i,o,a,f){if(t.h==r.h)if(3==t.h)t.b!=r.b&&(e.nodeValue=r.b);else{var u=r.j[x],c=r.b,h=void 0,s=void 0,d=void 0,v=Ze[e.id],$=void 0,l=void 0,p=void 0,m=void 0,b=void 0,k=void 0;u&&v&&($=(p=v.$v).$g,m=X(u),k=c!=v.$i,l=u.indexOf("?")>0||k),u&&v&&v.$n==m[y]?l&&($?(b=m[w],u.indexOf(g)>-1&&M(a,b,b),v.$i=c,v[y]=u,m={keys:f,inner:c,deep:!p.$e,html:k},on(e,t,r,i),N($,[b,m],p)&&p.$b(),s=m.deep):(d=1,s=1,h=1)):(h=1,s=1,d=v),d&&v.unmountVframe(0,1),h&&on(e,t,r,i),s&&!Qe[r.h]&&(i.c=1,fn(e,t,r,i,o,a,f))}else rn(o,e),n.replaceChild(an(r,n,i),e),i.c=1},cn=function(e,n,t,r){var i,o,a,f=e.$b,h=Ze[f],s=h&&h.$v,d={d:[]},$=T(f);if(s&&s.$a>0&&(i=s.$e)){if(t){a=function(e){for(var n,t,r,i,o,a,f,h,s,d,v,$=e.length,l=0,p={a:[],b:e},g=[{c:p}],m=function(e,n){n.replace(Ye,function(n,t,r){r=r||u,"id"==t?v=r:t==x&&r&&!v&&(v=X(r)[y]),a.push({d:t,e:Ke[e+"_"+t],f:r}),s[t]=r})};l<$;)n=1,0==(r=e.slice(l)).indexOf("</")?(i=r.match(Ge))&&(h=(p=g.pop()).c,a=e.slice(p.g,l),"textarea"==h.h?(h.i.push({d:"value",f:a,e:1}),h.j.value=a,h.a=c):h.b=a,p=g[g.length-1].c,l+=i[0].length,n=0):"<"==r[0]&&(i=r.match(We))&&(o=i[1],f=i[3]||Qe[o],a=[],s={},v="",m(o,i[2]),h={k:v,h:o,i:a,j:s,a:[]},l+=i[0].length,p.a.push(h),f||(g.push({c:h,g:l}),p=h),n=0),n&&(l+=(d=(t=r.indexOf("<"))<0?r:r.substring(0,t)).length,h={h:3,b:d.replace(en,tn)},p.a.push(h));return p}(vn(i(n),f)),fn($,e.$d,a,d,h,n,r),e.$d=a;for(var l=0,p=d.d;l<p.length;l++)(o=p[l])[0].id=o[1];d.c&&(s.endUpdate(f),v.fire("htmlchanged",{vId:f}))}s.fire("domready")}},hn=function(e){var n;this.$b=e,this.$c=1,this.$a=((n={vId:e})[g]=1,n),this.$k={}};q(hn[b],{get:function(e,n){return n=this.$a,e&&(n=n[e]),n},set:function(e){var n=this,t=n.$a,r=n.$k;return e&&(n.$c=O(e,t,r)||n.$c),n},digest:function(e,n,t){var r=this;return r.set(e),e=r.$a,n=r.$k,t=r.$c,r.$c=0,r.$k={},cn(r,e,t,n),r},snapshot:function(){return this.$e=p(this.$a),this},altered:function(){if(this.$e)return this.$e!=p(this.$a)}});var sn=/^(\$?)([^<]*)<([^>]+)>$/,dn=/\x1f/g,vn=function(e,n){return(e+u).replace(dn,n)},$n=function(e,n,t){return e.$h?t=e:((t=function(e){N(t.$h,e,this)}).$h=[e],t.$i=1),t.$h=t.$h.concat(n.$h||n),t},ln=function(e,n){var t,r,i=e.$r;for(t in i)r=i[t],(n||r.x)&&pn(i,t,1)},pn=function(e,n,t,r){var i,o,a=e[n];return a&&a!=r&&((i=(o=a.e).destroy)&&t&&N(i,c,o),delete e[n]),o},gn=function(e,n){var t,i,o,a,f,u,c=e.$eo,h=e.$so,s=e.$el,d=e.id;for(t in c)i=t,o=h[t],a=n,void 0,void 0,f=0|Re[i],u=a?-1:1,f&&a!==f||Q(r,i,Je,a),Re[i]=f+u,o&&(De[i]=(0|De[i])+u);for(var v=0,$=s;v<$.length;v++)t=$[v],Q(t.e,t.n,K,n,{i:d,v:e,f:t.f,e:t.e})},mn=[],bn={win:s,doc:d},wn=function(e){if(!e[g]){e[g]=[];var n=e[b],t=void 0,r=void 0,i=void 0,o={},a=[],f={},u=void 0,c=void 0,s=void 0,d=void 0,v=void 0,$={};if(r=n.mixins){for(var l=0,p=r;l<p.length;l++)for(s in u=p[l])t=u[s],i=$[s],"ctor"!=s?(sn.test(s)&&(i?t=$n(i,t):t.$i=1),$[s]=t):e[g].push(t);for(s in $)L(n,s)||(n[s]=$[s])}for(s in n)if(t=n[s],r=s.match(sn)){c=r[1],i=r[2];for(var m=0,w=r[3].split(h);m<w.length;m++){if(d=w[m],u=bn[i],v=1,c){if(u){a.push({f:t,e:u,n:d});continue}v=2,(u=f[d])||(u=f[d]={}),u[i]=1}o[d]=o[d]|v,(u=n[d=i+g+d])?u.$i&&(t.$i?n[d]=$n(u,t):L(n,s)&&(n[d]=t)):n[d]=t}}k="$b",V=(y=n)[x="render"],y[x]=y[k]=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];(I=this).$a>0&&(I.$a++,I.fire("rendercall"),ln(I),N(V,e,I))},n.$eo=o,n.$el=a,n.$so=f,n.$e=n.tmpl,n.$g=n.assign}var y,x,k,V,I;return e[g]},yn=function(e){var n,t,r,i=e.$l;if(i.f&&(i.p&&(n=se[y]),!n&&i.k)){r=se[w];for(var o=0,a=i.k;o<a.length&&(t=a[o],!(n=L(r,t)));o++);}return n},xn=function(e,n,t,r){(r=this).owner=n,r.id=e,r.$l={k:[]},r.$r={},r.$a=1,r.updater=r.$d=new hn(r.id),N(mn,t,r)},kn=xn[b];q(xn,{merge:function(){for(var e,n,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var i=0,o=t;i<o.length;i++)(n=(e=o[i])&&e.ctor)&&mn.push(n),q(kn,e)},extend:function(e,n){var t=this,r=(e=e||{}).ctor,i=[];r&&i.push(r);var o=function(e,n,r,o){t.call(this,e,n,r),N(i.concat(o),r,this)};return o.extend=t.extend,F(o,t,e,n)}}),q(kn,re,{init:l,wrapEvent:function(e){return vn(e,this.id)},beginUpdate:function(e,n){(n=this).$a>0&&n.$f&&n.owner.unmountZone(e,1)},endUpdate:function(e,n,t,r,i){(t=this).$a>0&&(e=e||t.id,n?i=n:(i=t.$f,t.$f=1),(r=t.owner).mountZone(e,n),i||$(t.wrapAsync(function(){!function(e,n,t){for(n=e.$e;n.length;)(t=n.shift()).r||e.invoke(t.n,t.a),delete n[t.k]}(r)}),0))},wrapAsync:function(e,n){var t=this,r=t.$a;return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(r>0&&r==t.$a)return e.apply(n||t,i)}},observeLocation:function(e,n){var t;(t=this.$l).f=1,o(e)&&(n=e[y],e=e[w]),t.p=n,e&&(t.k=(e+u).split(h))},observeState:function(e){this.$os=(e+u).split(h)},capture:function(e,n,t,r){return r=this.$r,n?(pn(r,e,1,n),r[e]={e:n,x:t}):n=(r=r[e])&&r.e,n},release:function(e,n){return pn(this.$r,e,n)},leaveTip:function(e,n){var t=this,r=function(i){var o="a",a="b";"change"!=i.type&&(o="b",a="a"),r[o]?(i.prevent(),i.reject()):n()?(i.prevent(),r[a]=1,t.leaveConfirm(e,function(){r[a]=0,i.resolve()},function(){r[a]=0,i.reject()})):i.resolve()},i=function(t){n()&&(t.msg=e)};qe.on("change",r),qe.on("pageunload",i),t.on("unload",r),t.on("destroy",function(){qe.off("change",r),qe.off("pageunload",i)})},render:l}),te.View=xn;var Vn=e.type,In=e.now,_n=function(){this.id=_("b"),this.$={}};q(_n[b],{get:function(e,n,t){var r=n!=t,i=this.$;if(e){for(var o=a(e)?e.slice():(e+u).split("."),f=void 0;(f=o.shift())&&i;)i=i[f];f&&(i=t)}return r&&Vn(n)!=Vn(i)&&(i=n),i},set:function(e,n){var t;o(e)||((t={})[e]=n,e=t),q(this.$,e)}});var jn=function(e,n,t){(t=this[e])&&(delete this[e],N(t,n,t.e))},Sn=function(e,n,t,r,i){if(e.$d)return e;if(e.$e)return e.enqueue(Sn.bind(e,e,n,t,r,i));e.$e=1,a(n)||(n=[n]);for(var o,f,u,c,h,s,d,v,$,l=e.constructor,p=0,g=l.$f,m=(o=t,f=l,u=e,c=n.length,h=r,s=l.$c,d=[],v=0,$=0,function(e,n){var t,r=this;$++;var i=r.$b,a=i.k;d[e+1]=r;var l,p={bag:r,error:n};if(n?(v=n,f.fire("fail",p),t=1):s.has(a)||(a&&s.set(a,r),i.t=In(),(l=i.a)&&N(l,r,r),(l=i.x)&&f.clear(l),f.fire("done",p),t=1),!u.$d){var g=$==c;g&&(u.$e=0,2==h&&(d[0]=v,N(o,d,u))),1==h&&N(o,[n||null,r,g,e],u)}t&&f.fire("end",p)}),b=0,w=n;b<w.length;b++){var y=w[b];if(y){var x=l.get(y,i),k=x.e,V=k.$b.k,I=m.bind(k,p++),_=void 0;V&&g[V]?g[V].push(I):x.u?(V&&((_=[I]).e=k,g[V]=_,I=jn.bind(g,V)),l.$s(k,I)):I()}}return e},Tn=function(){var e=this;e.id=_("s"),e.$g=[]};q(Tn[b],{all:function(e,n){return Sn(this,e,n,2)},save:function(e,n){return Sn(this,e,n,2,1)},one:function(e,n){return Sn(this,e,n,1)},enqueue:function(e){var n=this;return n.$d||(n.$g.push(e),n.dequeue(n.$h)),n},dequeue:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var t,r=this;r.$e||r.$d||(r.$e=1,$(function(){r.$e=0,r.$d||(t=r.$g.shift())&&N(t,r.$h=e)},0))},destroy:function(e){(e=this).$d=1,e.$g=0}});var An=function(e,n){return[p(n),p(e)].join(g)},On=function(e,n,t,r){(r=e&&e.$b)&&n[r.n]&&t.del(r.k)},Un=q({add:function(e){var n,t=this.$b;a(e)||(e=[e]);for(var r=0,i=e;r<i.length;r++)if(n=i[r]){var o=n.name,f=n.cache;n.cache=0|f,t[o]=n}},create:function(e){var n=this.meta(e),t=0|e.cache||n.cache,r=new _n;r.set(n),r.$b={n:n.name,a:n.after,x:n.cleans,k:t&&An(n,e)},o(e)&&r.set(e);var i=n.before;return i&&N(i,r,r),this.fire("begin",{bag:r}),r},meta:function(e){return this.$b[e.name||e]||e},get:function(e,n){var t,r;return n||(t=this.cached(e)),t||(t=this.create(e),r=1),{e:t,u:r}},clear:function(e){this.$c.each(On,ne((e+u).split(h)))},cached:function(e){var n,t,r=this.$c,i=this.meta(e),o=0|e.cache||i.cache;if(o&&(t=An(i,e)),t){var a=this.$f[t];a?n=a.e:(n=r.get(t))&&In()-n.$b.t>o&&(r.del(t),n=0)}return n}},re);return Tn.extend=function(e,n,t){var r=function(){Tn.call(this)};return r.$s=e,r.$c=new B(n,t),r.$f={},r.$b={},F(r,Tn,null,Un)},te.Service=Tn,q(l[b],re),l.extend=function e(n,t){var r=this,i=n&&n.ctor,o=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];r.apply(this,e),i&&i.apply(this,e)};return o.extend=e,F(o,r,n,t)},te.Base=l,e.add(j,function(){return xn.extend()}),te},{requires:["event","node","dom"]});