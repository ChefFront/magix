/*!3.8.0 MIT kooboy_li@163.com*/KISSY.add("magix",function(e,t,n){var r,i=e.all,o=e.isObject,a=e.isArray,f=0,u=[],c=window,h=document,s=i(h),d=c.setTimeout,$=function(){},v=JSON.stringify,l=/[#?].*$/,p=/([^=&?\/#]+)=?([^&#?]*)/g,m=/(?!^)=|&/,g=function(e){return(e||"mx_")+f++},b=g(),y={rootId:g(),defaultView:b,error:function(e){throw e}},w=function(e){return"object"==typeof e?e:h.getElementById(e)},x=function(e){return!e||"object"!=typeof e},k=function(e,t,n){var r,i,o,a=0;for(o in e)r=e[o],i=t[o],x(r)&&i===r||(n[o]=1,a=1),t[o]=r;return a},I=function(e,t,n){if(e=w(e),t=w(t),e&&t&&!(n=e==t))try{n=16==(16&t.compareDocumentPosition(e))}catch(e){}return n},V=function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)U(t,i)&&(e[i]=t[i])}return e},N=function(e,t,n){t=[];for(n in e)U(e,n)&&t.push(n);return t},S=y.hasOwnProperty,C=i("head"),T=function(e,t){t&&!T[e]&&(T[e]=1,C.append("<style>"+t))},q=function(e,t,n,r,i){t=t||u,a(e)||(e=[e]),a(t)||(t=[t]);for(var o=0,f=e;o<f.length;o++){i=f[o];try{r=i&&i.apply(n,t)}catch(e){y.error(e)}}return r},U=function(e,t){return e&&S.call(e,t)},j=function(e,t,n){var r,i;for(r in t)i=t[r],n[r]="\x1e"==(i+"")[0]?e[i]:i},A=function(e,t,n){n=t.params,j(e,n,n);try{return v(t)}catch(e){}},E=function(e,t){return t.f-e.f||t.t-e.t},O=function(e,t,n,r){(r=this).c=[],r.b=t||5,r.x=r.b+(e||20),r.r=n};V(O.prototype,{get:function(e){var t=this.c["\x1e"+e];return t&&(t.f++,t.t=f++,t=t.v),t},each:function(e,t,n,r){for(var i=0,o=r=(n=this).c;i<o.length;i++)e(o[i].v,t,n)},set:function(e,t){var n=this.c,r="\x1e"+e,i=n[r],o=this.b;if(!i){if(n.length>=this.x)for(n.sort(E);o--;)(i=n.pop()).f>0&&this.del(i.o);i={o:e},n.push(i),n[r]=i}i.v=t,i.f=1,i.t=f++},del:function(e){e="\x1e"+e;var t=this.c,n=t[e],r=this.r;n&&(n.f=-1,n.v="",delete t[e],r&&q(r,n.o))},has:function(e){return U(this.c,"\x1e"+e)}});var P,H=function(t,n){e.use(t&&t+"",function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];n&&n.apply(e,t)})},R=e.extend,L=n.test,Z=function(e,t){t=this,e.eventTarget=t.e,q(t.f,e,t.v)},M=function(e,n,r,i,o){o?t[(i?"un":"")+"delegate"](e,n,r,o):t[i?"detach":"on"](e,n,r,o)},B=new O,D=function(e,t,n){try{n=decodeURIComponent(n)}catch(e){}P[t]=n},F=function(e){var t,n=B.get(e);return n||(P={},e==(t=e.replace(l,""))&&m.test(t)&&(t=""),e.replace(t,"").replace(p,D),B.set(e,n={a:t,b:P})),{path:n.a,params:V({},n.b)}},z=function(e,t,n){var r,i,o,a=[];for(i in t)r=t[i]+"",(!n||r||U(n,i))&&(r=encodeURIComponent(r),a.push(o=i+"="+r));return o&&(e+=(e&&(~e.indexOf("?")?"&":"?"))+a.join("&")),e},J=function(e,t){var n,r={};if(e)for(var i=0,o=e;i<o.length;i++)n=o[i],r[t&&n?n[t]:n]=t?n:1+(0|r[n]);return r},K={config:function(e,t){return t=y,e&&(t=o(e)?V(t,e):t[e]),t},boot:function(e){V(y,e),H(y.ini,function(t){V(y,t,e),H(y.exts,function(){we.on("changed",qe),te.on("changed",qe),me()})})},toMap:J,toTry:q,toUrl:z,parseUrl:F,mix:V,has:U,keys:N,inside:I,node:w,applyStyle:T,guid:g,use:H,Cache:O},Q={fire:function(e,t,n,r){var i,o,a,f,u=this,c=u["\x1e"+e];if(t||(t={}),t.type||(t.type=e),c)for(o=(i=c.length)-1;i--;)(f=c[a=r?i:o-i]).f?(f.x=1,q(f.f,t,u),f.x=""):f.x||(c.splice(a,1),o--);(c=u["on"+e])&&q(c,t,u),n&&u.off(e)},on:function(e,t){var n="\x1e"+e;(this[n]||(this[n]=[])).push({f:t})},off:function(e,t){var n,r="\x1e"+e,i=this[r];if(t){if(i)for(var o=0,a=i;o<a.length;o++)if((n=a[o]).f==t){n.f="";break}}else delete this[r],delete this["on"+e]}};K.Event=Q;var X={},Y={},_={},G=0,W=function(e){for(var t=0,n=e=(e+"").split(",");t<n.length;t++){var r=n[t];U(Y,r)?Y[r]++:Y[r]=1}return e},ee=function(e){for(var t,n=0,r=e;n<r.length;n++)t=r[n],U(Y,t)&&(--Y[t]||(delete Y[t],delete X[t]))},te=V({get:function(e){var t=e?X[e]:X;return t},set:function(e){G=k(e,X,_)||G},digest:function(e){e&&te.set(e),G&&(G=0,this.fire("changed",{keys:_}),_={})},diff:function(){return _},clean:function(e){return{ctor:function(){e=W(e),this.on("destroy",function(){return ee(e)})}}}},Q);K.State=te;var ne,re,ie,oe,ae,fe,ue=new O,ce=new O,he=c.location,se=0,de={query:{},params:{},href:""},$e=/(?:^.*\/\/[^\/]+|#.*$)/gi,ve=/^[^#]*#?!?/,le=function(e){return this.params[e]||""},pe=function(e,t){e="#!"+e,t?he.replace(e):he.hash=e},me=function(){var e,t,n=be().srcHash;M(c,"hashchange",function(r,i,o){t||(i=be(),(e=i.srcHash)!=n&&(o=function(){r.p=1,n=e,t="",pe(e),ye()},r={reject:function(){r.p=1,t="",pe(n)},resolve:o,prevent:function(){t=1}},we.fire("change",r),t||r.p||o()))}),c.onbeforeunload=function(e,t,n){if(e=e||c.event,t={},we.fire("pageunload",t),n=t.msg)return e&&(e.returnValue=n),n},ye()},ge=h.title,be=function(e){e=e||he.href;var t,n,r,i,a,f=ue.get(e);return f||(t=e.replace($e,""),n=e.replace(ve,""),r=F(t),i=F(n),a=V({},r.params,i.params),function(e,t){if(re||(re=y.routes||{},ie=y.unmatchView,oe=y.defaultView,ae=y.defaultPath||"/",fe=y.rewrite),!e.view){var n=e.hash.path||0||ae;fe&&(n=fe(n,e.params,re)),t=re[n]||ie||oe,e.path=n,e.view=t,o(t)&&V(e,t)}}(f={get:le,href:e,srcQuery:t,srcHash:n,query:r,hash:i,params:a}),ue.set(e,f)),f},ye=function(){var e=be(),t=function(e,t){var n=e.href,r=n+"\x1e"+t.href,i=ce.get(r);if(!i){var o,a;i={params:a={},force:!n};for(var f=e.params,u=t.params,c=function(e){var t=f[e],n=u[e];t!=n&&(a[e]={from:t,to:n},o=1)},h=0,s=N(f).concat(N(u));h<s.length;h++)c(s[h]);f=e,u=t,a=i,c("path"),c("view"),ce.set(r,i={a:o,b:i})}return i}(de,de=e);return!se&&t.a&&((ne=t.b).path&&(h.title=e.title||ge),we.fire("changed",ne)),se=0,ne},we=V({parse:be,diff:ye,to:function(e,t,n,r){!t&&o(e)&&(t=e,e="");var i=F(e),a=i.params,f=i.path,u=de.path,c=de.params,h=de.query.params;if(V(a,t),f)for(u in h)U(a,u)||(a[u]="");else c&&(f=u,a=V({},c,a));!function(e,t,n,r,i,o){(e=z(e,t,o))!=n.srcHash&&(se=i,pe(e,r))}(f,a,de,n,r,h)}},Q);K.Router=we;var xe,ke,Ie=function(e){if(!e.$a&&!e.$b&&e.$cc==e.$rc){e.$cr||(e.$cr=1,e.$ca=0,e.fire("created"));var t=void 0,n=e.id,r=e.pId;(t=Ne[r])&&!U(t.$d,n)&&(t.$d[n]=1,t.$rc++,Ie(t))}},Ve=function(e,t){if(!e.$ca&&e.$cr){e.$cr=0,e.$ca=1,e.fire("alter",t);var n=void 0,r=e.id,i=e.pId;(n=Ne[i])&&U(n.$d,r)&&(n.$rc--,delete n.$d[r],Ve(n,t))}},Ne={},Se=[],Ce=0,Te=function(e,t,n){if(e&&e.$f!=Ce&&(n=e.$v)&&n.$a>1){(t?function(e,t,n){var r,i=e.$os;if(i)for(var o=0,a=i;o<a.length&&(r=a[o],!(n=U(t,r)));o++);return n}(n,t):st(n))&&n.$b();for(var r=void 0,i=0,o=e.children();i<o.length;i++)r=o[i],Te(Ne[r],t)}},qe=function(e){var t,n=function(e){return xe||(r=h.body,w(e=y.rootId)||(r.id=e),xe=new Ue(e)),xe}();(t=e.view)?n.mountView(t.to):(Ce=f++,Te(n,e.keys))},Ue=function(e,t,n){(n=this).id=e,n.$c={},n.$cc=0,n.$rc=0,n.$g=1,n.$d={},n.$e=[],n.pId=t,function(e,t){U(Ne,e)||(Ne[e]=t,Ue.fire("add",{vframe:t}),(e=w(e))&&(e.vframe=t))}(e,n)};V(Ue,{all:function(){return Ne},get:function(e){return Ne[e]}},Q),V(Ue.prototype,Q,{mountView:function(e,t){var n,r,i,o,a,f,u=this,c=u.id,h=u.pId,s=u.$g,d=w(c);!u.$h&&d&&(u.$h=1,u.$i=d.innerHTML),u.unmountView(),u.$a=0,d&&e&&(u.path=e,n=F(e),i=n.path,r=++s,o=n.params,f=(f=(f=(f=Ne[h])&&f.$v)&&f.$d)&&f.$a,e.indexOf("\x1e")>0&&j(f,o,o),u.$j=A(f,n),u.$n=n.path,V(o,t),H(i,function(e){if(r==u.$g){if(!e)return y.error(Error("id:"+c+" cannot load:"+i));a=ht(e),i=new e({owner:u,id:c},o,a);u.$v=i,u.$f=Ce,ft(i),q(i.init,o,i),i.$b(),i.$e||(u.$h=0,i.$f||i.endUpdate())}}))},unmountView:function(){var e,t,n=this,r=n.$v,o=n.id;n.$e=[],r&&(ke||(t=1,ke={id:o}),n.$a=1,n.unmountZone(0,1),Ve(n,ke),n.$v=0,r.$a>0&&(r.$a=0,r.fire("destroy",0,1,1),ot(r,1),ft(r,1),r.owner=0),r.$a--,(e=w(o))&&n.$h&&i(e).html(n.$i),t&&(ke=0)),n.$g++},mountVframe:function(e,t,n){var r,i=this,o=i.id,a=i.$c;return Ve(i,{id:e}),(r=Ne[e])||(U(a,e)||(i.$o=0,i.$cc++),a[e]=e,(r=Se.pop())?Ue.call(r,e,o):r=new Ue(e,o)),r.mountView(t,n),r},mountZone:function(e,t){var n,r,o=this,a=[];e=e||o.id;var f=i("#"+e+" [mx-view]");o.$b=1;for(var u=0,c=f;u<c.length;u++)r=(n=c[u]).id||(n.id=g()),n.$m||(n.$m=1,a.push([r,n.getAttribute("mx-view")]));for(var h=0,s=a;h<s.length;h++)r=(d=s[h])[0],n=d[1],a[r]?y.error(Error("vf.id duplicate:"+r+" at "+o.path)):o.mountVframe(a[r]=r,n);o.$b=0,t||Ie(o);var d},unmountVframe:function(e,t){var n;if(e=e?this.$c[e]:this.id,n=Ne[e]){var r=n.$cr,i=n.pId;n.unmountView(),function(e,t,n){(n=Ne[e])&&(delete Ne[e],Ue.fire("remove",{vframe:n,fcc:t}),(e=w(e))&&(e.$m=e.vframe=0))}(e,r),n.id=n.pId=n.$c=n.$d=n.$h=0,n.off("alter"),n.off("created"),Se.push(n),(n=Ne[i])&&U(n.$c,e)&&(delete n.$c[e],n.$o=0,n.$cc--,t||Ie(n))}},unmountZone:function(e,t){var n;for(n in this.$c)(!e||n!=e&&I(n,e))&&this.unmountVframe(n,1);t||Ie(this)},parent:function(e,t){for(t=this,e=e>>>0||1;t&&e--;)t=Ne[t.pId];return t},children:function(e){return(e=this).$o||(e.$o=N(e.$c))},invoke:function(e,t){var n,r,i,o,a,f=this.$e;return(r=this.$v)&&r.$f?n=(i=r[e])&&q(i,t,r):((o=f[a="\x1e"+e])&&(o.r=t===o.a),o={n:e,a:t,k:a},f.push(o),f[a]=o),n}}),K.Vframe=Ue,n.prototype.invokeView=function(e,t){if(this.length){var n=this[0],r=n.vframe;if(void 0===t)return r&&r.invoke(e);for(var i=0;i<this.length;i++)(r=(n=this[i]).vframe)&&r.invoke(e,t)}};var je=new O(30,10),Ae=/(?:([\w\-]+)\x1e)?([^(]+)\(([\s\S]*)?\)/,Ee={},Oe={},Pe=function(e,t){var n,i,o,a,f,c,h,s=[],d=e,$=e.getAttribute("mx-"+t),v=[],l=0;if($&&((f=je.get($))||((f={v:(f=$.match(Ae)||u)[1],n:f[2],i:f[3]}).p=f.i&&q(Function("return "+f.i),u,e),je.set($,f)),f=V({},f,{r:$}),s.push(f)),f&&!f.v||Oe[t]){if(!(h=e.$a))for(v.push(d);d!=r&&(d=d.parentNode);){if(Ne[i=d.id]||(i=d.$v)){h=i;break}v.push(d)}if(h){for(var p=0,m=v;p<m.length;p++)($=m[p]).$a=h;d=e.id,Ne[d]&&(l=h=d);do{if((n=Ne[h])&&(c=n.$v)){a=(o=c.$so)[t];for(i in a)o={r:i,v:h,n:i},i?L(e,i)&&s.push(o):l&&s.unshift(o);if(c.$e&&!l){f&&!f.v&&(f.v=h);break}l=0}}while(n&&(h=n.pId))}}return s},He=function(e){for(var t,n,i,o,a,f,u,c,h=e.target,s=e.type,d=[];h!=r;){if((t=Pe(h,s)).length){d=[];for(var $=0,v=t;$<v.length;$++){var l=v[$],p=l.v,m=(l.r,l.n),g=l.p,b=l.i;if(u!=p){if(u&&e.isPropagationStopped())break;u=p}if(i=Ne[p],(o=i&&i.$v)&&(a=m+"\x1e"+s,(f=o[a])&&(e.eventTarget=h,c=g||{},b&&b.indexOf("\x1e")>0&&j(o.$d.$a,c,c={}),e.params=c,q(f,e,o),e.isImmediatePropagationStopped())))break}}if((n=h.$)&&n[s]||e.isPropagationStopped())break;d.push(h),h=h.parentNode||r}for(var y=0,w=d;y<w.length;y++)(n=(h=w[y]).$||(h.$={}))[s]=1},Re=function(e,t,n){var i=0|Ee[e],o=n?-1:1;i&&n!==i||M(r,e,He,n),Ee[e]=i+o,t&&(Oe[e]=(0|Oe[e])+o)},Le=/\\|'/g,Ze=/\r|\n/g,Me=/<%([@=!])?([\s\S]*?)%>|$/g,Be=new O,De=function(e,t){var n=Be.get(e);return n||(n=function(e){var t=0,n="$p+='";return e.replace(Me,function(r,i,o,a){return n+=e.slice(t,a).replace(Le,"\\$&").replace(Ze,"\\n"),t=a+r.length,"@"==i?n+="';$p+=$i("+o+");$p+='":"="==i?n+="'+$e("+o+")+'":"!"==i?n+="'+$n("+o+")+'":o&&(n+="';"+o+";$p+='"),r}),n+="';",n="var $t,$p='',$em={'&':'amp','<':'lt','>':'gt','\"':'#34','\\'':'#39','`':'#96'},$er=/[&<>\"'`]/g,$n=function(v){return v==null?'':''+v},$ef=function(m){return '&'+$em[m]+';'},$e=function(v){return $n(v).replace($er,$ef)},$i=function(v,k,f){for(f=$$[$g];--f;)if($$[k=$g+f]===v)return k;$$[k=$g+$$[$g]++]=v;return k},$um={'!':'%21','\\'':'%27','(':'%28',')':'%29','*':'%2A'},$uf=function(m){return $um[m]},$uq=/[!')(*]/g,$eu=function(v){return encodeURIComponent($n(v)).replace($uq,$uf)},$qr=/[\\\\'\"]/g,$eq=function(v){return $n(v).replace($qr,'\\\\$&')};"+n+"return $p",Function("$g","$$",n)}(e),Be.set(e,n)),n("\x1e",t)},Fe={option:[1,"<select multiple>"],thead:[1,"<table>"],col:[2,"<table><colgroup>"],tr:[2,"<table><tbody>"],td:[3,"<table><tbody><tr>"],area:[1,"<map>"],param:[1,"<object>"],all:[0,""]},ze=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i;Fe.optgroup=Fe.option,Fe.tbody=Fe.tfoot=Fe.colgroup=Fe.caption=Fe.thead,Fe.th=Fe.td;var Je=h.implementation.createHTMLDocument(""),Ke=Je.createElement("base");Ke.href=h.location.href,Je.head.appendChild(Ke);var Qe=function(e,t){var n=function(e){return e.id||(e.id=g())}(t);e.$c[n]?e.unmountVframe(n,1):e.unmountZone(n,1)},Xe={INPUT:[{a:"defaultValue",b:"value"},{a:"defaultChecked",b:"checked"},{a:"disabled"},{a:"readonly"}],OPTION:[{a:"selected"}]};Xe.TEXTAREA=Xe.INPUT;var Ye=function(e,t,n,r,i,o){for(var a,f,u,c,h=e.firstChild,s=t.firstChild,d=0,$={};h;)d++,u=(f=h).id,h=h.nextSibling,u&&($[u]=f);for(h=e.firstChild;s;)d--,a=s,s=s.nextSibling,(u=a.id)&&(c=$[u])?(delete $[u],c!==h?e.insertBefore(c,h):h=h.nextSibling,_e(c,a,e,n,r,i,o)):h?($[u=h.id]&&delete $[u],f=h,h=h.nextSibling,_e(f,a,e,n,r,i,o)):(e.appendChild(a),n.c=1);for(u in $)d--,f=$[u],Qe(r,f),e.removeChild(f),n.c=1;for(;--d>=0;)f=e.lastChild,Qe(r,f),e.removeChild(f),n.c=1},_e=function(e,t,n,r,i,o,a){if(e.nodeType===t.nodeType)if(1===e.nodeType)if(e.nodeName===t.nodeName){var f=t.getAttribute("mx-view"),u=t.innerHTML,c=void 0,h=void 0,s=void 0,d=Ne[e.id],$=void 0,v=void 0,l=void 0,p=void 0,m=void 0,g=void 0,b=void 0,y=void 0;f&&d?(p=d.$j,$=d.$v,l=(v=F(f)).params,f.indexOf("\x1e")>-1&&j(o,l,l),g=p!=(m=A(o,v)),b=u!=d.$i,y=!$.$e,(!p||y||b||g)&&(d.$n==v.path&&$.$g?(g&&e.setAttribute("mx-view",f),d.$i=u,d.$j=m,d.path=f,m={keys:a,node:t,deep:y,data:g,html:b},q($.$g,[l,m],$)&&$.$b(),h=m.deep):(s=1,h=1,c=1))):(c=1,h=1,s=d),s&&d.unmountVframe(0,1),c&&function(e,t,n,r){var i,o,a,f,u,c,h=e.attributes,s=t.attributes,d=e.nodeName,$=Xe[d];if($)for(var v=0,l=$;v<l.length;v++)e[(u=l[v]).a]!=t[u.a]&&(e[a=u.b||u.a]=t[a]);for(a=h.length;a--;)f=(i=h[a]).namespaceURI,u=i.localName,(o=s.getNamedItemNS(f,u))||r&&"id"==u||h.removeNamedItemNS(f,u);for(a=s.length;a--;)f=(i=s[a]).namespaceURI,u=i.localName,o=h.getNamedItemNS(f,u),(c=r&&"id"==u)&&(d=i.value,i.value=""),o?o.value!==i.value&&(o.value=i.value,c&&n.d.push([o,d])):(s.removeNamedItemNS(f,u),h.setNamedItemNS(i),c&&n.d.push([i,d]))}(e,t,r,s),h&&(r.c=1,Ye(e,t,r,i,o,a))}else Qe(i,e),n.replaceChild(t,e),r.c=1;else e.nodeValue!==t.nodeValue&&(e.nodeValue=t.nodeValue,r.c=1);else Qe(i,e),n.replaceChild(t,e),r.c=1},Ge=/\d+\x1d/g,We=function(e,t,n,r){var i,o,a,f=e.$b,u=Ne[f],c=u&&u.$v,h={d:[]},d=w(f);if(c&&c.$a>0&&(i=c.$e)){if(!i["\x1e"]){i["\x1e"]=1;var $=function(e){return $[e].tmpl},v=void 0,l=i.subs;if(l){for(a=l.length;a--;)(v=l[a]).s&&($[v.s]=v,v.tmpl=v.tmpl.replace(Ge,$));i.html=i.html.replace(Ge,$)}}if(n){o=rt(De(i.html,t),f),Ye(d,function(e){var t=Je.createElement("div"),n=(ze.exec(e)||[0,""])[1].toLowerCase(),r=Fe[n]||Fe.all;t.innerHTML=r[1]+e;for(var i=r[0];i--;)t=t.lastChild;return t}(o),h,u,t,r);for(var p=0,m=h.d;p<m.length;p++)(a=m[p])[0].value=a[1];h.c&&(c.endUpdate(f),s.fire("htmlchanged",{vId:f}))}c.fire("domready")}},et=function(e){this.$b=e,this.$c=1,this.$a=(t={vId:e},t["\x1e"]=1,t),this.$k={};var t};V(et.prototype,{get:function(e,t){return t=this.$a,e&&(t=t[e]),t},set:function(e){var t=this,n=t.$a,r=t.$k;return e&&(t.$c=k(e,n,r)||t.$c),t},digest:function(e,t,n){var r=this;return r.set(e),e=r.$a,t=r.$k,n=r.$c,r.$c=0,r.$k={},We(r,e,n,t),r},snapshot:function(){return this.$d=v(this.$a),this},altered:function(){if(this.$d)return this.$d!=v(this.$a)}});var tt=/^(\$?)([^<]*)<([^>]+)>$/,nt=/\x1f/g,rt=function(e,t){return(e+"").replace(nt,t)},it=function(e,t,n){return e.$h?n=e:((n=function(e){q(n.$h,e,this)}).$h=[e],n.$i=1),n.$h=n.$h.concat(t.$h||t),n},ot=function(e,t){var n,r,i=e.$r;for(n in i)r=i[n],(t||r.x)&&at(i,n,1)},at=function(e,t,n,r){var i,o,a=e[t];return a&&a!=r&&((i=(o=a.e).destroy)&&n&&q(i,u,o),delete e[t]),o},ft=function(e,t){var n,r=e.$eo,i=e.$so,o=e.$el,a=e.id;for(n in r)Re(n,i[n],t);for(var f=0,u=o;f<u.length;f++)n=u[f],M(n.e,n.n,Z,t,{i:a,v:e,f:n.f,e:n.e})},ut=[],ct={win:c,doc:h},ht=function(e){if(!e["\x1e"]){e["\x1e"]=[];var t=e.prototype,n=void 0,r=void 0,i=void 0,o=void 0,a={},f=[],u={},c=void 0,h=void 0,s=void 0,d=void 0,$=void 0,v={};if(r=t.mixins){for(var l=0,p=r;l<p.length;l++){c=p[l];for(s in c)n=c[s],i=v[s],"ctor"!=s?(tt.test(s)&&(i?n=it(i,n):n.$i=1),v[s]=n):e["\x1e"].push(n)}for(s in v)U(t,s)||(t[s]=v[s])}for(s in t)if(n=t[s],r=s.match(tt)){h=r[1],i=r[2];for(var m=0,g=o=(o=r[3]).split(",");m<g.length;m++){if(d=g[m],c=ct[i],$=1,h){if(c){f.push({f:n,e:c,n:d});continue}$=2,(c=u[d])||(c=u[d]={}),c[i]=1}a[d]=a[d]|$,(c=t[d=i+"\x1e"+d])?c.$i&&(n.$i?t[d]=it(c,n):U(t,s)&&(t[d]=n)):t[d]=n}}!function(e,t,n,r,i){r=e[t],e[t]=e[n]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];(i=this).$a>0&&(i.$a++,i.fire("rendercall"),ot(i),q(r,e,i))}}(t,"render","$b"),t.$eo=a,t.$el=f,t.$so=u,t.$e=t.tmpl,t.$g=t.assign}return e["\x1e"]},st=function(e){var t,n,r,i=e.$l;if(i.f&&(i.p&&(t=ne.path),!t&&i.k)){r=ne.params;for(var o=0,a=i.k;o<a.length&&(n=a[o],!(t=U(r,n)));o++);}return t},dt=function(e,t){V(t=this,e),t.$l={k:[]},t.$r={},t.$a=1,t.updater=t.$d=new et(t.id),q(ut,e,t)},$t=dt.prototype;V(dt,{merge:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n,r,i=0,o=e;i<o.length;i++)(r=(n=o[i])&&n.ctor)&&ut.push(r),V($t,n)},extend:function(e,t){var n=this,r=(e=e||{}).ctor,i=[];r&&i.push(r);var o=function(e,t,r){n.call(this,e,t),q(i.concat(r),t,this)};return o.extend=n.extend,R(o,n,e,t)}}),V($t,Q,{init:$,wrapEvent:function(e){return rt(e,this.id)},beginUpdate:function(e,t){(t=this).$a>0&&t.$f&&t.owner.unmountZone(e,1)},endUpdate:function(e,t,n,r,i){(n=this).$a>0&&(e=e||n.id,t?i=t:(i=n.$f,n.$f=1),(r=n.owner).mountZone(e,t),i||d(n.wrapAsync(function(){!function(e,t,n){for(t=e.$e;t.length;)(n=t.shift()).r||e.invoke(n.n,n.a),delete t[n.k]}(r)}),0))},wrapAsync:function(e,t){var n=this,r=n.$a;return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(r>0&&r==n.$a)return e.apply(t||n,i)}},observeLocation:function(e,t){var n;(n=this.$l).f=1,o(e)&&(t=e.path,e=e.params),n.p=t,e&&(n.k=(e+"").split(","))},observeState:function(e){this.$os=(e+"").split(",")},capture:function(e,t,n,r){return r=this.$r,t?(at(r,e,1,t),r[e]={e:t,x:n}):t=(r=r[e])&&r.e,t},release:function(e,t){return at(this.$r,e,t)},leaveTip:function(e,t){var n=this,r=function(i){var o="a",a="b";"change"!=i.type&&(o="b",a="a"),r[o]?(i.prevent(),i.reject()):t()?(i.prevent(),r[a]=1,n.leaveConfirm(e,function(){r[a]=0,i.resolve()},function(){r[a]=0,i.reject()})):i.resolve()},i=function(n){t()&&(n.msg=e)};we.on("change",r),we.on("pageunload",i),n.on("unload",r),n.on("destroy",function(){we.off("change",r),we.off("pageunload",i)})},render:$}),K.View=dt;var vt=e.type,lt=e.now,pt=function(){this.id=g("b"),this.$={}};V(pt.prototype,{get:function(e,t,n){var r=t!=n,i=this.$;if(e){for(var o=a(e)?e.slice():(e+"").split("."),f=void 0;(f=o.shift())&&i;)i=i[f];f&&(i=n)}return r&&vt(t)!=vt(i)&&(i=t),i},set:function(e,t){o(e)||((n={})[e]=t,e=n),V(this.$,e);var n}});var mt=function(e,t,n){(n=this[e])&&(delete this[e],q(n,t,n.e))},gt=function(e,t,n,r,i){if(e.$d)return e;if(e.$e)return e.enqueue(gt.bind(e,e,t,n,r,i));e.$e=1,a(t)||(t=[t]);for(var o=e.constructor,f=0,u=o.$f,c=function(e,t,n,r,i,o){var a=[],f=0,u=0;return function(c,h){var s;u++;var d=this.$b,$=d.k;a[c+1]=this;var v,l={bag:this,error:h};if(h?(f=h,t.fire("fail",l),s=1):o.has($)||($&&o.set($,this),d.t=lt(),(v=d.a)&&q(v,this,this),(v=d.x)&&t.clear(v),t.fire("done",l),s=1),!n.$d){var p=u==r;p&&(n.$e=0,2==i&&(a[0]=f,q(e,a,n))),1==i&&q(e,[h||null,this,p,c],n)}s&&t.fire("end",l)}}(n,o,e,t.length,r,o.$c),h=0,s=t;h<s.length;h++){var d=s[h];if(d){var $=o.get(d,i),v=$.e,l=v.$b.k,p=c.bind(v,f++),m=void 0;l&&u[l]?u[l].push(p):$.u?(l&&((m=[p]).e=v,u[l]=m,p=mt.bind(u,l)),o.$s(v,p)):p()}}return e},bt=function(){var e=this;e.id=g("s"),e.$g=[]};V(bt.prototype,{all:function(e,t){return gt(this,e,t,2)},save:function(e,t){return gt(this,e,t,2,1)},one:function(e,t){return gt(this,e,t,1)},enqueue:function(e){var t=this;return t.$d||(t.$g.push(e),t.dequeue(t.$h)),t},dequeue:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n,r=this;r.$e||r.$d||(r.$e=1,d(function(){r.$e=0,r.$d||(n=r.$g.shift())&&q(n,r.$h=e)},0))},destroy:function(e){(e=this).$d=1,e.$g=0}});var yt=function(e,t){return[v(t),v(e)].join("\x1e")},wt=function(e,t,n,r){(r=e&&e.$b)&&t[r.n]&&n.del(r.k)},xt=V({add:function(e){var t,n=this.$b;a(e)||(e=[e]);for(var r=0,i=e;r<i.length;r++)if(t=i[r]){var o=t.name,f=t.cache;t.cache=0|f,n[o]=t}},create:function(e){var t=this.meta(e),n=0|e.cache||t.cache,r=new pt;r.set(t),r.$b={n:t.name,a:t.after,x:t.cleans,k:n&&yt(t,e)},o(e)&&r.set(e);var i=t.before;return i&&q(i,r,r),this.fire("begin",{bag:r}),r},meta:function(e){return this.$b[e.name||e]||e},get:function(e,t){var n,r;return t||(n=this.cached(e)),n||(n=this.create(e),r=1),{e:n,u:r}},clear:function(e){this.$c.each(wt,J((e+"").split(",")))},cached:function(e){var t,n,r=this.$c,i=this.meta(e),o=0|e.cache||i.cache;if(o&&(n=yt(i,e)),n){var a=this.$f[n];a?t=a.e:(t=r.get(n))&&lt()-t.$b.t>o&&(r.del(n),t=0)}return t}},Q);return bt.extend=function(e,t,n){var r=function(){bt.call(this)};return r.$s=e,r.$c=new O(t,n),r.$f={},r.$b={},R(r,bt,null,xt)},K.Service=bt,V($.prototype,Q),$.extend=function e(t,n){var r=this,i=t&&t.ctor,o=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r.apply(this,e),i&&i.apply(this,e)};return o.extend=e,R(o,r,t,n)},K.Base=$,e.add(b,function(){return dt.extend()}),K},{requires:["event","node","dom"]});