/*!3.8.6 MIT kooboy_li@163.com*/define("magix",["$"],function(t){var e,n,r=t("$"),i=r.isPlainObject,o=r.isArray,a=0,f="",u=[],c=",",s=null,h=window,d=document,v=r(d),$=h.setTimeout,l="changed",p="change",g="pageunload",m="value",b="mxs",y="mxa",w=function(){},x=JSON.stringify,k="\x1e",A="object",V="prototype",I="params",S="path",C="mx-view",T=/[#?].*$/,N=/([^=&?\/#]+)=?([^&#?]*)/g,j=/(?!^)=|&/,q=function(t){return(t||"mx_")+a++},E=q(),P={rootId:q(),defaultView:E,error:function(t){throw t}},U=function(t){return typeof t==A?t:d.getElementById(t)},O=function(t){return!t||typeof t!=A},H=function(t,e,n){var r,i,o,a=0;for(o in t)r=t[o],i=e[o],O(r)&&i===r||(n[o]=1,a=1),e[o]=r;return a},M=function(t,e,n){if(t=U(t),e=U(e),t&&e&&!(n=t==e))try{n=16==(16&e.compareDocumentPosition(t))}catch(t){}return n},L=function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])F(e,i)&&(t[i]=e[i]);return t},Z=function(t,e,n){for(n in e=[],t)F(t,n)&&e.push(n);return e},R=P.hasOwnProperty,_=r("head"),B=function(t,e){e&&!B[t]&&(B[t]=1,_.append("<style>"+e))},D=function(t){return t.id||(t.$a=1,t.id=q())},z=function(t,e,n,r,i){e=e||u,o(t)||(t=[t]),o(e)||(e=[e]);for(var a=0,f=t;a<f.length;a++){i=f[a];try{r=i&&i.apply(n,e)}catch(t){P.error(t)}}return r},F=function(t,e){return t&&R.call(t,e)},J=function(t,e,n){var r,i;if(O(e))(r=e+f)[0]==k&&(e=t[r]);else for(r in e)i=e[r],n&&!O(i)&&J(t,i,n),r[0]==k&&(delete e[r],r=t[r]),e[r]=(i+f)[0]==k?t[i]:i;return e},Q=function(t,e){return e.f-t.f||e.t-t.t},X=function(t,e,n,r){(r=this).c=[],r.b=e||5,r.x=r.b+(t||20),r.r=n};L(X[V],{get:function(t){var e=this.c[k+t];return e&&(e.f++,e.t=a++,e=e.v),e},each:function(t,e,n){for(var r=0,i=(n=this).c;r<i.length;r++)t(i[r].v,e,n)},set:function(t,e){var n=this.c,r=k+t,i=n[r],o=this.b;if(!i){if(n.length>=this.x)for(n.sort(Q);o--;)(i=n.pop()).f>0&&this.del(i.o);i={o:t},n.push(i),n[r]=i}i.v=e,i.f=1,i.t=a++},del:function(t){t=k+t;var e=this.c,n=e[t],r=this.r;n&&(n.f=-1,n.v=f,delete e[t],r&&z(r,n.o))},has:function(t){return F(this.c,k+t)}});var G,K=function(e,r){if(e){var i=[],a=void 0;if(E==e)n||(n=ke.extend()),r(n);else if(h.seajs)seajs.use(e,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0,o=t;n<o.length;n++){var a=o[n];i.push(a&&a.__esModule&&a.default||a)}r&&r.apply(void 0,i)});else{o(e)||(e=[e]);for(var f=0,u=e;f<u.length;f++)a=u[f],a=t(a),i.push(a&&a.__esModule&&a.default||a);r&&r.apply(void 0,i)}}else r()},W=function(){},Y=function(t,e,n,r,i){return W[V]=e[V],i=new W,L(i,n),L(t,r),i.constructor=t,t[V]=i,t},tt=r.find||r.zepto,et=tt.matchesSelector||tt.matches,nt=function(t,e){e=t.data,t.eventTarget=e.e,z(e.f,t,e.v)},rt=function(t,e,n,i,o){o&&(e+="."+o.i),i?r(t).off(e,n):r(t).on(e,o,n)},it=new X,ot=0,at=function(t,e,n){try{n=decodeURIComponent(n)}catch(t){}G[e]=n},ft=function(t){var e,n=it.get(t);return n||(G={},t==(e=t.replace(T,f))&&j.test(e)&&(e=f),t.replace(e,f).replace(N,at),it.set(t,n={a:e,b:G})),{path:n.a,params:L({},n.b)}},ut=function(t,e,n){var r,i,o,a=[];for(i in e)r=e[i]+f,(!n||r||F(n,i))&&(r=encodeURIComponent(r),a.push(o=i+"="+r));return o&&(t+=(t&&(~t.indexOf("?")?"&":"?"))+a.join("&")),t},ct=function(t,e){var n,r={};if(t)for(var i=0,o=t;i<o.length;i++)n=o[i],r[e&&n?n[e]:n]=e?n:1+(0|r[n]);return r},st={config:function(t,e){return e=P,t&&(e=i(t)?L(e,t):e[t]),e},boot:function(t){L(P,t),K(P.ini,function(e){L(P,e,t),K(P.exts,function(){Lt.on(l,Dt),mt.on(l,Dt),ot=1,Ut()})})},toMap:ct,toTry:z,toUrl:ut,parseUrl:ft,mix:L,has:F,keys:Z,inside:M,node:U,applyStyle:B,guid:q,use:K,Cache:X,nodeId:D},ht={fire:function(t,e,n,r){var i,o,a,u,c=this,s=c[k+t];if(e||(e={}),e.type||(e.type=t),s)for(o=(i=s.length)-1;i--;)(u=s[a=r?i:o-i]).f?(u.x=1,z(u.f,e,c),u.x=f):u.x||(s.splice(a,1),o--);(s=c["on"+t])&&z(s,e,c),n&&c.off(t)},on:function(t,e){var n=k+t;(this[n]||(this[n]=[])).push({f:e})},off:function(t,e){var n,r=k+t,i=this[r];if(e){if(i)for(var o=0,a=i;o<a.length;o++)if((n=a[o]).f==e){n.f=f;break}}else delete this[r],delete this["on"+t]}};st.Event=ht;var dt={},vt={},$t={},lt=0,pt=function(t){for(var e=0,n=t=(t+f).split(",");e<n.length;e++){var r=n[e];F(vt,r)?vt[r]++:vt[r]=1}return t},gt=function(t){for(var e,n=0,r=t;n<r.length;n++)e=r[n],F(vt,e)&&(--vt[e]||(delete vt[e],delete dt[e]))};var mt=L({get:function(t){var e=t?dt[t]:dt;return e},set:function(t){return lt=H(t,dt,$t)||lt,this},digest:function(t){t&&mt.set(t),lt&&(lt=0,this.fire(l,{keys:$t}),$t={})},diff:function(){return $t},clean:function(t){return{ctor:function(){t=pt(t),this.on("destroy",function(){return gt(t)})}}}},ht);st.State=mt;var bt,yt,wt,xt,kt,At,Vt="view",It=new X,St=new X,Ct=h.location,Tt=0,Nt={query:{},params:{},href:f},jt=/(?:^.*\/\/[^\/]+|#.*$)/gi,qt=/^[^#]*#?!?/,Et=function(t){return this[I][t]||f},Pt=function(t,e){t="#!"+t,e?Ct.replace(t):Ct.hash=t},Ut=function(){var t,e,n=Ht().srcHash;rt(h,"hashchange",function(r,i,o){e||(i=Ht(),(t=i.srcHash)!=n&&(o=function(){r.p=1,n=t,e=f,Pt(t),Mt()},r={reject:function(){r.p=1,e=f,Pt(n)},resolve:o,prevent:function(){e=1}},Lt.fire(p,r),e||r.p||o()))}),rt(h,"beforeunload",function(t,e,n){if(t=t||h.event,e={},Lt.fire(g,e),n=e.msg)return t&&(t.returnValue=n),n}),Mt()},Ot=d.title,Ht=function(t){t=t||Ct.href;var e,n,r,o,a,u=It.get(t);return u||(e=t.replace(jt,f),n=t.replace(qt,f),r=ft(e),o=ft(n),a=L({},r[I],o[I]),u={get:Et,href:t,srcQuery:e,srcHash:n,query:r,hash:o,params:a},ot&&(!function(t,e){if(yt||(yt=P.routes||{},wt=P.unmatchView,xt=P.defaultView,kt=P.defaultPath||"/",At=P.rewrite),!t[Vt]){var n=t.hash[S]||kt;At&&(n=At(n,t[I],yt)),e=yt[n]||wt||xt,t[S]=n,t[Vt]=e,i(e)&&L(t,e)}}(u),It.set(t,u))),u},Mt=function(){var t=Ht(),e=function(t,e){var n=t.href,r=e.href,i=n+k+r,o=St.get(i);if(!o){var a,f;o={params:f={},force:!n};for(var u=t[I],c=e[I],s=function(t){var e=u[t],n=c[t];e!=n&&(f[t]={from:e,to:n},a=1)},h=0,d=Z(u).concat(Z(c));h<d.length;h++)s(d[h]);u=t,c=e,f=o,s(S),s(Vt),St.set(i,o={a:a,b:o})}return o}(Nt,Nt=t);return!Tt&&e.a&&((bt=e.b)[S]&&(d.title=t.title||Ot),Lt.fire(l,bt)),Tt=0,bt},Lt=L({parse:Ht,diff:Mt,to:function(t,e,n,r){!e&&i(t)&&(e=t,t=f);var o,a,u,c,s=ft(t),h=s[I],d=s[S],v=Nt[S],$=Nt[I],l=Nt.query[I];if(L(h,e),d)for(v in l)F(h,v)||(h[v]=f);else $&&(d=v,h=L({},$,h));a=Nt,u=n,c=r,(o=ut(o=d,h,l))!=a.srcHash&&(Tt=c,Pt(o,u))}},ht);st.Router=Lt;var Zt,Rt,_t=0,Bt=function(t,e,n,r,i,o){if(t&&t.$a!=_t&&(n=t.$v)&&n.$a>1){(e?function(t,e,n){var r,i=t.$os;if(i)for(var o=0,a=i;o<a.length&&(r=a[o],!(n=F(e,r)));o++);return n}(n,e):xe(n))&&n.$b();for(var a=0,f=t.children();a<f.length;a++)o=f[a],Bt(Qt[o],e)}},Dt=function(t,e,n){e=Jt(),(n=t[Vt])?e.mountView(n.to):(_t=a++,Bt(e,t.keys))},zt=function(t){if(!t.$b&&!t.$d&&t.$cc==t.$rc){t.$cr||(t.$cr=1,t.$ca=0,t.fire("created"));var e=void 0,n=t.id,r=t.pId;(e=Qt[r])&&!F(e.$e,n)&&(e.$e[n]=1,e.$rc++,zt(e))}},Ft=function(t,e){if(!t.$ca&&t.$cr){t.$cr=0,t.$ca=1,t.fire("alter",e);var n=void 0,r=t.id,i=t.pId;(n=Qt[i])&&F(n.$e,r)&&(n.$rc--,delete n.$e[r],Ft(n,e))}},Jt=function(t){return Zt||(e=d.body,U(t=P.rootId)||(e.id=t),Zt=new Gt(t)),Zt},Qt={},Xt=[],Gt=function(t,e,n){var r,i;(n=this).id=t,n.$c={},n.$cc=0,n.$rc=0,n.$g=1,n.$e={},n.$f=[],n.pId=e,i=n,F(Qt,r=t)||(Qt[r]=i,Gt.fire("add",{vframe:i}),(r=U(r))&&(r.vframe=i))};L(Gt,{all:function(){return Qt},get:function(t){return Qt[t]}},ht),L(Gt[V],ht,{mountView:function(t,e){var n,r,i,o,a,f,u=this,c=u.id,s=u.pId,h=u.$g,d=U(c);!u.$h&&d&&(u.$h=1,u.$i=d.innerHTML),u.unmountView(),u.$b=0,d&&t&&(u[S]=t,n=ft(t),i=n[S],r=++h,o=n[I],f=(f=(f=(f=Qt[s])&&f.$v)&&f.$d)&&f.$a,t.indexOf(k)>0&&J(f,o),u.$n=n[S],L(o,e),K(i,function(t){if(r==u.$g){if(!t)return P.error(Error("id:"+c+" cannot load:"+i));a=we(t),i=new t(c,u,o,a),u.$v=i,u.$a=_t,me(i),z(i.init,o,i),i.$b(),i.$e||(u.$h=0,i.$f||i.endUpdate())}}))},unmountView:function(){var t,e,n=this,i=n.$v,o=n.id;n.$f=[],i&&(Rt||(e=1,Rt={id:o}),n.$b=1,n.unmountZone(0,1),Ft(n,Rt),n.$v=0,i.$a>0&&(i.$a=0,i.fire("destroy",0,1,1),pe(i,1),me(i,1),i.owner=0),i.$a--,(t=U(o))&&n.$h&&r(t).html(n.$i),e&&(Rt=0)),n.$g++},mountVframe:function(t,e,n){var r,i=this,o=i.id,a=i.$c;return Ft(i,{id:t}),(r=Qt[t])||(F(a,t)||(i.$o=0,i.$cc++),a[t]=t,(r=Xt.pop())?Gt.call(r,t,o):r=new Gt(t,o)),r.mountView(e,n),r},mountZone:function(t,e){var n,i,o=this,a=[];t=t||o.id;var f,u=r("#"+t+" ["+C+"]");o.$d=1;for(var c=0,s=u;c<s.length;c++)n=s[c],i=D(n),n.$b||(n.$b=1,a.push([i,n.getAttribute(C)]));for(var h=0,d=a;h<d.length;h++)i=(f=d[h])[0],n=f[1],a[i]?P.error(Error("vf.id duplicate:"+i+" at "+o[S])):o.mountVframe(a[i]=i,n);o.$d=0,e||zt(o)},unmountVframe:function(t,e){var n,r,i,o;if(t=t?this.$c[t]:this.id,n=Qt[t]){var a=n.$cr,f=n.pId;n.unmountView(),i=a,(o=Qt[r=t])&&(delete Qt[r],Gt.fire("remove",{vframe:o,fcc:i}),(r=U(r))&&(r.$b=0,r.vframe=0,r.$a=0)),n.id=n.pId=n.$c=n.$e=0,n.$h=0,n.off("alter"),n.off("created"),Xt.push(n),(n=Qt[f])&&F(n.$c,t)&&(delete n.$c[t],n.$o=0,n.$cc--,e||zt(n))}},unmountZone:function(t,e){var n;for(n in this.$c)(!t||n!=t&&M(n,t))&&this.unmountVframe(n,1);e||zt(this)},parent:function(t,e){for(e=this,t=t>>>0||1;e&&t--;)e=Qt[e.pId];return e},children:function(t){return(t=this).$o||(t.$o=Z(t.$c))},invoke:function(t,e){var n,r,i,o,a,f=this.$f;return(r=this.$v)&&r.$f?n=(i=r[t])&&z(i,e,r):((o=f[a=k+t])&&(o.r=e===o.a),o={n:t,a:e,k:a},f.push(o),f[a]=o),n}}),st.Vframe=Gt,r.fn.invokeView=function(t,e){if(this.length){var n=this[0],r=n.vframe;if(void 0===e)return r&&r.invoke(t);for(var i=0;i<this.length;i++)(r=(n=this[i]).vframe)&&r.invoke(t,e)}};var Kt=new X(30,10),Wt=/(?:([\w\-]+)\x1e)?([^(]+)\(([\s\S]*)?\)/,Yt={},te={},ee=function(t,n){var r,i,o,a,f,c,s=[],h=t,d=t.getAttribute("mx-"+n),v=[],$=0;if(d&&((a=Kt.get(d))||(a={v:(a=d.match(Wt)||u)[1],n:a[2],i:a[3]},Kt.set(d,a)),a=L({},a,{p:a.i&&z(Function("return "+a.i),u,t),r:d})),a&&!a.v||te[n]){if(!(c=t.$a))for(v.push(h);h!=e&&(h=h.parentNode);){if(Qt[i=h.id]||(i=h.$v)){c=i;break}v.push(h)}if(c){for(var l=0,p=v;l<p.length;l++)(d=p[l]).$a=c;h=t.id,Qt[h]&&($=c=h);do{if((r=Qt[c])&&(f=r.$v)){for(i in(o=f.$so)[n])o={r:i,v:c,n:i},i?et(t,i)&&s.push(o):$&&s.unshift(o);if(f.$e&&!$){a&&!a.v&&(a.v=c);break}$=0}}while(r&&(c=r.pId))}}return a&&s.push(a),s},ne=function(t){for(var n,r,i,o,a,f,u,c=t.target,s=t.type,h=[];c!=e;){if((n=ee(c,s)).length){h=[];for(var d=0,v=n;d<v.length;d++){var $=v[d],l=$.v,p=($.r,$.n),g=$.p,m=$.i;if(f!=l){if(f&&t.isPropagationStopped())break;f=l}if(o=(i=Qt[l])&&i.$v){if((a=o[p+k+s])&&(t.eventTarget=c,u=g||{},m&&m.indexOf(k)>0&&J(o.$d.$a,u,1),t[I]=u,z(a,t,o),t.isImmediatePropagationStopped()))break;0}else t.stopPropagation();0}}if((r=c.$)&&r[s]||t.isPropagationStopped())break;h.push(c),c=c.parentNode||e}for(var b=0,y=h;b<y.length;b++)(r=(c=y[b]).$||(c.$={}))[s]=1},re="http://www.w3.org/2000/svg",ie={option:[1,"<select multiple>"],thead:[1,"<table>"],col:[2,"<table><colgroup>"],tr:[2,"<table><tbody>"],td:[3,"<table><tbody><tr>"],area:[1,"<map>"],param:[1,"<object>"],g:[1,'<svg xmlns="'+re+'">'],all:[0,""]},oe=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i;ie.optgroup=ie.option,ie.tbody=ie.tfoot=ie.colgroup=ie.caption=ie.thead,ie.th=ie.td;var ae=d.implementation.createHTMLDocument(f),fe=ae.createElement("base");fe.href=d.location.href,ae.head.appendChild(fe);var ue=function(t,e){var n=D(e);t.$c[n]?t.unmountVframe(n,1):t.unmountZone(n,1)},ce={INPUT:[m,"checked"],TEXTAREA:[m],OPTION:["selected"]},se=function(t,e){return 1==t.nodeType&&(t.$kd?e=t.$k:((e=t.$a?f:t.id)||(e=t.getAttribute(b)),e||(e=t.getAttribute(C))&&(e=ft(e)[S]),t.$kd=1,t.$k=e)),e},he=function(t,e,n,r,i,o){for(var a,f,u,c,s,h=t.lastChild,d=e.firstChild,v=0,$={},l={};h;)v++,(u=se(h))&&(u=$[u]||($[u]=[])).push(h),h=h.previousSibling,d&&((u=se(d))&&(l[u]=1),d=d.nextSibling);for(;d;)(u=se(d))&&(l[u]=1),d=d.nextSibling;for(d=e.firstChild,s=e.childNodes.length<v,h=t.firstChild;d;)v--,a=d,d=d.nextSibling,(c=$[u=se(a)])&&(c=c.pop())?(c!=h?s&&h.nextSibling==c?(t.appendChild(h),h=c.nextSibling):t.insertBefore(c,h):h=h.nextSibling,de(c,a,t,n,r,i,o)):h?(u=se(f=h))&&$[u]&&l[u]?(v++,n.c=1,t.insertBefore(a,f)):(h=h.nextSibling,de(f,a,t,n,r,i,o)):(t.appendChild(a),n.c=1);for(;v-- >0;)f=t.lastChild,ue(r,f),t.removeChild(f),n.c=1},de=function(t,e,n,r,i,o,a){if(1==t.nodeType&&t.hasAttribute("mxv")||!(t.isEqualNode&&t.isEqualNode(e)&&function(t,e){var n,r=t.nodeName,i=ce[r],o=!0;if(i)for(var a=0,f=i;a<f.length;a++)if(t[n=f[a]]!=e[n]){o=!1;break}return o}(t,e)))if(t.nodeName===e.nodeName)if(1===t.nodeType){var f=e.getAttribute(b);if(f&&f==t.getAttribute(b))return;var u=e.getAttribute(C),s=e.innerHTML,h=e.getAttribute(y),d=!h||h!=t.getAttribute(y),v=void 0,$=void 0,l=Qt[t.id],p=void 0,g=void 0,w=u&&ft(u),x=void 0,A=void 0,V=void 0,T=void 0;if(u&&l&&l.$n==w[S]&&(g=l.$v)){if(A=s!=l.$i,T=V=u!=l[S],p=t.getAttribute("mxv"),!A&&!T&&p)for(var N=0,j=x=p.split(c);N<j.length;N++)if(p=j[N],F(a,p)){T=1;break}T||A?(p=g.$g)?(x=w[I],u.indexOf(k)>-1&&J(o,x),l.$i=s,l[S]=u,w={node:e,html:s,deep:!g.$e,inner:A,query:T},d=1,z(p,[x,w],g)&&r.v.push(g),v=w.deep):($=1,v=1):d=1}else v=1,$=l;$&&(r.c=1,l.unmountVframe(0,1)),d&&(1===d?(h&&t.setAttribute(y,h),f&&t.setAttribute(b,f),V&&t.setAttribute(C,u)):function(t,e,n,r){var i,o,a,f,u=t.attributes,c=e.attributes,s=t.nodeName;for(o=u.length;o--;)i=u[o].name,e.hasAttribute(i)||("id"==i?r||n.d.push([t,""]):(n.c=1,t.removeAttribute(i)));for(o=c.length;o--;)a=(i=c[o]).name,f=i[m],t.getAttribute(a)!=f&&("id"==a?n.d.push([t,f]):(n.c=1,t.setAttribute(a,f)));var h=ce[s];if(h)for(var d=0,v=h;d<v.length;d++)t[o=v[d]]!=e[o]&&(t[o]=e[o])}(t,e,r,l&&u)),v&&he(t,e,r,i,o,a)}else t.nodeValue!==e.nodeValue&&(r.c=1,t.nodeValue=e.nodeValue);else ue(i,t),n.replaceChild(e,t),r.c=1},ve=function(t){var e;this.$b=t,this.$c=1,this.$a=((e={vId:t})[k]=1,e),this.$k={}};L(ve[V],{get:function(t,e){return e=this.$a,t&&(e=e[t]),e},set:function(t){var e=this;return e.$c=H(t,e.$a,e.$k)||e.$c,e},digest:function(t){var e=this.set(t),n=e.$k,r=e.$c;e.$c=0,e.$k={},t=e.$a;var i,o,a=e.$b,f=Qt[a],u=f&&f.$v,c={d:[],v:[]},s=U(a);if(r&&u&&u.$a>0&&(i=u.$e)){o=function(t,e){var n=ae.createElement("div"),r=re==e.namespaceURI?"g":(oe.exec(t)||[0,""])[1].toLowerCase(),i=ie[r]||ie.all;n.innerHTML=i[1]+t;for(var o=i[0];o--;)n=n.lastChild;return n}(i(t,a),s),he(s,o,c,f,t,n);for(var h=0,d=c.d;h<d.length;h++)(o=d[h])[0].id=o[1];for(var $=0,l=c.v;$<l.length;$++)(o=l[$]).$b();!c.c&&u.$f||u.endUpdate(a),c.c&&v.trigger({type:"htmlchanged",vId:a}),u.fire("domready")}return e},snapshot:function(){return this.$d=x(this.$a),this},altered:function(){if(this.$d)return this.$d!=x(this.$a)},translate:function(t){return J(this.$a,t,1)}});var $e=/^(\$?)([^<]*)<([^>]+)>$/,le=function(t,e,n){return t.$h?n=t:((n=function(t){z(n.$h,t,this)}).$h=[t],n.$i=1),n.$h=n.$h.concat(e.$h||e),n},pe=function(t,e){var n,r,i=t.$r;for(n in i)r=i[n],(e||r.x)&&ge(i,n,1)},ge=function(t,e,n,r){var i,o,a=t[e];return a&&a!=r&&((i=(o=a.e).destroy)&&n&&z(i,u,o),delete t[e]),o},me=function(t,n){var r,i,o,a,f,u,c=t.$eo,s=t.$so,h=t.$el,d=t.id;for(r in c)i=r,o=s[r],a=n,void 0,void 0,f=0|Yt[i],u=a?-1:1,f&&a!==f||rt(e,i,ne,a),Yt[i]=f+u,o&&(te[i]=(0|te[i])+u);for(var v=0,$=h;v<$.length;v++)r=$[v],rt(r.e,r.n,nt,n,{i:d,v:t,f:r.f,e:r.e})},be=[],ye={win:h,doc:d},we=function(t){if(!t[k]){t[k]=[];var e=t[V],n=void 0,r=void 0,i=void 0,o={},a=[],f={},u=void 0,s=void 0,h=void 0,d=void 0,v=void 0,$={};if(r=e.mixins){for(var l=0,p=r;l<p.length;l++)for(h in u=p[l])n=u[h],i=$[h],"ctor"!=h?($e.test(h)&&(i?n=le(i,n):n.$i=1),$[h]=n):t[k].push(n);for(h in $)F(e,h)||(e[h]=$[h])}for(h in e)if(n=e[h],r=h.match($e)){s=r[1],i=r[2];for(var g=0,m=r[3].split(c);g<m.length;g++){if(d=m[g],u=ye[i],v=1,s){if(u){a.push({f:n,e:u,n:d});continue}v=2,(u=f[d])||(u=f[d]={}),u[i]=1}o[d]=o[d]|v,(u=e[d=i+k+d])?u.$i&&(n.$i?e[d]=le(u,n):F(e,h)&&(e[d]=n)):e[d]=n}}w="$b",x=(b=e)[y="render"],b[y]=b[w]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];(A=this).$a>0&&(A.$a++,A.fire("rendercall"),pe(A),z(x,t,A))},e.$eo=o,e.$el=a,e.$so=f,e.$e=e.tmpl,e.$g=e.assign}var b,y,w,x,A;return t[k]},xe=function(t){var e,n,r,i=t.$l;if(i.f&&(i.p&&(e=bt[S]),!e&&i.k)){r=bt[I];for(var o=0,a=i.k;o<a.length&&(n=a[o],!(e=F(r,n)));o++);}return e},ke=function(t,e,n,r){(r=this).owner=e,r.id=t,r.$l={k:[]},r.$r={},r.$a=1,r.updater=r.$d=new ve(r.id),z(be,n,r)},Ae=ke[V];L(ke,{merge:function(){for(var t,e,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];for(var i=0,o=n;i<o.length;i++)(e=(t=o[i])&&t.ctor)&&be.push(e),L(Ae,t)},extend:function(t,e){var n=this,r=(t=t||{}).ctor,i=[];r&&i.push(r);var o=function(t,e,r,o){n.call(this,t,e,r),z(i.concat(o),r,this)};return o.extend=n.extend,Y(o,n,t,e)}}),L(Ae,ht,{init:w,beginUpdate:function(t,e){(e=this).$a>0&&e.$f&&e.owner.unmountZone(t,1)},endUpdate:function(t,e,n,r,i){(n=this).$a>0&&(t=t||n.id,e?i=e:(i=n.$f,n.$f=1),(r=n.owner).mountZone(t,e),i||$(n.wrapAsync(function(){!function(t,e,n){for(e=t.$f;e.length;)(n=e.shift()).r||t.invoke(n.n,n.a),delete e[n.k]}(r)}),0))},wrapAsync:function(t,e){var n=this,r=n.$a;return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(r>0&&r==n.$a)return t.apply(e||n,i)}},observeLocation:function(t,e){var n;(n=this.$l).f=1,i(t)&&(e=t[S],t=t[I]),n.p=e,t&&(n.k=(t+f).split(c))},observeState:function(t){this.$os=(t+f).split(c)},capture:function(t,e,n,r){return r=this.$r,e?(ge(r,t,1,e),r[t]={e:e,x:n}):e=(r=r[t])&&r.e,e},release:function(t,e){return ge(this.$r,t,e)},leaveTip:function(t,e){var n=this,r=function(i){var o="a",a="b";i.type!=p&&(o="b",a="a"),r[o]?(i.prevent(),i.reject()):e()&&(i.prevent(),r[a]=1,n.leaveConfirm(function(){r[a]=0,i.resolve()},function(){r[a]=0,i.reject()},t))},i=function(n){e()&&(n.msg=t)};Lt.on(p,r),Lt.on(g,i),n.on("unload",r),n.on("destroy",function(){Lt.off(p,r),Lt.off(g,i)})},render:w}),st.View=ke;var Ve=r.type,Ie=r.now||Date.now,Se=function(){this.id=q("b"),this.$={}};L(Se[V],{get:function(t,e,n){var r=e!=n,i=this.$;if(t){for(var a=o(t)?t.slice():(t+f).split("."),u=void 0;(u=a.shift())&&i;)i=i[u];u&&(i=n)}return r&&Ve(e)!=Ve(i)&&(i=e),i},set:function(t,e){var n;i(t)||((n={})[t]=e,t=n),L(this.$,t)}});var Ce=function(t,e,n){(n=this[t])&&(delete this[t],z(n,e,n.e))},Te=function(t,e,n,r,i){if(t.$d)return t;if(t.$e)return t.enqueue(Te.bind(t,t,e,n,r,i));t.$e=1,o(e)||(e=[e]);for(var a,f,u,c,h,d,v,$,l,p=t.constructor,g=0,m=p.$f,b=(a=n,f=p,u=t,c=e.length,h=r,d=p.$c,v=[],$=s,l=0,function(t,e){var n,r=this;l++;var i=r.$b,o=i.k;v[t+1]=r;var p,g={bag:r,error:e};if(e?($=e,f.fire("fail",g),n=1):d.has(o)||(o&&d.set(o,r),i.t=Ie(),(p=i.a)&&z(p,r,r),(p=i.x)&&f.clear(p),f.fire("done",g),n=1),!u.$d){var m=l==c;m&&(u.$e=0,2==h&&(v[0]=$,z(a,v,u))),1==h&&z(a,[e||s,r,m,t],u)}n&&f.fire("end",g)}),y=0,w=e;y<w.length;y++){var x=w[y];if(x){var k=p.get(x,i),A=k.e,V=A.$b.k,I=b.bind(A,g++),S=void 0;V&&m[V]?m[V].push(I):k.u?(V&&((S=[I]).e=A,m[V]=S,I=Ce.bind(m,V)),p.$s(A,I)):I()}}return t},Ne=function(){var t=this;t.id=q("s"),t.$g=[]};L(Ne[V],{all:function(t,e){return Te(this,t,e,2)},save:function(t,e){return Te(this,t,e,2,1)},one:function(t,e){return Te(this,t,e,1)},enqueue:function(t){var e=this;return e.$d||(e.$g.push(t),e.dequeue(e.$h)),e},dequeue:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n,r=this;r.$e||r.$d||(r.$e=1,$(function(){r.$e=0,r.$d||(n=r.$g.shift())&&z(n,r.$h=t)},0))},destroy:function(t){(t=this).$d=1,t.$g=0}});var je=function(t,e){return[x(e),x(t)].join(k)},qe=function(t,e,n,r){(r=t&&t.$b)&&e[r.n]&&n.del(r.k)},Ee=L({add:function(t){var e,n=this.$b;o(t)||(t=[t]);for(var r=0,i=t;r<i.length;r++)if(e=i[r]){var a=e.name,f=e.cache;e.cache=0|f,n[a]=e}},create:function(t){var e=this.meta(t),n=0|t.cache||e.cache,r=new Se;r.set(e),r.$b={n:e.name,a:e.after,x:e.cleans,k:n&&je(e,t)},i(t)&&r.set(t);var o=e.before;return o&&z(o,r,r),this.fire("begin",{bag:r}),r},meta:function(t){return this.$b[t.name||t]||t},get:function(t,e){var n,r;return e||(n=this.cached(t)),n||(n=this.create(t),r=1),{e:n,u:r}},clear:function(t){this.$c.each(qe,ct((t+f).split(c)))},cached:function(t){var e,n,r=this.$c,i=this.meta(t),o=0|t.cache||i.cache;if(o&&(n=je(i,t)),n){var a=this.$f[n];a?e=a.e:(e=r.get(n))&&Ie()-e.$b.t>o&&(r.del(n),e=0)}return e}},ht);return Ne.extend=function(t,e,n){var r=function(){Ne.call(this)};return r.$s=t,r.$c=new X(e,n),r.$f={},r.$b={},Y(r,Ne,s,Ee)},st.Service=Ne,L(w[V],ht),w.extend=function t(e,n){var r=this,i=e&&e.ctor,o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];r.apply(this,t),i&&i.apply(this,t)};return o.extend=t,Y(o,r,e,n)},st.Base=w,st.default=st,st});