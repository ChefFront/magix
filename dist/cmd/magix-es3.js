/*!3.8.8 MIT kooboy_li@163.com*/define("magix",["$"],function(e){var t,n,r=e("$"),i=r.isPlainObject,o=r.isArray,a=0,f="",u=[],c=",",s=null,h=window,d=document,v=r(d),l=h.setTimeout,$="changed",p="change",g="pageunload",m="value",b="mxs",y="#",w=function(){},x=JSON.stringify,k="\x1e",A="object",V="prototype",T="params",I="path",S="mx-view",C=/[#?].*$/,N=/([^=&?\/#]+)=?([^&#?]*)/g,j=/(?!^)=|&/,q=function(e){return(e||"mx_")+a++},H=q(),P={rootId:q(),defaultView:H,error:function(e){throw e}},U=function(e){return typeof e==A?e:d.getElementById(e)},E=function(e){return!e||typeof e!=A},M=function(e,t,n){var r,i,o,a=0;for(o in e)r=e[o],i=t[o],E(r)&&i===r||(n[o]=1,a=1),t[o]=r;return a},O=function(e,t,n){if(e=U(e),t=U(t),e&&t&&!(n=e==t))try{n=16==(16&t.compareDocumentPosition(e))}catch(e){}return n},L=function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])F(t,i)&&(e[i]=t[i]);return e},Z=function(e,t,n){for(n in t=[],e)F(e,n)&&t.push(n);return t},R=P.hasOwnProperty,_=r("head"),B=function(e,t){t&&!B[e]&&(B[e]=1,_.append("<style>"+t))},D=function(e){return e.id||(e.$a=1,e.id=q())},z=function(e,t,n,r,i){t=t||u,o(e)||(e=[e]),o(t)||(t=[t]);for(var a=0,f=e;a<f.length;a++){i=f[a];try{r=i&&i.apply(n,t)}catch(e){P.error(e)}}return r},F=function(e,t){return e&&R.call(e,t)},J=function(e,t,n){var r,i;if(!n&&E(t))(r=t+f)[0]==k&&(t=e[r]);else for(r in t)i=t[r],n&&!E(i)&&J(e,i,n),r[0]==k&&(delete t[r],r=e[r]),t[r]=(i+f)[0]==k?e[i]:i;return t},Q=function(e,t){return t.f-e.f||t.t-e.t},X=function(e,t,n,r){(r=this).c=[],r.b=t||5,r.x=r.b+(e||20),r.r=n};L(X[V],{get:function(e){var t=this.c[k+e];return t&&(t.f++,t.t=a++,t=t.v),t},each:function(e,t,n){for(var r=0,i=(n=this).c;r<i.length;r++)e(i[r].v,t,n)},set:function(e,t){var n=this.c,r=k+e,i=n[r],o=this.b;if(!i){if(n.length>=this.x)for(n.sort(Q);o--;)(i=n.pop()).f>0&&this.del(i.o);i={o:e},n.push(i),n[r]=i}i.v=t,i.f=1,i.t=a++},del:function(e){e=k+e;var t=this.c,n=t[e],r=this.r;n&&(n.f=-1,n.v=f,delete t[e],r&&z(r,n.o))},has:function(e){return F(this.c,k+e)}});var G,K=function(t,r){if(t){var i=[],a=void 0;if(H==t)n||(n=Ht.extend()),r(n);else if(h.seajs)seajs.use(t,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0,o=e;n<o.length;n++){var a=o[n];i.push(a&&a.__esModule&&a.default||a)}r&&r.apply(void 0,i)});else{o(t)||(t=[t]);for(var f=0,u=t;f<u.length;f++)a=u[f],a=e(a),i.push(a&&a.__esModule&&a.default||a);r&&r.apply(void 0,i)}}else r()},W=function(){},Y=function(e,t,n,r,i){return W[V]=t[V],i=new W,L(i,n),L(e,r),i.constructor=e,e[V]=i,e},ee=r.find||r.zepto,te=ee.matchesSelector||ee.matches,ne=function(e,t){t=e.data,e.eventTarget=t.e,z(t.f,e,t.v)},re=function(e,t,n,i,o){o&&(t+="."+o.i),i?r(e).off(t,n):r(e).on(t,o,n)},ie=new X,oe=0,ae=function(e,t,n){try{n=decodeURIComponent(n)}catch(e){}G[t]=n},fe=function(e){var t,n=ie.get(e);return n||(G={},e==(t=e.replace(C,f))&&j.test(t)&&(t=f),e.replace(t,f).replace(N,ae),ie.set(e,n={a:t,b:G})),{path:n.a,params:L({},n.b)}},ue=function(e,t,n){var r,i,o,a=[];for(i in t)r=t[i]+f,(!n||r||F(n,i))&&(r=encodeURIComponent(r),a.push(o=i+"="+r));return o&&(e+=(e&&(~e.indexOf("?")?"&":"?"))+a.join("&")),e},ce=function(e,t){var n,r={};if(e)for(var i=0,o=e;i<o.length;i++)n=o[i],r[t&&n?n[t]:n]=t?n:1+(0|r[n]);return r},se=new X,he=function(e,t,n){return se.has(e)?n=se.get(e):(n=z(Function("return "+e)),e.indexOf(k)>-1?J(t,n,1):se.set(e,n)),n},de={config:function(e,t){return t=P,e&&(t=i(e)?L(t,e):t[e]),t},boot:function(e){L(P,e),K(P.ini,function(t){L(P,t,e),K(P.exts,function(){Re.on($,Fe),ye.on($,Fe),oe=1,Me()})})},toMap:ce,toTry:z,toUrl:ue,parseUrl:fe,mix:L,has:F,keys:Z,inside:O,node:U,applyStyle:B,guid:q,use:K,Cache:X,nodeId:D},ve={fire:function(e,t,n,r){var i,o,a,u,c=this,s=c[k+e];if(t||(t={}),t.type||(t.type=e),s)for(o=(i=s.length)-1;i--;)(u=s[a=r?i:o-i]).f?(u.x=1,z(u.f,t,c),u.x=f):u.x||(s.splice(a,1),o--);(s=c["on"+e])&&z(s,t,c),n&&c.off(e)},on:function(e,t){var n=k+e;(this[n]||(this[n]=[])).push({f:t})},off:function(e,t){var n,r=k+e,i=this[r];if(t){if(i)for(var o=0,a=i;o<a.length;o++)if((n=a[o]).f==t){n.f=f;break}}else delete this[r],delete this["on"+e]}};de.Event=ve;var le={},$e={},pe={},ge=0,me=function(e){for(var t=0,n=e=(e+f).split(",");t<n.length;t++){var r=n[t];F($e,r)?$e[r]++:$e[r]=1}return e},be=function(e){for(var t,n=0,r=e;n<r.length;n++)t=r[n],F($e,t)&&(--$e[t]||(delete $e[t],delete le[t]))};var ye=L({get:function(e){var t=e?le[e]:le;return t},set:function(e){return ge=M(e,le,pe)||ge,this},digest:function(e){e&&ye.set(e),ge&&(ge=0,this.fire($,{keys:pe}),pe={})},diff:function(){return pe},clean:function(e){return{ctor:function(){e=me(e),this.on("destroy",function(){return be(e)})}}}},ve);de.State=ye;var we,xe,ke,Ae,Ve,Te,Ie="view",Se=new X,Ce=new X,Ne=h.location,je=0,qe={query:{},params:{},href:f},He=/(?:^.*\/\/[^\/]+|#.*$)/gi,Pe=/^[^#]*#?!?/,Ue=function(e){return this[T][e]||f},Ee=function(e,t){e="#!"+e,t?Ne.replace(e):Ne.hash=e},Me=function(){var e,t,n=Le().srcHash;re(h,"hashchange",function(r,i,o){t||(i=Le(),(e=i.srcHash)!=n&&(o=function(){r.p=1,n=e,t=f,Ee(e),Ze()},r={reject:function(){r.p=1,t=f,Ee(n)},resolve:o,prevent:function(){t=1}},Re.fire(p,r),t||r.p||o()))}),re(h,"beforeunload",function(e,t,n){if(e=e||h.event,t={},Re.fire(g,t),n=t.msg)return e&&(e.returnValue=n),n}),Ze()},Oe=d.title,Le=function(e){e=e||Ne.href;var t,n,r,o,a,u=Se.get(e);return u||(t=e.replace(He,f),n=e.replace(Pe,f),r=fe(t),o=fe(n),a=L({},r[T],o[T]),u={get:Ue,href:e,srcQuery:t,srcHash:n,query:r,hash:o,params:a},oe&&(!function(e,t){if(xe||(xe=P.routes||{},ke=P.unmatchView,Ae=P.defaultView,Ve=P.defaultPath||"/",Te=P.rewrite),!e[Ie]){var n=e.hash[I]||Ve;Te&&(n=Te(n,e[T],xe)),t=xe[n]||ke||Ae,e[I]=n,e[Ie]=t,i(t)&&L(e,t)}}(u),Se.set(e,u))),u},Ze=function(){var e=Le(),t=function(e,t){var n=e.href,r=t.href,i=n+k+r,o=Ce.get(i);if(!o){var a,f;o={params:f={},force:!n};for(var u=e[T],c=t[T],s=function(e){var t=u[e],n=c[e];t!=n&&(f[e]={from:t,to:n},a=1)},h=0,d=Z(u).concat(Z(c));h<d.length;h++)s(d[h]);u=e,c=t,f=o,s(I),s(Ie),Ce.set(i,o={a:a,b:o})}return o}(qe,qe=e);return!je&&t.a&&((we=t.b)[I]&&(d.title=e.title||Oe),Re.fire($,we)),je=0,we},Re=L({parse:Le,diff:Ze,to:function(e,t,n,r){!t&&i(e)&&(t=e,e=f);var o,a,u,c,s=fe(e),h=s[T],d=s[I],v=qe[I],l=qe[T],$=qe.query[T];if(L(h,t),d)for(v in $)F(h,v)||(h[v]=f);else l&&(d=v,h=L({},l,h));a=qe,u=n,c=r,(o=ue(o=d,h,$))!=a.srcHash&&(je=c,Ee(o,u))}},ve);de.Router=Re;var _e,Be,De=0,ze=function(e,t,n,r,i,o){if(e&&e.$a!=De&&(n=e.$v)&&n.$a>1){(t?function(e,t,n){var r,i=e.$os;if(i)for(var o=0,a=i;o<a.length&&(r=a[o],!(n=F(t,r)));o++);return n}(n,t):qt(n))&&n.$b();for(var a=0,f=e.children();a<f.length;a++)o=f[a],ze(Ge[o],t)}},Fe=function(e,t,n){t=Xe(),(n=e[Ie])?t.mountView(n.to):(De=a++,ze(t,e.keys))},Je=function(e){if(!e.$b&&!e.$d&&e.$cc==e.$rc){e.$cr||(e.$cr=1,e.$ca=0,e.fire("created"));var t=void 0,n=e.id,r=e.pId;(t=Ge[r])&&!F(t.$e,n)&&(t.$e[n]=1,t.$rc++,Je(t))}},Qe=function(e,t){if(!e.$ca&&e.$cr){e.$cr=0,e.$ca=1,e.fire("alter",t);var n=void 0,r=e.id,i=e.pId;(n=Ge[i])&&F(n.$e,r)&&(n.$rc--,delete n.$e[r],Qe(n,t))}},Xe=function(e){return _e||(t=d.body,U(e=P.rootId)||(t.id=e),_e=new We(e)),_e},Ge={},Ke=[],We=function(e,t,n){var r,i;(n=this).id=e,n.$c={},n.$cc=0,n.$rc=0,n.$g=1,n.$e={},n.$f=[],n.pId=t,i=n,F(Ge,r=e)||(Ge[r]=i,We.fire("add",{vframe:i}),(r=U(r))&&(r.vframe=i))};L(We,{all:function(){return Ge},get:function(e){return Ge[e]}},ve),L(We[V],ve,{mountView:function(e,t){var n,r,i,o,a,f,u=this,c=u.id,s=u.pId,h=u.$g,d=U(c);!u.$h&&d&&(u.$h=1,u.$i=d.innerHTML),u.unmountView(),u.$b=0,d&&e&&(u[I]=e,n=fe(e),i=n[I],r=++h,o=n[T],f=(f=(f=(f=Ge[s])&&f.$v)&&f.$d)&&f.$a,e.indexOf(k)>0&&J(f,o),u.$n=n[I],L(o,t),K(i,function(e){if(r==u.$g){if(!e)return P.error(Error("id:"+c+" cannot load:"+i));a=jt(e),i=new e(c,u,o,a),u.$v=i,u.$a=De,It(i),z(i.init,o,i),i.$b(),i.$e||(u.$h=0,i.$f||i.endUpdate())}}))},unmountView:function(){var e,t,n=this,i=n.$v,o=n.id;n.$f=[],i&&(Be||(t=1,Be={id:o}),n.$b=1,n.unmountZone(0,1),Qe(n,Be),n.$v=0,i.$a>0&&(i.$a=0,delete rt[o],delete it[o],i.fire("destroy",0,1,1),Vt(i,1),It(i,1),i.owner=0),i.$a--,(e=U(o))&&n.$h&&r(e).html(n.$i),t&&(Be=0)),n.$g++},mountVframe:function(e,t,n){var r,i=this,o=i.id,a=i.$c;return Qe(i,{id:e}),(r=Ge[e])||(F(a,e)||(i.$o=0,i.$cc++),a[e]=e,(r=Ke.pop())?We.call(r,e,o):r=new We(e,o)),r.mountView(t,n),r},mountZone:function(e,t){var n,i,o=this,a=[];e=e||o.id;var f,u=r("#"+e+" ["+S+"]");o.$d=1;for(var c=0,s=u;c<s.length;c++)(n=s[c]).$b||n.getAttribute("mx-slot")==o.id||(i=D(n),n.$b=1,a.push([i,n.getAttribute(S)]));for(var h=0,d=a;h<d.length;h++)i=(f=d[h])[0],n=f[1],o.mountVframe(i,n);o.$d=0,t||Je(o)},unmountVframe:function(e,t){var n,r,i,o;if(e=e?this.$c[e]:this.id,n=Ge[e]){var a=n.$cr,f=n.pId;n.unmountView(),i=a,(o=Ge[r=e])&&(delete Ge[r],We.fire("remove",{vframe:o,fcc:i}),(r=U(r))&&(r.$b=0,r.vframe=0,r.$a=0)),n.id=n.pId=n.$c=n.$e=0,n.$h=0,n.off("alter"),n.off("created"),Ke.push(n),(n=Ge[f])&&F(n.$c,e)&&(delete n.$c[e],n.$o=0,n.$cc--,t||Je(n))}},unmountZone:function(e,t){var n;for(n in this.$c)(!e||n!=e&&O(n,e))&&this.unmountVframe(n,1);t||Je(this)},parent:function(e,t){for(t=this,e=e>>>0||1;t&&e--;)t=Ge[t.pId];return t},children:function(e){return(e=this).$o||(e.$o=Z(e.$c))},invoke:function(e,t){var n,r,i,o,a,f=this.$f;return(r=this.$v)&&r.$f?n=(i=r[e])&&z(i,t,r):((o=f[a=k+e])&&(o.r=t===o.a),o={n:e,a:t,k:a},f.push(o),f[a]=o),n}}),de.Vframe=We,r.fn.invokeView=function(e,t){if(this.length){var n=this[0],r=n.vframe;if(void 0===t)return r&&r.invoke(e);for(var i=0;i<this.length;i++)(r=(n=this[i]).vframe)&&r.invoke(e,t)}};var Ye=new X(30,10),et=/(?:([\w\-]+)\x1e)?([^(]+)\(([\s\S]*)?\)/,tt={},nt={},rt={},it={},ot=0,at=function(e,n){var r,i,o,a,f,c=[],s=e,h=e.getAttribute("mx-"+n),d=[],v=y,l=0;if(h&&((a=Ye.get(h))||(a={v:(a=h.match(et)||u)[1],n:a[2],i:a[3]},Ye.set(h,a)),a=L({},a,{r:h})),a&&!a.v||nt[n]){if((o=it[i=s.$d])&&1==o[s.$e]&&(f=1,v=i),!f){for(d.push(s);s!=t&&(s=s.parentNode);){if(Ge[i=s.id]||(o=it[i=s.$d])&&1==o[s.$e]){v=i;break}d.push(s)}for(var $=0,p=d;$<p.length;$++)h=p[$],(i=it[v])||(i=it[v]={}),i[o=h.$e||(h.$e=++ot)]=1,h.$d=v}if(v!=y){s=e.id,Ge[s]&&(l=v=s);do{if((r=Ge[v])&&(f=r.$v)){for(i in(o=f.$so)[n])o={r:i,v:v,n:i},i?!l&&te(e,i)&&c.push(o):l&&c.unshift(o);if(f.$e&&!l){a&&!a.v&&(a.v=v);break}l=0}}while(r&&(v=r.pId))}}return a&&c.push(a),c},ft=function(e){for(var n,r,i,o,a,f,u,c=e.target,s=e.type,h=[];c!=t;){if((n=at(c,s)).length){h=[];for(var d=0,v=n;d<v.length;d++){var l=v[d],$=l.v,p=(l.r,l.n),g=l.i;if(f!=$){if(f&&e.isPropagationStopped())break;f=$}(o=(i=Ge[$])&&i.$v)?(a=o[p+k+s])&&(e.eventTarget=c,u=g?he(g,o.$d.$a):{},e[T]=u,z(a,e,o)):e.stopPropagation()}}if((r=rt[a=c.$d])&&(r=r[c.$e])&&r[s]||e.isPropagationStopped()){h.length&&h.push(a);break}h.push(c),f=c.id,Ge[f]&&h.push(f),c=c.parentNode||t}if(a=h.length)for(r=y;a--;)(o=h[a]).nodeType?((n=rt[r])||(n=rt[r]={}),(u=n[f=o.$e||(o.$e=++ot)])||(u=n[f]={},o.$d=r),u[s]=1):r=o},ut="http://www.w3.org/2000/svg",ct={option:[1,"<select multiple>"],thead:[1,"<table>"],col:[2,"<table><colgroup>"],tr:[2,"<table><tbody>"],td:[3,"<table><tbody><tr>"],area:[1,"<map>"],param:[1,"<object>"],g:[1,'<svg xmlns="'+ut+'">'],all:[0,""]},st=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i;ct.optgroup=ct.option,ct.tbody=ct.tfoot=ct.colgroup=ct.caption=ct.thead,ct.th=ct.td;var ht=d.implementation.createHTMLDocument(f),dt=ht.createElement("base");dt.href=d.location.href,ht.head.appendChild(dt);var vt=function(e,t){var n=D(t);e.$c[n]?e.unmountVframe(n,1):e.unmountZone(n,1)},lt={INPUT:[m,"checked"],TEXTAREA:[m],OPTION:["selected"]},$t=function(e,t){return 1==e.nodeType&&(e.$f?t=e.$g:((t=e.$a?f:e.id)||(t=e.getAttribute(b)),t||(t=e.getAttribute(S))&&(t=fe(t)[I]),e.$f=1,e.$g=t)),t},pt=function(e,t,n,r,i,o){for(var a,f,u,c,s,h=e.lastChild,d=t.firstChild,v=0,l={},$={};h;)v++,(u=$t(h))&&(u=l[u]||(l[u]=[])).push(h),h=h.previousSibling,d&&((u=$t(d))&&($[u]=1),d=d.nextSibling);for(;d;)(u=$t(d))&&($[u]=1),d=d.nextSibling;for(d=t.firstChild,s=t.childNodes.length<v,h=e.firstChild;d;)v--,a=d,d=d.nextSibling,(c=l[u=$t(a)])&&(c=c.pop())?(c!=h?s&&h.nextSibling==c?(e.appendChild(h),h=c.nextSibling):e.insertBefore(c,h):h=h.nextSibling,gt(c,a,e,n,r,i,o)):h?(u=$t(f=h))&&l[u]&&$[u]?(v++,n.c=1,e.insertBefore(a,f)):(h=h.nextSibling,gt(f,a,e,n,r,i,o)):(e.appendChild(a),n.c=1);for(;v-- >0;)f=e.lastChild,vt(r,f),e.removeChild(f),n.c=1},gt=function(e,t,n,r,i,o,a){if(function(e,t){var n,r=e.nodeName,i=lt[r],o=0;if(i)for(var a=0,f=i;a<f.length;a++)e[n=f[a]]!=t[n]&&(o=1,e[n]=t[n]);return o}(e,t)||1==e.nodeType&&e.hasAttribute("mxv")||!e.isEqualNode||!e.isEqualNode(t))if(e.nodeName===t.nodeName)if(1===e.nodeType){var u=t.getAttribute(b);if(u&&u==e.getAttribute(b))return;var s=t.getAttribute(S),h=t.innerHTML,d=t.getAttribute("mxa"),v=!d||d!=e.getAttribute("mxa"),l=void 0,$=void 0,p=Ge[e.id],g=void 0,y=void 0,w=s&&fe(s),x=void 0,A=void 0,V=void 0;if(s&&p&&p.$n==w[I]&&(y=p.$v)){if(A=h!=p.$i,V=s!=p[I],g=e.getAttribute("mxv"),!A&&!V&&g)for(var C=0,N=x=g.split(c);C<N.length;C++)if(g=N[C],F(a,g)){V=1;break}V||A?(g=y.$g)?(x=w[T],s.indexOf(k)>-1&&J(o,x),p.$i=h,p[I]=s,w={node:t,html:h,deep:!y.$e,inner:A,query:V},v=1,z(g,[x,w],y)&&r.v.push(y),l=w.deep):($=1,l=1):v=1}else l=1,$=p;$&&(r.c=1,p.unmountVframe(0,1)),v&&function(e,t,n,r){var i,o,a,u;delete e.$f;var c=e.attributes,s=t.attributes;for(o=c.length;o--;)i=c[o].name,t.hasAttribute(i)||("id"==i?r||n.d.push([e,f]):(n.c=1,e.removeAttribute(i)));for(o=s.length;o--;)a=(i=s[o]).name,u=i[m],e.getAttribute(a)!=u&&("id"==a?n.d.push([e,u]):(n.c=1,e.setAttribute(a,u)))}(e,t,r,p&&s),l&&pt(e,t,r,i,o,a)}else e.nodeValue!==t.nodeValue&&(r.c=1,e.nodeValue=t.nodeValue);else vt(i,e),n.replaceChild(t,e),r.c=1},mt=function(e){var t;this.$b=e,this.$c=1,this.$a=((t={vId:e})[k]=1,t),this.$k={}};L(mt[V],{get:function(e,t){return t=this.$a,e&&(t=t[e]),t},set:function(e){var t=this;return t.$c=M(e,t.$a,t.$k)||t.$c,t},digest:function(e){var t=this.set(e),n=t.$k,r=t.$c;t.$c=0,t.$k={},e=t.$a;var i,o,a=t.$b,f=Ge[a],u=f&&f.$v,c={d:[],v:[]},s=U(a);if(r&&u&&u.$a>0&&(i=u.$e)){delete rt[a],delete it[a],o=function(e,t){var n=ht.createElement("div"),r=ut==t.namespaceURI?"g":(st.exec(e)||[0,""])[1].toLowerCase(),i=ct[r]||ct.all;n.innerHTML=i[1]+e;for(var o=i[0];o--;)n=n.lastChild;return n}(i(e,a),s),pt(s,o,c,f,e,n);for(var h=0,d=c.d;h<d.length;h++)(o=d[h])[0].id=o[1];for(var l=0,$=c.v;l<$.length;l++)(o=$[l]).$b();!c.c&&u.$f||u.endUpdate(a),c.c&&v.trigger({type:"htmlchanged",vId:a}),u.fire("domready")}return Promise.resolve()},snapshot:function(){return this.$d=x(this.$a),this},altered:function(){if(this.$d)return this.$d!=x(this.$a)},translate:function(e){return J(this.$a,e,1)},parse:function(e){return he(e,this.$a)}});var bt="default",yt="slot",wt=/\s+slot(\s*=\s*"[^"]*")?/g,xt={from:function(e){for(var t,n,r={},i=e.nodeType,o=0,a=i?e.childNodes:e.a;o<a.length;o++)t=a[o],(i?t.nodeType==i&&t.hasAttribute(yt):F(t.b,yt))&&(n=1,r[(i?t.getAttribute(yt):t.b[yt])||bt]=(i?t.outerHTML:t.c).replace(wt,""));return n||(r[bt]=(i?e.innerHTML:e.d).replace(wt,"")),r}};de.Slot=xt;var kt=/^(\$?)([^<]*)<([^>]+)>$/,At=function(e,t,n){return e.a?n=e:((n=function(e){z(n.a,e,this)}).a=[e],n.b=1),n.a=n.a.concat(t.a||t),n},Vt=function(e,t){var n,r,i=e.$r;for(n in i)r=i[n],(t||r.x)&&Tt(i,n,1)},Tt=function(e,t,n,r){var i,o,a=e[t];return a&&a!=r&&((i=(o=a.e).destroy)&&n&&z(i,u,o),delete e[t]),o},It=function(e,n){var r,i,o,a,f,u,c=e.$eo,s=e.$so,h=e.$el,d=e.id;for(r in c)i=r,o=s[r],a=n,void 0,void 0,f=0|tt[i],u=a?-1:1,f&&a!==f||re(t,i,ft,a),tt[i]=f+u,o&&(nt[i]=(0|nt[i])+u);for(var v=0,l=h;v<l.length;v++)r=l[v],re(r.e,r.n,ne,n,{i:d,v:e,f:r.f,e:r.e})},St=[],Ct={win:h,doc:d},Nt=function(e,t,n){for(var r,i,o,a,f={},u=0,c=e;u<c.length;u++)for(r in i=c[u])o=i[r],a=f[r],"ctor"!=r?(kt.test(r)&&(a?o=At(a,o):o.b=1),f[r]=o):n.push(o);for(r in f)F(t,r)||(t[r]=f[r])},jt=function(e){if(!e[k]){e[k]=[];var t=e[V],n=void 0,r=void 0,i=void 0,o={},a=[],f={},u=void 0,s=void 0,h=void 0,d=void 0,v=void 0;for(h in(r=t.mixins)&&Nt(r,t,e[k]),t)if(n=t[h],r=h.match(kt)){s=r[1],i=r[2];for(var l=0,$=r[3].split(c);l<$.length;l++){if(d=$[l],u=Ct[i],v=1,s){if(u){a.push({f:n,e:u,n:d});continue}v=2,(u=f[d])||(u=f[d]={}),u[i]=1}o[d]=o[d]|v,(u=t[d=i+k+d])?u.b&&(n.b?t[d]=At(n,u):F(t,h)&&(t[d]=n)):t[d]=n}}m="$b",b=(p=t)[g="render"],p[g]=p[m]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];(y=this).$a>0&&(y.$a++,y.fire("rendercall"),Vt(y),z(b,e,y))},t.$eo=o,t.$el=a,t.$so=f,t.$e=t.tmpl,t.$g=t.assign}var p,g,m,b,y;return e[k]},qt=function(e){var t,n,r,i=e.$l;if(i.f&&(i.p&&(t=we[I]),!t&&i.k)){r=we[T];for(var o=0,a=i.k;o<a.length&&(n=a[o],!(t=F(r,n)));o++);}return t},Ht=function(e,t,n,r){(r=this).owner=t,r.id=e,r.$l={k:[]},r.$r={},r.$a=1,r.updater=r.$d=new mt(r.id),z(St,n,r)},Pt=Ht[V];L(Ht,{merge:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Nt(e,Pt,St)},extend:function(e,t){var n=this,r=(e=e||{}).ctor,i=[];r&&i.push(r);var o=function(e,t,r,o){n.call(this,e,t,r),z(i.concat(o),r,this)};return o.extend=n.extend,Y(o,n,e,t)}}),L(Pt,ve,{init:w,beginUpdate:function(e,t){(t=this).$a>0&&t.$f&&t.owner.unmountZone(e,1)},endUpdate:function(e,t,n,r,i){(n=this).$a>0&&(e=e||n.id,t?i=t:(i=n.$f,n.$f=1),(r=n.owner).mountZone(e,t),i||l(n.wrapAsync(function(){!function(e,t,n){for(t=e.$f;t.length;)(n=t.shift()).r||e.invoke(n.n,n.a),delete t[n.k]}(r)}),0))},wrapAsync:function(e,t){var n=this,r=n.$a;return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(r>0&&r==n.$a)return e.apply(t||n,i)}},observeLocation:function(e,t){var n;(n=this.$l).f=1,i(e)&&(t=e[I],e=e[T]),n.p=t,e&&(n.k=(e+f).split(c))},observeState:function(e){this.$os=(e+f).split(c)},capture:function(e,t,n,r){return r=this.$r,t?(Tt(r,e,1,t),r[e]={e:t,x:n}):t=(r=r[e])&&r.e,t},release:function(e,t){return Tt(this.$r,e,t)},leaveTip:function(e,t){var n=this,r=function(i){var o="a",a="b";i.type!=p&&(o="b",a="a"),r[o]?(i.prevent(),i.reject()):t()&&(i.prevent(),r[a]=1,n.leaveConfirm(function(){r[a]=0,i.resolve()},function(){r[a]=0,i.reject()},e))},i=function(n){t()&&(n.msg=e)};Re.on(p,r),Re.on(g,i),n.on("unload",r),n.on("destroy",function(){Re.off(p,r),Re.off(g,i)})},render:w}),de.View=Ht;var Ut=r.type,Et=r.now||Date.now,Mt=function(){this.id=q("b"),this.$={}};L(Mt[V],{get:function(e,t,n){var r=t!=n,i=this.$;if(e){for(var a=o(e)?e.slice():(e+f).split("."),u=void 0;(u=a.shift())&&i;)i=i[u];u&&(i=n)}return r&&Ut(t)!=Ut(i)&&(i=t),i},set:function(e,t){var n;i(e)||((n={})[e]=t,e=n),L(this.$,e)}});var Ot=function(e,t,n){(n=this[e])&&(delete this[e],z(n,t,n.e))},Lt=function(e,t,n,r,i){if(e.$d)return e;if(e.$e)return e.enqueue(Lt.bind(e,e,t,n,r,i));e.$e=1,o(t)||(t=[t]);for(var a,f,u,c,h,d,v,l,$,p=e.constructor,g=0,m=p.$f,b=(a=n,f=p,u=e,c=t.length,h=r,d=p.$c,v=[],l=s,$=0,function(e,t){var n,r=this;$++;var i=r.$b,o=i.k;v[e+1]=r;var p,g={bag:r,error:t};if(t?(l=t,f.fire("fail",g),n=1):d.has(o)||(o&&d.set(o,r),i.t=Et(),(p=i.a)&&z(p,r,r),(p=i.x)&&f.clear(p),f.fire("done",g),n=1),!u.$d){var m=$==c;m&&(u.$e=0,2==h&&(v[0]=l,z(a,v,u))),1==h&&z(a,[t||s,r,m,e],u)}n&&f.fire("end",g)}),y=0,w=t;y<w.length;y++){var x=w[y];if(x){var k=p.get(x,i),A=k.e,V=A.$b.k,T=b.bind(A,g++),I=void 0;V&&m[V]?m[V].push(T):k.u?(V&&((I=[T]).e=A,m[V]=I,T=Ot.bind(m,V)),p.$s(A,T)):T()}}return e},Zt=function(){var e=this;e.id=q("s"),e.$g=[]};L(Zt[V],{all:function(e,t){return Lt(this,e,t,2)},save:function(e,t){return Lt(this,e,t,2,1)},one:function(e,t){return Lt(this,e,t,1)},enqueue:function(e){var t=this;return t.$d||(t.$g.push(e),t.dequeue(t.$h)),t},dequeue:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n,r=this;r.$e||r.$d||(r.$e=1,l(function(){r.$e=0,r.$d||(n=r.$g.shift())&&z(n,r.$h=e)},0))},destroy:function(e){(e=this).$d=1,e.$g=0}});var Rt=function(e,t){return[x(t),x(e)].join(k)},_t=function(e,t,n,r){(r=e&&e.$b)&&t[r.n]&&n.del(r.k)},Bt=L({add:function(e){var t,n=this.$b;o(e)||(e=[e]);for(var r=0,i=e;r<i.length;r++)if(t=i[r]){var a=t.name,f=t.cache;t.cache=0|f,n[a]=t}},create:function(e){var t=this.meta(e),n=0|e.cache||t.cache,r=new Mt;r.set(t),r.$b={n:t.name,a:t.after,x:t.cleans,k:n&&Rt(t,e)},i(e)&&r.set(e);var o=t.before;return o&&z(o,r,r),this.fire("begin",{bag:r}),r},meta:function(e){return this.$b[e.name||e]||e},get:function(e,t){var n,r;return t||(n=this.cached(e)),n||(n=this.create(e),r=1),{e:n,u:r}},clear:function(e){this.$c.each(_t,ce((e+f).split(c)))},cached:function(e){var t,n,r=this.$c,i=this.meta(e),o=0|e.cache||i.cache;if(o&&(n=Rt(i,e)),n){var a=this.$f[n];a?t=a.e:(t=r.get(n))&&Et()-t.$b.t>o&&(r.del(n),t=0)}return t}},ve);return Zt.extend=function(e,t,n){var r=function(){Zt.call(this)};return r.$s=e,r.$c=new X(t,n),r.$f={},r.$b={},Y(r,Zt,s,Bt)},de.Service=Zt,L(w[V],ve),w.extend=function e(t,n){var r=this,i=t&&t.ctor,o=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r.apply(this,e),i&&i.apply(this,e)};return o.extend=e,Y(o,r,t,n)},de.Base=w,de.default=de,de});