/*Magix3.0 Licensed MIT*/define("magix",["$"],function(n){var t,e=n("$"),r=function(n,t){n?seajs.use(n,t):t&&t()},i=function(){},o=function(n,t,e,r,o){return i[g]=t[g],o=new i,P(o,e),P(n,r),o.constructor=n,n[g]=o,n},f=e.isPlainObject,c=e.isArray,u=function(n,t){return 1 in arguments?e(n).html(t):t=e(n).html(),t},a=0,s="",d=[],$=d.slice,p=function(){},h=",",m=window,l=document,v="",w="object",g="prototype",y=/[#?].*$/,b=/([^=&?\/#]+)=?([^&#?]*)/g,x=/(?!^)=|&/,V=function(n){return(n||"mx_")+a++},I=V(),U={rootId:V(),defaultView:I,error:function(n){throw n}},Z=U.hasOwnProperty,j=function(n){return typeof n==w?n:l.getElementById(n)},A=function(n,t,e){if(n=j(n),t=j(t),n&&t&&(e=n==t,!e))try{e=t.contains?t.contains(n):16&t.compareDocumentPosition(n)}catch(r){}return e},P=function(n,t,e){for(e in t)n[e]=t[e];return n},k=function(n,t,e,r,i,o){for(c(n)||(n=[n]),c(t)||(t=[t]),r=0;o=n[r];r++)try{i=o&&o.apply(e,t)}catch(f){U.error(f)}return i},C=function(n,t){return n&&Z.call(n,t)},E=function(n,t){return t.f-n.f||t.t-n.t},O=function(n,t,e,r){r=this,r.c=[],r.b=0|t||5,r.x=r.b+(n||20),r.r=e};P(O[g],{get:function(n){var t=this,e=t.c,r=e[v+n];return r&&(r.f++,r.t=a++,r=r.v),r},set:function(n,t){var e=this,r=e.c,i=v+n,o=r[i],f=e.b;if(!o){if(r.length>=e.x)for(r.sort(E);f--;)o=r.pop(),o.f>0&&e.del(o.o);o={o:n},r.push(o),r[i]=o}o.v=t,o.f=1,o.t=a++},del:function(n){n=v+n;var t=this.c,e=t[n],r=this.r;e&&(e.f=-1,e.v=s,delete t[n],r&&k(r,e.o,e))},has:function(n){return C(this.c,v+n)}});var S,T=new O,M=function(n,t,e){try{e=decodeURIComponent(e)}catch(r){}S[t]=e},R=function(n){var t,e=T.get(n);return e||(S={},t=n.replace(y,s),n==t&&x.test(t)&&(t=s),n.replace(t,s).replace(b,M),T.set(n,e={a:t,b:S})),{path:e.a,params:P({},e.b)}},B=function(n,t,e){var r,i,o,f=[];for(i in t)r=t[i]+s,(!e||r||C(e,i))&&(r=encodeURIComponent(r),f.push(o=i+"="+r));return o&&(n+=(n&&(~n.indexOf("?")?"&":"?"))+f.join("&")),n},D=function(n,t){var e,r,i,o={};if(n&&(i=n.length))for(e=0;i>e;e++)r=n[e],o[t&&r?r[t]:r]=t?r:(0|o[r])+1;return o},F={config:function(n,t){return t=U,n&&(t=f(n)?P(t,n):t[n]),t},boot:function(n){P(U,n),r(U.exts,function(){G().mountView(U.defaultView)})},toMap:D,toTry:k,toUrl:B,parseUrl:R,mix:P,has:C,inside:A,node:j,guid:V,Cache:O},H="on",L={fire:function(n,t,e,r){var i,o,f,c,u=v+n,a=this,s=a[u];if(t||(t={}),t.type||(t.type=n),s)for(i=s.length,o=i-1;i--;)f=r?i:o-i,c=s[f],c.d?(s.splice(f,1),o--):k(c.f,t,a);s=a[H+n],s&&k(s,t,a),e&&a.off(n)},on:function(n,t){var e=this,r=v+n,i=e[r]||(e[r]=[]);i.push({f:t})},off:function(n,t){var e,r,i=v+n,o=this,f=o[i];if(t){if(f)for(e=f.length;e--;)if(r=f[e],r.f==t&&!r.d){r.d=1;break}}else delete o[i],delete o[H+n]}};F.Event=L;var N,_,q=function(n,t,e){n.$d||n.$h||n.$cc!=n.$rc||(n.$cr||(n.$cr=1,n.$ca=0,n.fire("created")),t=n.id,e=J[n.pId],e&&!C(e.$r,t)&&(e.$r[t]=1,e.$rc++,q(e)))},z=function(n,t,e,r){t||(t={}),!n.$ca&&n.$cr&&(n.$cr=0,n.$ca=1,n.fire("alter",t),e=n.id,r=J[n.pId],r&&C(r.$r,e)&&(r.$rc--,delete r.$r[e],z(r,t)))},G=function(n,e){return N||(t=l.body,n=U.rootId,e=j(n),e||(t.id=n),N=new W(n)),N},J={},K=function(n,t){C(J,n)||(J[n]=t,W.fire("add",{vframe:t}))},Q=function(n,t,e){e=J[n],e&&(delete J[n],W.fire("remove",{vframe:e,fcc:t}))},W=function(n,t,e){e=this,e.id=n,e.$c={},e.$cc=0,e.$rc=0,e.$s=1,e.$r={},e.pId=t,K(n,e)};P(W,P({root:G,all:function(){return J},get:function(n){return J[n]}},L)),P(P(W[g],L),{mountView:function(n,t){var e,i,o,f=this,c=j(f.id);!f.$a&&c&&(f.$a=1,f.$t=u(c)),f.unmountView(),f.$d=0,c&&n&&(f.path=n,e=R(n),i=++f.$s,r(e.path,function(n){if(i==f.$s){dn(n);var r=P(e.params,t);o=new n({owner:f,id:f.id},r),f.$v=o,an(o),o.init(r),o.render(),o.tmpl||o.$p||o.endUpdate()}}))},unmountView:function(){var n,t,e=this,r=e.$v;r&&(_||(t=1,_={id:e.id}),e.$d=1,e.unmountZone(0,1),z(e,_),e.$v=0,$n(r),n=j(e.id),n&&e.$a&&u(n,e.$t),t&&(_=0)),e.$s++},mountVframe:function(n,t,e){var r,i=this;return z(i),r=J[n],r||(C(i.$c,n)||i.$cc++,i.$c[n]=n,r=new W(n,i.id)),r.mountView(t,e),r},mountZone:function(n,t){var r,i,o,f=this;n=n||f.id;var c=e("#"+n+" [mx-view]");for(f.$h=1,f.unmountZone(n,1),r=c.length-1;r>=0;r--)i=c[r],o=i.id||(i.id=V()),f.mountVframe(o,i.getAttribute("mx-view"),t);f.$h=0,q(f)},unmountVframe:function(n,t){var e,r,i,o=this;n=n?o.$c[n]:o.id,e=J[n],e&&(r=e.$cr,i=e.pId,e.unmountView(),Q(n,r),e.id=e.pId=s,e=J[i],e&&C(e.$c,n)&&(delete e.$c[n],e.$cc--,t||q(e)))},unmountZone:function(n,t){var e,r=this,i=r.$c;for(e in i)(!n||e!=n&&A(e,n))&&r.unmountVframe(e,1);t||q(r)}}),F.Vframe=W;var X=function(n,t){t=n.data,k(t.f,n,t.v)},Y=function(n,t,r,i,o){e(n)[i?"off":H](t,o,r)},nn="parentNode",tn=new O(30,10),en=/([^\(]+)\(([\s\S]*)?\)/,rn={},on=function(n){for(var e,r,i,o,f,c,u,a,s,$,p=n.target,h=n.type,m="mx-"+h,l=[];p!=t&&1==p.nodeType;){if(e=p.getAttribute(m)){if(l=[],f=p.$f,!f)for(c=p;c=c[nn];)if(C(J,u=c.id)){p.$f=f=u;break}f?(i=J[f],o=i&&i.$v,o&&o.$s>0&&(a=tn.get(e),a||(a=e.match(en)||d,a={n:a[1],i:a[2]},a.p=a.i&&k(Function("return "+a.i))||{},tn.set(e,a)),s=a.n+v+h,$=o[s],$&&(n.current=p,n.params=a.p,k($,n,o)))):U.error(Error("bad:"+e))}if((r=p.$)&&r[h]||n.mxStop||n.isPropagationStopped())break;l.push(p),p=p[nn]||t}for(;p=l.pop();)r=p.$||(p.$={}),r[h]=1},fn=function(n,e){var r=0|rn[n],i=r>0?1:0;r+=e?-i:i,r||(Y(t,n,on,e),e||(r=1)),rn[n]=r},cn=/^([^<]+)<([^>]+)>$/,un=function(n,t,e){t=n.render,n.render=function(){e=this,e.$s>0&&(e.$s++,e.fire("rendercall"),k(t,$.call(arguments),e))}},an=function(n,t){var e,r,i=n.$eo;for(e in i)fn(e,t);for(i=n.$el,e=i.length;e--;)r=i[e],Y(r.h,r.t,X,t,{v:n,f:r.f})},sn={$win:m,$doc:l},dn=function(n){if(!n[v]){n[v]=1;var t,e,r,i,o,f,c=n[g],u={},a=[];for(f in c)if(t=c[f],e=f.match(cn))for(r=e[1],i=e[2],i=i.split(h);e=i.pop();)o=sn[r],o?a.push({f:t,t:e,h:o}):(u[e]=1,c[r+v+e]=t);un(c),c.$eo=u,c.$el=a}},$n=function(n){n.$s>0&&(n.$s=0,n.fire("destroy",0,1,1),an(n,1)),n.$s--},pn=function(n,t){t=this,P(t,n),t.$s=1},hn=pn[g];return P(pn,{extend:function(n,t){var e=this;n=n||{};var r=n.ctor,i=function(n,t){e.call(this,n,t),r&&r.call(this,t)};return i.extend=e.extend,o(i,e,n,t)}}),P(P(hn,L),{render:p,init:p,beginUpdate:function(n,t){t=this,t.$s>0&&t.$p&&t.owner.unmountZone(n,1)},endUpdate:function(n,t){t=this,t.$s>0&&(t.$p=1,t.owner.mountZone(n))},wrapAsync:function(n,t){var e=this,r=e.$s;return function(){r>0&&r==e.$s&&n&&n.apply(t||e,arguments)}},setHTML:function(n,t){var e,r=this;r.beginUpdate(n),r.$s>0&&(e=j(n),e&&u(e,t)),r.endUpdate(n)}}),F.View=pn,define(I,function(){return pn.extend()}),F});