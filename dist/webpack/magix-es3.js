/*!3.8.1 MIT kooboy_li@163.com*/module.exports=function(){var e,n=require("$"),t=n.isPlainObject,r=n.isArray,i=0,o="",a=[],f=",",u=window,c=document,h=n(c),s=u.setTimeout,d=function(){},v=JSON.stringify,$="\x1e",l="object",p="prototype",g="params",m="path",b="mx-view",w=/[#?].*$/,y=/([^=&?\/#]+)=?([^&#?]*)/g,k=/(?!^)=|&/,x=function(e){return(e||"mx_")+i++},V=x(),I={rootId:x(),defaultView:V,error:function(e){throw e}},_=function(e){return typeof e==l?e:c.getElementById(e)},j=function(e){return!e||typeof e!=l},S=function(e,n,t){var r,i,o,a=0;for(o in e)r=e[o],i=n[o],j(r)&&i===r||(t[o]=1,a=1),n[o]=r;return a},A=function(e,n,t){if(e=_(e),n=_(n),e&&n&&!(t=e==n))try{t=16==(16&n.compareDocumentPosition(e))}catch(e){}return t},O=function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])H(n,i)&&(e[i]=n[i]);return e},T=function(e,n,t){for(t in n=[],e)H(e,t)&&n.push(t);return n},U=I.hasOwnProperty,q=n("head"),C=function(e,n){n&&!C[e]&&(C[e]=1,q.append("<style>"+n))},P=function(e){return e.id||(e.id=x())},Z=function(e,n,t,i,o){n=n||a,r(e)||(e=[e]),r(n)||(n=[n]);for(var f=0,u=e;f<u.length;f++){o=u[f];try{i=o&&o.apply(t,n)}catch(e){I.error(e)}}return i},H=function(e,n){return e&&U.call(e,n)},E=function(e,n,t){var r,i;for(r in n)i=n[r],t[r]=(i+o)[0]==$?e[i]:i},N=function(e,n){return n.f-e.f||n.t-e.t},z=function(e,n,t,r){(r=this).c=[],r.b=n||5,r.x=r.b+(e||20),r.r=t};O(z[p],{get:function(e){var n=this.c[$+e];return n&&(n.f++,n.t=i++,n=n.v),n},each:function(e,n,t){for(var r=0,i=(t=this).c;r<i.length;r++)e(i[r].v,n,t)},set:function(e,n){var t=this.c,r=$+e,o=t[r],a=this.b;if(!o){if(t.length>=this.x)for(t.sort(N);a--;)(o=t.pop()).f>0&&this.del(o.o);o={o:e},t.push(o),t[r]=o}o.v=n,o.f=1,o.t=i++},del:function(e){e=$+e;var n=this.c,t=n[e],r=this.r;t&&(t.f=-1,t.v=o,delete n[e],r&&Z(r,t.o))},has:function(e){return H(this.c,$+e)}});var B,L,M=n.isFunction,R=function(e,n){var t=I.views||d;if(t[V]||(t[V]=B),!e)return n();r(e)||(e=[e]);for(var i,o=[],a=0,f=function(){a||n.apply(re,o)},u=function(e,n,t){(e=e(t=function(e){o[n]||(a--,o[n]=e,f())})).then&&e.then(t)},c=0;c<e.length;c++)i=t[e[c]],M(i)&&!i.extend?(a++,u(i,c)):o[c]=t[e[c]];f()},D=function(){},F=function(e,n,t,r,i){return D[p]=n[p],i=new D,O(i,t),O(e,r),i.constructor=e,e[p]=i,e},J=n.find||n.zepto,Q=J.matchesSelector||J.matches,G=function(e,n){n=e.data,e.eventTarget=n.e,Z(n.f,e,n.v)},K=function(e,t,r,i,o){o&&(t+="."+o.i),i?n(e).off(t,r):n(e).on(t,o,r)},W=new z,X=0,Y=function(e,n,t){try{t=decodeURIComponent(t)}catch(e){}L[n]=t},ee=function(e){var n,t=W.get(e);return t||(L={},e==(n=e.replace(w,o))&&k.test(n)&&(n=o),e.replace(n,o).replace(y,Y),W.set(e,t={a:n,b:L})),{path:t.a,params:O({},t.b)}},ne=function(e,n,t){var r,i,a,f=[];for(i in n)r=n[i]+o,(!t||r||H(t,i))&&(r=encodeURIComponent(r),f.push(a=i+"="+r));return a&&(e+=(e&&(~e.indexOf("?")?"&":"?"))+f.join("&")),e},te=function(e,n){var t,r={};if(e)for(var i=0,o=e;i<o.length;i++)t=o[i],r[n&&t?t[n]:t]=n?t:1+(0|r[t]);return r},re={config:function(e,n){return n=I,e&&(n=t(e)?O(n,e):n[e]),n},boot:function(e){O(I,e),R(I.ini,function(n){O(I,n,e),R(I.exts,function(){Ce.on("changed",Be),se.on("changed",Be),X=1,Oe()})})},toMap:te,toTry:Z,toUrl:ne,parseUrl:ee,mix:O,has:H,keys:T,inside:A,node:_,applyStyle:C,guid:x,use:R,Cache:z,nodeId:P},ie={fire:function(e,n,t,r){var i,a,f,u,c=this,h=c[$+e];if(n||(n={}),n.type||(n.type=e),h)for(a=(i=h.length)-1;i--;)(u=h[f=r?i:a-i]).f?(u.x=1,Z(u.f,n,c),u.x=o):u.x||(h.splice(f,1),a--);(h=c["on"+e])&&Z(h,n,c),t&&c.off(e)},on:function(e,n){var t=$+e;(this[t]||(this[t]=[])).push({f:n})},off:function(e,n){var t,r=$+e,i=this[r];if(n){if(i)for(var a=0,f=i;a<f.length;a++)if((t=f[a]).f==n){t.f=o;break}}else delete this[r],delete this["on"+e]}};re.Event=ie;var oe={},ae={},fe={},ue=0,ce=function(e){for(var n=0,t=e=(e+o).split(",");n<t.length;n++){var r=t[n];H(ae,r)?ae[r]++:ae[r]=1}return e},he=function(e){for(var n,t=0,r=e;t<r.length;t++)n=r[t],H(ae,n)&&(--ae[n]||(delete ae[n],delete oe[n]))};var se=O({get:function(e){var n=e?oe[e]:oe;return n},set:function(e){ue=S(e,oe,fe)||ue},digest:function(e){e&&se.set(e),ue&&(ue=0,this.fire("changed",{keys:fe}),fe={})},diff:function(){return fe},clean:function(e){return{ctor:function(){e=ce(e),this.on("destroy",function(){return he(e)})}}}},ie);re.State=se;var de,ve,$e,le,pe,ge,me,be,we="view",ye=new z,ke=new z,xe=u.location,Ve=0,Ie={query:{},params:{},href:o},_e=/(?:^.*\/\/[^\/]+|#.*$)/gi,je=/^[^#]*#?!?/,Se=function(e){return this[g][e]||o},Ae=function(e,n){e="#!"+e,n?xe.replace(e):xe.hash=e},Oe=function(){var e,n,t=Ue().srcHash;K(u,"hashchange",function(r,i,a){n||(i=Ue(),(e=i.srcHash)!=t&&(a=function(){r.p=1,t=e,n=o,Ae(e),qe()},r={reject:function(){r.p=1,n=o,Ae(t)},resolve:a,prevent:function(){n=1}},Ce.fire("change",r),n||r.p||a()))}),u.onbeforeunload=function(e,n,t){if(e=e||u.event,n={},Ce.fire("pageunload",n),t=n.msg)return e&&(e.returnValue=t),t},qe()},Te=c.title,Ue=function(e){e=e||xe.href;var n,r,i,a,f,u=ye.get(e);return u||(n=e.replace(_e,o),r=e.replace(je,o),i=ee(n),a=ee(r),f=O({},i[g],a[g]),u={get:Se,href:e,srcQuery:n,srcHash:r,query:i,hash:a,params:f},X&&(!function(e,n){if(ve||(ve=I.routes||{},$e=I.unmatchView,le=I.defaultView,pe=I.defaultPath||"/",ge=I.rewrite),!e[we]){var r=e.hash[m]||pe;ge&&(r=ge(r,e[g],ve)),n=ve[r]||$e||le,e[m]=r,e[we]=n,t(n)&&O(e,n)}}(u),ye.set(e,u))),u},qe=function(){var e=Ue(),n=function(e,n){var t=e.href,r=n.href,i=t+$+r,o=ke.get(i);if(!o){var a,f;o={params:f={},force:!t};for(var u=e[g],c=n[g],h=function(e){var n=u[e],t=c[e];n!=t&&(f[e]={from:n,to:t},a=1)},s=0,d=T(u).concat(T(c));s<d.length;s++)h(d[s]);u=e,c=n,f=o,h(m),h(we),ke.set(i,o={a:a,b:o})}return o}(Ie,Ie=e);return!Ve&&n.a&&((de=n.b)[m]&&(c.title=e.title||Te),Ce.fire("changed",de)),Ve=0,de},Ce=O({parse:Ue,diff:qe,to:function(e,n,r,i){!n&&t(e)&&(n=e,e=o);var a,f,u,c,h=ee(e),s=h[g],d=h[m],v=Ie[m],$=Ie[g],l=Ie.query[g];if(O(s,n),d)for(v in l)H(s,v)||(s[v]=o);else $&&(d=v,s=O({},$,s));f=Ie,u=r,c=i,(a=ne(a=d,s,l))!=f.srcHash&&(Ve=c,Ae(a,u))}},ie);re.Router=Ce;var Pe=function(e){if(!e.$a&&!e.$b&&e.$cc==e.$rc){e.$cr||(e.$cr=1,e.$ca=0,e.fire("created"));var n=void 0,t=e.id,r=e.pId;(n=He[r])&&!H(n.$d,t)&&(n.$d[t]=1,n.$rc++,Pe(n))}},Ze=function(e,n){if(!e.$ca&&e.$cr){e.$cr=0,e.$ca=1,e.fire("alter",n);var t=void 0,r=e.id,i=e.pId;(t=He[i])&&H(t.$d,r)&&(t.$rc--,delete t.$d[r],Ze(t,n))}},He={},Ee=[],Ne=0,ze=function(e,n,t){if(e&&e.$f!=Ne&&(t=e.$v)&&t.$a>1){(n?function(e,n,t){var r,i=e.$os;if(i)for(var o=0,a=i;o<a.length&&(r=a[o],!(t=H(n,r)));o++);return t}(t,n):mn(t))&&t.$b();for(var r=void 0,i=0,o=e.children();i<o.length;i++)r=o[i],ze(He[r],n)}},Be=function(n){var t,r,o=(me||(e=c.body,_(r=I.rootId)||(e.id=r),me=new Le(r)),me);(t=n[we])?o.mountView(t.to):(Ne=i++,ze(o,n.keys))},Le=function(e,n,t){var r,i;(t=this).id=e,t.$c={},t.$cc=0,t.$rc=0,t.$g=1,t.$d={},t.$e=[],t.pId=n,i=t,H(He,r=e)||(He[r]=i,Le.fire("add",{vframe:i}),(r=_(r))&&(r.vframe=i))};O(Le,{all:function(){return He},get:function(e){return He[e]}},ie),O(Le[p],ie,{mountView:function(e,n){var t,r,i,o,a,f,u=this,c=u.id,h=u.pId,s=u.$g,d=_(c);!u.$h&&d&&(u.$h=1,u.$i=d.innerHTML),u.unmountView(),u.$a=0,d&&e&&(u[m]=e,t=ee(e),i=t[m],r=++s,o=t[g],f=(f=(f=(f=He[h])&&f.$v)&&f.$d)&&f.$a,e.indexOf($)>0&&E(f,o,o),u.$n=t[m],O(o,n),R(i,function(e){if(r==u.$g){if(!e)return I.error(Error("id:"+c+" cannot load:"+i));a=gn(e),i=new e(c,u,o,a),u.$v=i,u.$f=Ne,$n(i),Z(i.init,o,i),i.$b(),i.$e||(u.$h=0,i.$f||i.endUpdate())}}))},unmountView:function(){var e,t,r=this,i=r.$v,o=r.id;r.$e=[],i&&(be||(t=1,be={id:o}),r.$a=1,r.unmountZone(0,1),Ze(r,be),r.$v=0,i.$a>0&&(i.$a=0,i.fire("destroy",0,1,1),dn(i,1),$n(i,1),i.owner=0),i.$a--,(e=_(o))&&r.$h&&n(e).html(r.$i),t&&(be=0)),r.$g++},mountVframe:function(e,n,t){var r,i=this,o=i.id,a=i.$c;return Ze(i,{id:e}),(r=He[e])||(H(a,e)||(i.$o=0,i.$cc++),a[e]=e,(r=Ee.pop())?Le.call(r,e,o):r=new Le(e,o)),r.mountView(n,t),r},mountZone:function(e,t){var r,i,o=this,a=[];e=e||o.id;var f,u=n("#"+e+" ["+b+"]");o.$b=1;for(var c=0,h=u;c<h.length;c++)r=h[c],i=P(r),r.$a||(r.$a=1,a.push([i,r.getAttribute(b)]));for(var s=0,d=a;s<d.length;s++)i=(f=d[s])[0],r=f[1],a[i]?I.error(Error("vf.id duplicate:"+i+" at "+o[m])):o.mountVframe(a[i]=i,r);o.$b=0,t||Pe(o)},unmountVframe:function(e,n){var t,r,i,o;if(e=e?this.$c[e]:this.id,t=He[e]){var a=t.$cr,f=t.pId;t.unmountView(),i=a,(o=He[r=e])&&(delete He[r],Le.fire("remove",{vframe:o,fcc:i}),(r=_(r))&&(r.$a=r.vframe=0)),t.id=t.pId=t.$c=t.$d=t.$h=0,t.off("alter"),t.off("created"),Ee.push(t),(t=He[f])&&H(t.$c,e)&&(delete t.$c[e],t.$o=0,t.$cc--,n||Pe(t))}},unmountZone:function(e,n){var t;for(t in this.$c)(!e||t!=e&&A(t,e))&&this.unmountVframe(t,1);n||Pe(this)},parent:function(e,n){for(n=this,e=e>>>0||1;n&&e--;)n=He[n.pId];return n},children:function(e){return(e=this).$o||(e.$o=T(e.$c))},invoke:function(e,n){var t,r,i,o,a,f=this.$e;return(r=this.$v)&&r.$f?t=(i=r[e])&&Z(i,n,r):((o=f[a=$+e])&&(o.r=n===o.a),o={n:e,a:n,k:a},f.push(o),f[a]=o),t}}),re.Vframe=Le,n.fn.invokeView=function(e,n){if(this.length){var t=this[0],r=t.vframe;if(void 0===n)return r&&r.invoke(e);for(var i=0;i<this.length;i++)(r=(t=this[i]).vframe)&&r.invoke(e,n)}};var Me=new z(30,10),Re=/(?:([\w\-]+)\x1e)?([^(]+)\(([\s\S]*)?\)/,De={},Fe={},Je=function(n,t){var r,i,o,f,u,c,h=[],s=n,d=n.getAttribute("mx-"+t),v=[],$=0;if(d&&((f=Me.get(d))||((f={v:(f=d.match(Re)||a)[1],n:f[2],i:f[3]}).p=f.i&&Z(Function("return "+f.i),a,n),Me.set(d,f)),f=O({},f,{r:d}),h.push(f)),f&&!f.v||Fe[t]){if(!(c=n.$a))for(v.push(s);s!=e&&(s=s.parentNode);){if(He[i=s.id]||(i=s.$v)){c=i;break}v.push(s)}if(c){for(var l=0,p=v;l<p.length;l++)(d=p[l]).$a=c;s=n.id,He[s]&&($=c=s);do{if((r=He[c])&&(u=r.$v)){for(i in(o=u.$so)[t])o={r:i,v:c,n:i},i?Q(n,i)&&h.push(o):$&&h.unshift(o);if(u.$e&&!$){f&&!f.v&&(f.v=c);break}$=0}}while(r&&(c=r.pId))}}return h},Qe=function(n){for(var t,r,i,o,a,f,u,c=n.target,h=n.type,s=[];c!=e;){if((t=Je(c,h)).length){s=[];for(var d=0,v=t;d<v.length;d++){var l=v[d],p=l.v,m=(l.r,l.n),b=l.p,w=l.i;if(f!=p){if(f&&n.isPropagationStopped())break;f=p}if(o=(i=He[p])&&i.$v){if((a=o[m+$+h])&&(n.eventTarget=c,u=b||{},w&&w.indexOf($)>0&&E(o.$d.$a,u,u={}),n[g]=u,Z(a,n,o),n.isImmediatePropagationStopped()))break;0}else n.stopPropagation();0}}if((r=c.$)&&r[h]||n.isPropagationStopped())break;s.push(c),c=c.parentNode||e}for(var y=0,k=s;y<k.length;y++)(r=(c=k[y]).$||(c.$={}))[h]=1},Ge={input_value:1,input_checked:1,input_disabled:1,input_readonly:1,textarea_value:1,textarea_checked:1,textarea_disabled:1,textarea_readonly:1,option_selected:1},Ke={area:1,br:1,col:1,embed:1,hr:1,img:1,input:1,param:1,source:1,track:1,wbr:1},We=/^<([a-z\d]+)((?:\s+[-A-Za-z\d_]+(?:="[^"]*")?)*)\s*(\/?)>/,Xe=/([-A-Za-z\d_]+)(?:="([^"]*)")?/g,Ye=/^<\/[a-z\d+]+>/,en=function(e,n){var t=P(n);e.$c[t]?e.unmountVframe(t,1):e.unmountZone(t,1)},nn=function(e,n,t,r){for(var i,o,a,f=0,u=n.i;f<u.length;f++)o=(i=u[f]).d,H(t.j,o)||(i.e?"value"==o?e.value="":e[o]=!1:"id"==o?r.d.push([e,""]):e.removeAttribute(o));for(var c=0,h=t.i;c<h.length;c++)o=(i=h[c]).d,a=i.f,n.j[o]!=a&&(i.e?"value"==o?e.value=a:e[o]=!0:"id"==o?r.d.push([e,a]):e.setAttribute(o,a))},tn=function(e,n,t,r,i,o,a,f,u){if(3==(u=e.h))return c.createTextNode(e.b);f="svg"==u?"http://www.w3.org/2000/svg":n.namespaceURI,(r=c.createElementNS(f,u)).innerHTML=e.b;for(var h=0,s=e.i;h<s.length;h++)o=(i=s[h]).d,a=i.f,i.e?"value"==o?r.value=a:r[o]=!0:"id"==o?t.d.push([r,a]):r.setAttribute(o,a);return r},rn=function(e,n,t,r,i,o,a){var f,u,c,h,s,d,v,$,l,p,g,m,b,w=e.childNodes,y={};if(n){for(f=(s=n.a).length,u=(d=t.a).length,c=0;c<f;c++)(p=(v=s[c]).k)&&(y[p]={l:w[c],m:v});for(c=0;c<u;c++)if(v=s[c],g=y[p=($=d[c]).k]){if(m=g.l,b=g.m,m!=w[c]){for(s.splice(c,0,v=b),h=s.length;h--;)if(s[h].k==p){s.splice(h,1);break}e.insertBefore(m,w[c])}on(w[c],e,v,$,r,i,o,a)}else v?y[v.k]?(s.splice(c,0,$),f++,e.insertBefore(tn($,e,r),w[c])):on(w[c],e,v,$,r,i,o,a):e.appendChild(tn($,e,r));for(c=u;c<f;c++)l=e.lastChild,en(i,l),e.removeChild(l),r.c=1}else r.c=1,e.innerHTML=t.b},on=function(e,n,t,r,i,o,a,f){if(t.h==r.h)if(3==t.h)t.b!=r.b&&(e.nodeValue=r.b);else{var u=r.j[b],c=r.b,h=void 0,s=void 0,d=void 0,v=He[e.id],l=void 0,p=void 0,w=void 0,y=void 0,k=void 0;u&&v?(l=v.$v,w=(p=ee(u))[g],u.indexOf($)>-1&&E(a,w,w),y=c!=v.$i,k=!l.$e,v.$n==p[m]&&l.$g?(v.$i=c,v[m]=u,p={keys:f,inner:c,deep:k,html:y},nn(e,t,r,i),Z(l.$g,[w,p],l)&&l.$b(),s=p.deep):(d=1,s=1,h=1)):(h=1,s=1,d=v),d&&v.unmountVframe(0,1),h&&nn(e,t,r,i),s&&!Ke[r.h]&&(i.c=1,rn(e,t,r,i,o,a,f))}else en(o,e),n.replaceChild(tn(r,n,i),e),i.c=1},an=function(e,n,t,r){var i,o,f,u=e.$b,c=He[u],s=c&&c.$v,d={d:[]},v=_(u);if(s&&s.$a>0&&(i=s.$e)){if(t){f=function(e){for(var n,t,r,i,o,f,u,c,h,s,d,v=e.length,$=0,l={a:[],b:e},p=[{c:l}],g=function(e,n){n.replace(Xe,function(n,t,r){"id"==t&&(d=r),f.push({d:t,e:Ge[e+"_"+t],f:r}),h[t]=r})};$<v;)n=1,0==(r=e.slice($)).indexOf("</")?(i=r.match(Ye))&&(c=(l=p.pop()).c,f=e.slice(l.g,$),"textarea"==c.h?(c.i.push({d:"value",f:f,e:1}),c.j.value=f,c.a=a):c.b=f,l=p[p.length-1].c,$+=i[0].length,n=0):"<"==r[0]&&(i=r.match(We))&&(o=i[1],u=i[3]||Ke[o],f=[],h={},d="",g(o,i[2]),c={k:d,h:o,i:f,j:h,a:[]},$+=i[0].length,l.a.push(c),u||(p.push({c:c,g:$}),l=c),n=0),n&&($+=(s=(t=r.indexOf("<"))<0?r:r.substring(0,t)).length,c={h:3,b:s},l.a.push(c));return l}(hn(i($,n),u)),rn(v,e.$d,f,d,c,n,r),e.$d=f;for(var l=0,p=d.d;l<p.length;l++)(o=p[l])[0].id=o[1];d.c&&(s.endUpdate(u),h.trigger({type:"htmlchanged",vId:u}))}s.fire("domready")}},fn=function(e){var n;this.$b=e,this.$c=1,this.$a=((n={vId:e})[$]=1,n),this.$k={}};O(fn[p],{get:function(e,n){return n=this.$a,e&&(n=n[e]),n},set:function(e){var n=this,t=n.$a,r=n.$k;return e&&(n.$c=S(e,t,r)||n.$c),n},digest:function(e,n,t){var r=this;return r.set(e),e=r.$a,n=r.$k,t=r.$c,r.$c=0,r.$k={},an(r,e,t,n),r},snapshot:function(){return this.$e=v(this.$a),this},altered:function(){if(this.$e)return this.$e!=v(this.$a)}});var un=/^(\$?)([^<]*)<([^>]+)>$/,cn=/\x1f/g,hn=function(e,n){return(e+o).replace(cn,n)},sn=function(e,n,t){return e.$h?t=e:((t=function(e){Z(t.$h,e,this)}).$h=[e],t.$i=1),t.$h=t.$h.concat(n.$h||n),t},dn=function(e,n){var t,r,i=e.$r;for(t in i)r=i[t],(n||r.x)&&vn(i,t,1)},vn=function(e,n,t,r){var i,o,f=e[n];return f&&f!=r&&((i=(o=f.e).destroy)&&t&&Z(i,a,o),delete e[n]),o},$n=function(n,t){var r,i,o,a,f,u,c=n.$eo,h=n.$so,s=n.$el,d=n.id;for(r in c)i=r,o=h[r],a=t,void 0,void 0,f=0|De[i],u=a?-1:1,f&&a!==f||K(e,i,Qe,a),De[i]=f+u,o&&(Fe[i]=(0|Fe[i])+u);for(var v=0,$=s;v<$.length;v++)r=$[v],K(r.e,r.n,G,t,{i:d,v:n,f:r.f,e:r.e})},ln=[],pn={win:u,doc:c},gn=function(e){if(!e[$]){e[$]=[];var n=e[p],t=void 0,r=void 0,i=void 0,o={},a=[],u={},c=void 0,h=void 0,s=void 0,d=void 0,v=void 0,l={};if(r=n.mixins){for(var g=0,m=r;g<m.length;g++)for(s in c=m[g])t=c[s],i=l[s],"ctor"!=s?(un.test(s)&&(i?t=sn(i,t):t.$i=1),l[s]=t):e[$].push(t);for(s in l)H(n,s)||(n[s]=l[s])}for(s in n)if(t=n[s],r=s.match(un)){h=r[1],i=r[2];for(var b=0,w=r[3].split(f);b<w.length;b++){if(d=w[b],c=pn[i],v=1,h){if(c){a.push({f:t,e:c,n:d});continue}v=2,(c=u[d])||(c=u[d]={}),c[i]=1}o[d]=o[d]|v,(c=n[d=i+$+d])?c.$i&&(t.$i?n[d]=sn(c,t):H(n,s)&&(n[d]=t)):n[d]=t}}x="$b",V=(y=n)[k="render"],y[k]=y[x]=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];(I=this).$a>0&&(I.$a++,I.fire("rendercall"),dn(I),Z(V,e,I))},n.$eo=o,n.$el=a,n.$so=u,n.$e=n.tmpl,n.$g=n.assign}var y,k,x,V,I;return e[$]},mn=function(e){var n,t,r,i=e.$l;if(i.f&&(i.p&&(n=de[m]),!n&&i.k)){r=de[g];for(var o=0,a=i.k;o<a.length&&(t=a[o],!(n=H(r,t)));o++);}return n},bn=function(e,n,t,r){(r=this).owner=n,r.id=e,r.$l={k:[]},r.$r={},r.$a=1,r.updater=r.$d=new fn(r.id),Z(ln,t,r)},wn=bn[p];O(bn,{merge:function(){for(var e,n,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var i=0,o=t;i<o.length;i++)(n=(e=o[i])&&e.ctor)&&ln.push(n),O(wn,e)},extend:function(e,n){var t=this,r=(e=e||{}).ctor,i=[];r&&i.push(r);var o=function(e,n,r,o){t.call(this,e,n,r),Z(i.concat(o),r,this)};return o.extend=t.extend,F(o,t,e,n)}}),O(wn,ie,{init:d,wrapEvent:function(e){return hn(e,this.id)},beginUpdate:function(e,n){(n=this).$a>0&&n.$f&&n.owner.unmountZone(e,1)},endUpdate:function(e,n,t,r,i){(t=this).$a>0&&(e=e||t.id,n?i=n:(i=t.$f,t.$f=1),(r=t.owner).mountZone(e,n),i||s(t.wrapAsync(function(){!function(e,n,t){for(n=e.$e;n.length;)(t=n.shift()).r||e.invoke(t.n,t.a),delete n[t.k]}(r)}),0))},wrapAsync:function(e,n){var t=this,r=t.$a;return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(r>0&&r==t.$a)return e.apply(n||t,i)}},observeLocation:function(e,n){var r;(r=this.$l).f=1,t(e)&&(n=e[m],e=e[g]),r.p=n,e&&(r.k=(e+o).split(f))},observeState:function(e){this.$os=(e+o).split(f)},capture:function(e,n,t,r){return r=this.$r,n?(vn(r,e,1,n),r[e]={e:n,x:t}):n=(r=r[e])&&r.e,n},release:function(e,n){return vn(this.$r,e,n)},leaveTip:function(e,n){var t=this,r=function(i){var o="a",a="b";"change"!=i.type&&(o="b",a="a"),r[o]?(i.prevent(),i.reject()):n()?(i.prevent(),r[a]=1,t.leaveConfirm(e,function(){r[a]=0,i.resolve()},function(){r[a]=0,i.reject()})):i.resolve()},i=function(t){n()&&(t.msg=e)};Ce.on("change",r),Ce.on("pageunload",i),t.on("unload",r),t.on("destroy",function(){Ce.off("change",r),Ce.off("pageunload",i)})},render:d}),re.View=bn;var yn=n.type,kn=n.now||Date.now,xn=function(){this.id=x("b"),this.$={}};O(xn[p],{get:function(e,n,t){var i=n!=t,a=this.$;if(e){for(var f=r(e)?e.slice():(e+o).split("."),u=void 0;(u=f.shift())&&a;)a=a[u];u&&(a=t)}return i&&yn(n)!=yn(a)&&(a=n),a},set:function(e,n){var r;t(e)||((r={})[e]=n,e=r),O(this.$,e)}});var Vn=function(e,n,t){(t=this[e])&&(delete this[e],Z(t,n,t.e))},In=function(e,n,t,i,o){if(e.$d)return e;if(e.$e)return e.enqueue(In.bind(e,e,n,t,i,o));e.$e=1,r(n)||(n=[n]);for(var a,f,u,c,h,s,d,v,$,l=e.constructor,p=0,g=l.$f,m=(a=t,f=l,u=e,c=n.length,h=i,s=l.$c,d=[],v=0,$=0,function(e,n){var t,r=this;$++;var i=r.$b,o=i.k;d[e+1]=r;var l,p={bag:r,error:n};if(n?(v=n,f.fire("fail",p),t=1):s.has(o)||(o&&s.set(o,r),i.t=kn(),(l=i.a)&&Z(l,r,r),(l=i.x)&&f.clear(l),f.fire("done",p),t=1),!u.$d){var g=$==c;g&&(u.$e=0,2==h&&(d[0]=v,Z(a,d,u))),1==h&&Z(a,[n||null,r,g,e],u)}t&&f.fire("end",p)}),b=0,w=n;b<w.length;b++){var y=w[b];if(y){var k=l.get(y,o),x=k.e,V=x.$b.k,I=m.bind(x,p++),_=void 0;V&&g[V]?g[V].push(I):k.u?(V&&((_=[I]).e=x,g[V]=_,I=Vn.bind(g,V)),l.$s(x,I)):I()}}return e},_n=function(){var e=this;e.id=x("s"),e.$g=[]};O(_n[p],{all:function(e,n){return In(this,e,n,2)},save:function(e,n){return In(this,e,n,2,1)},one:function(e,n){return In(this,e,n,1)},enqueue:function(e){var n=this;return n.$d||(n.$g.push(e),n.dequeue(n.$h)),n},dequeue:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var t,r=this;r.$e||r.$d||(r.$e=1,s(function(){r.$e=0,r.$d||(t=r.$g.shift())&&Z(t,r.$h=e)},0))},destroy:function(e){(e=this).$d=1,e.$g=0}});var jn=function(e,n){return[v(n),v(e)].join($)},Sn=function(e,n,t,r){(r=e&&e.$b)&&n[r.n]&&t.del(r.k)},An=O({add:function(e){var n,t=this.$b;r(e)||(e=[e]);for(var i=0,o=e;i<o.length;i++)if(n=o[i]){var a=n.name,f=n.cache;n.cache=0|f,t[a]=n}},create:function(e){var n=this.meta(e),r=0|e.cache||n.cache,i=new xn;i.set(n),i.$b={n:n.name,a:n.after,x:n.cleans,k:r&&jn(n,e)},t(e)&&i.set(e);var o=n.before;return o&&Z(o,i,i),this.fire("begin",{bag:i}),i},meta:function(e){return this.$b[e.name||e]||e},get:function(e,n){var t,r;return n||(t=this.cached(e)),t||(t=this.create(e),r=1),{e:t,u:r}},clear:function(e){this.$c.each(Sn,te((e+o).split(f)))},cached:function(e){var n,t,r=this.$c,i=this.meta(e),o=0|e.cache||i.cache;if(o&&(t=jn(i,e)),t){var a=this.$f[t];a?n=a.e:(n=r.get(t))&&kn()-n.$b.t>o&&(r.del(t),n=0)}return n}},ie);return _n.extend=function(e,n,t){var r=function(){_n.call(this)};return r.$s=e,r.$c=new z(n,t),r.$f={},r.$b={},F(r,_n,null,An)},re.Service=_n,O(d[p],ie),d.extend=function e(n,t){var r=this,i=n&&n.ctor,o=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];r.apply(this,e),i&&i.apply(this,e)};return o.extend=e,F(o,r,n,t)},re.Base=d,B=bn.extend(),re}();