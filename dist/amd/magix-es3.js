/*!3.8.0 MIT kooboy_li@163.com*/define("magix",["$"],function(e){var t,n=e.isPlainObject,r=e.isArray,i=0,o=[],a=window,f=document,u=e(f),c=a.setTimeout,h=function(){},s=JSON.stringify,$=/[#?].*$/,d=/([^=&?\/#]+)=?([^&#?]*)/g,v=/(?!^)=|&/,l=function(e){return(e||"mx_")+i++},p=l(),m={rootId:l(),defaultView:p,error:function(e){throw e}},g=function(e){return"object"==typeof e?e:f.getElementById(e)},b=function(e){return!e||"object"!=typeof e},y=function(e,t,n){var r,i,o,a=0;for(o in e)r=e[o],i=t[o],b(r)&&i===r||(n[o]=1,a=1),t[o]=r;return a},w=function(e,t,n){if(e=g(e),t=g(t),e&&t&&!(n=e==t))try{n=16==(16&t.compareDocumentPosition(e))}catch(e){}return n},x=function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)C(t,i)&&(e[i]=t[i])}return e},k=function(e,t,n){t=[];for(n in e)C(e,n)&&t.push(n);return t},I=m.hasOwnProperty,V=e("head"),N=function(e,t){t&&!N[e]&&(N[e]=1,V.append("<style>"+t))},S=function(e,t,n,i,a){t=t||o,r(e)||(e=[e]),r(t)||(t=[t]);for(var f=0,u=e;f<u.length;f++){a=u[f];try{i=a&&a.apply(n,t)}catch(e){m.error(e)}}return i},C=function(e,t){return e&&I.call(e,t)},T=function(e,t,n){var r,i;for(r in t)i=t[r],n[r]="\x1e"==(i+"")[0]?e[i]:i},q=function(e,t,n){n=t.params,T(e,n,n);try{return s(t)}catch(e){}},U=function(e,t){return t.f-e.f||t.t-e.t},j=function(e,t,n,r){(r=this).c=[],r.b=t||5,r.x=r.b+(e||20),r.r=n};x(j.prototype,{get:function(e){var t=this.c["\x1e"+e];return t&&(t.f++,t.t=i++,t=t.v),t},each:function(e,t,n,r){for(var i=0,o=r=(n=this).c;i<o.length;i++)e(o[i].v,t,n)},set:function(e,t){var n=this.c,r="\x1e"+e,o=n[r],a=this.b;if(!o){if(n.length>=this.x)for(n.sort(U);a--;)(o=n.pop()).f>0&&this.del(o.o);o={o:e},n.push(o),n[r]=o}o.v=t,o.f=1,o.t=i++},del:function(e){e="\x1e"+e;var t=this.c,n=t[e],r=this.r;n&&(n.f=-1,n.v="",delete t[e],r&&S(r,n.o))},has:function(e){return C(this.c,"\x1e"+e)}});var A,P,E=function(e,t){if(e)if(p==e)A||(A=$t.extend()),t(A);else if(r(e))require(e,t);else try{t(require(e))}catch(n){require([e],t)}else t&&t()},O=function(){},H=function(e,t,n,r,i){return O.prototype=t.prototype,i=new O,x(i,n),x(e,r),i.constructor=e,e.prototype=i,e},R=e.find||e.zepto,L=R.matchesSelector||R.matches,Z=function(e,t){t=e.data,e.eventTarget=t.e,S(t.f,e,t.v)},M=function(t,n,r,i,o){o&&(n+="."+o.i),i?e(t).off(n,r):e(t).on(n,o,r)},B=new j,D=function(e,t,n){try{n=decodeURIComponent(n)}catch(e){}P[t]=n},z=function(e){var t,n=B.get(e);return n||(P={},e==(t=e.replace($,""))&&v.test(t)&&(t=""),e.replace(t,"").replace(d,D),B.set(e,n={a:t,b:P})),{path:n.a,params:x({},n.b)}},F=function(e,t,n){var r,i,o,a=[];for(i in t)r=t[i]+"",(!n||r||C(n,i))&&(r=encodeURIComponent(r),a.push(o=i+"="+r));return o&&(e+=(e&&(~e.indexOf("?")?"&":"?"))+a.join("&")),e},J=function(e,t){var n,r={};if(e)for(var i=0,o=e;i<o.length;i++)n=o[i],r[t&&n?n[t]:n]=t?n:1+(0|r[n]);return r},Q={config:function(e,t){return t=m,e&&(t=n(e)?x(t,e):t[e]),t},boot:function(e){x(m,e),E(m.ini,function(t){x(m,t,e),E(m.exts,function(){we.on("changed",qe),te.on("changed",qe),me()})})},toMap:J,toTry:S,toUrl:F,parseUrl:z,mix:x,has:C,keys:k,inside:w,node:g,applyStyle:N,guid:l,use:E,Cache:j},X={fire:function(e,t,n,r){var i,o,a,f,u=this,c=u["\x1e"+e];if(t||(t={}),t.type||(t.type=e),c)for(o=(i=c.length)-1;i--;)(f=c[a=r?i:o-i]).f?(f.x=1,S(f.f,t,u),f.x=""):f.x||(c.splice(a,1),o--);(c=u["on"+e])&&S(c,t,u),n&&u.off(e)},on:function(e,t){var n="\x1e"+e;(this[n]||(this[n]=[])).push({f:t})},off:function(e,t){var n,r="\x1e"+e,i=this[r];if(t){if(i)for(var o=0,a=i;o<a.length;o++)if((n=a[o]).f==t){n.f="";break}}else delete this[r],delete this["on"+e]}};Q.Event=X;var _={},G={},K={},W=0,Y=function(e){for(var t=0,n=e=(e+"").split(",");t<n.length;t++){var r=n[t];C(G,r)?G[r]++:G[r]=1}return e},ee=function(e){for(var t,n=0,r=e;n<r.length;n++)t=r[n],C(G,t)&&(--G[t]||(delete G[t],delete _[t]))},te=x({get:function(e){var t=e?_[e]:_;return t},set:function(e){W=y(e,_,K)||W},digest:function(e){e&&te.set(e),W&&(W=0,this.fire("changed",{keys:K}),K={})},diff:function(){return K},clean:function(e){return{ctor:function(){e=Y(e),this.on("destroy",function(){return ee(e)})}}}},X);Q.State=te;var ne,re,ie,oe,ae,fe,ue=new j,ce=new j,he=a.location,se=0,$e={query:{},params:{},href:""},de=/(?:^.*\/\/[^\/]+|#.*$)/gi,ve=/^[^#]*#?!?/,le=function(e){return this.params[e]||""},pe=function(e,t){e="#!"+e,t?he.replace(e):he.hash=e},me=function(){var e,t,n=be().srcHash;M(a,"hashchange",function(r,i,o){t||(i=be(),(e=i.srcHash)!=n&&(o=function(){r.p=1,n=e,t="",pe(e),ye()},r={reject:function(){r.p=1,t="",pe(n)},resolve:o,prevent:function(){t=1}},we.fire("change",r),t||r.p||o()))}),a.onbeforeunload=function(e,t,n){if(e=e||a.event,t={},we.fire("pageunload",t),n=t.msg)return e&&(e.returnValue=n),n},ye()},ge=f.title,be=function(e){e=e||he.href;var t,r,i,o,a,f=ue.get(e);return f||(t=e.replace(de,""),r=e.replace(ve,""),i=z(t),o=z(r),a=x({},i.params,o.params),function(e,t){if(re||(re=m.routes||{},ie=m.unmatchView,oe=m.defaultView,ae=m.defaultPath||"/",fe=m.rewrite),!e.view){var r=e.hash.path||0||ae;fe&&(r=fe(r,e.params,re)),t=re[r]||ie||oe,e.path=r,e.view=t,n(t)&&x(e,t)}}(f={get:le,href:e,srcQuery:t,srcHash:r,query:i,hash:o,params:a}),ue.set(e,f)),f},ye=function(){var e=be(),t=function(e,t){var n=e.href,r=n+"\x1e"+t.href,i=ce.get(r);if(!i){var o,a;i={params:a={},force:!n};for(var f=e.params,u=t.params,c=function(e){var t=f[e],n=u[e];t!=n&&(a[e]={from:t,to:n},o=1)},h=0,s=k(f).concat(k(u));h<s.length;h++)c(s[h]);f=e,u=t,a=i,c("path"),c("view"),ce.set(r,i={a:o,b:i})}return i}($e,$e=e);return!se&&t.a&&((ne=t.b).path&&(f.title=e.title||ge),we.fire("changed",ne)),se=0,ne},we=x({parse:be,diff:ye,to:function(e,t,r,i){!t&&n(e)&&(t=e,e="");var o=z(e),a=o.params,f=o.path,u=$e.path,c=$e.params,h=$e.query.params;if(x(a,t),f)for(u in h)C(a,u)||(a[u]="");else c&&(f=u,a=x({},c,a));!function(e,t,n,r,i,o){(e=F(e,t,o))!=n.srcHash&&(se=i,pe(e,r))}(f,a,$e,r,i,h)}},X);Q.Router=we;var xe,ke,Ie=function(e){if(!e.$a&&!e.$b&&e.$cc==e.$rc){e.$cr||(e.$cr=1,e.$ca=0,e.fire("created"));var t=void 0,n=e.id,r=e.pId;(t=Ne[r])&&!C(t.$d,n)&&(t.$d[n]=1,t.$rc++,Ie(t))}},Ve=function(e,t){if(!e.$ca&&e.$cr){e.$cr=0,e.$ca=1,e.fire("alter",t);var n=void 0,r=e.id,i=e.pId;(n=Ne[i])&&C(n.$d,r)&&(n.$rc--,delete n.$d[r],Ve(n,t))}},Ne={},Se=[],Ce=0,Te=function(e,t,n){if(e&&e.$f!=Ce&&(n=e.$v)&&n.$a>1){(t?function(e,t,n){var r,i=e.$os;if(i)for(var o=0,a=i;o<a.length&&(r=a[o],!(n=C(t,r)));o++);return n}(n,t):st(n))&&n.$b();for(var r=void 0,i=0,o=e.children();i<o.length;i++)r=o[i],Te(Ne[r],t)}},qe=function(e){var n,r=function(e){return xe||(t=f.body,g(e=m.rootId)||(t.id=e),xe=new Ue(e)),xe}();(n=e.view)?r.mountView(n.to):(Ce=i++,Te(r,e.keys))},Ue=function(e,t,n){(n=this).id=e,n.$c={},n.$cc=0,n.$rc=0,n.$g=1,n.$d={},n.$e=[],n.pId=t,function(e,t){C(Ne,e)||(Ne[e]=t,Ue.fire("add",{vframe:t}),(e=g(e))&&(e.vframe=t))}(e,n)};x(Ue,{all:function(){return Ne},get:function(e){return Ne[e]}},X),x(Ue.prototype,X,{mountView:function(e,t){var n,r,i,o,a,f,u=this,c=u.id,h=u.pId,s=u.$g,$=g(c);!u.$h&&$&&(u.$h=1,u.$i=$.innerHTML),u.unmountView(),u.$a=0,$&&e&&(u.path=e,n=z(e),i=n.path,r=++s,o=n.params,f=(f=(f=(f=Ne[h])&&f.$v)&&f.$d)&&f.$a,e.indexOf("\x1e")>0&&T(f,o,o),u.$j=q(f,n),u.$n=n.path,x(o,t),E(i,function(e){if(r==u.$g){if(!e)return m.error(Error("id:"+c+" cannot load:"+i));a=ht(e),i=new e({owner:u,id:c},o,a);u.$v=i,u.$f=Ce,ft(i),S(i.init,o,i),i.$b(),i.$e||(u.$h=0,i.$f||i.endUpdate())}}))},unmountView:function(){var t,n,r=this,i=r.$v,o=r.id;r.$e=[],i&&(ke||(n=1,ke={id:o}),r.$a=1,r.unmountZone(0,1),Ve(r,ke),r.$v=0,i.$a>0&&(i.$a=0,i.fire("destroy",0,1,1),ot(i,1),ft(i,1),i.owner=0),i.$a--,(t=g(o))&&r.$h&&e(t).html(r.$i),n&&(ke=0)),r.$g++},mountVframe:function(e,t,n){var r,i=this,o=i.id,a=i.$c;return Ve(i,{id:e}),(r=Ne[e])||(C(a,e)||(i.$o=0,i.$cc++),a[e]=e,(r=Se.pop())?Ue.call(r,e,o):r=new Ue(e,o)),r.mountView(t,n),r},mountZone:function(t,n){var r,i,o=this,a=[];t=t||o.id;var f=e("#"+t+" [mx-view]");o.$b=1;for(var u=0,c=f;u<c.length;u++)i=(r=c[u]).id||(r.id=l()),r.$m||(r.$m=1,a.push([i,r.getAttribute("mx-view")]));for(var h=0,s=a;h<s.length;h++)i=($=s[h])[0],r=$[1],a[i]?m.error(Error("vf.id duplicate:"+i+" at "+o.path)):o.mountVframe(a[i]=i,r);o.$b=0,n||Ie(o);var $},unmountVframe:function(e,t){var n;if(e=e?this.$c[e]:this.id,n=Ne[e]){var r=n.$cr,i=n.pId;n.unmountView(),function(e,t,n){(n=Ne[e])&&(delete Ne[e],Ue.fire("remove",{vframe:n,fcc:t}),(e=g(e))&&(e.$m=e.vframe=0))}(e,r),n.id=n.pId=n.$c=n.$d=n.$h=0,n.off("alter"),n.off("created"),Se.push(n),(n=Ne[i])&&C(n.$c,e)&&(delete n.$c[e],n.$o=0,n.$cc--,t||Ie(n))}},unmountZone:function(e,t){var n;for(n in this.$c)(!e||n!=e&&w(n,e))&&this.unmountVframe(n,1);t||Ie(this)},parent:function(e,t){for(t=this,e=e>>>0||1;t&&e--;)t=Ne[t.pId];return t},children:function(e){return(e=this).$o||(e.$o=k(e.$c))},invoke:function(e,t){var n,r,i,o,a,f=this.$e;return(r=this.$v)&&r.$f?n=(i=r[e])&&S(i,t,r):((o=f[a="\x1e"+e])&&(o.r=t===o.a),o={n:e,a:t,k:a},f.push(o),f[a]=o),n}}),Q.Vframe=Ue,e.fn.invokeView=function(e,t){if(this.length){var n=this[0].vframe;if(void 0===t)return n&&n.invoke(e);for(var r=0;r<this.length;r++){(n=this[r].vframe)&&n.invoke(e,t)}}};var je=new j(30,10),Ae=/(?:([\w\-]+)\x1e)?([^(]+)\(([\s\S]*)?\)/,Pe={},Ee={},Oe=function(e,n){var r,i,a,f,u,c,h,s=[],$=e,d=e.getAttribute("mx-"+n),v=[],l=0;if(d&&((u=je.get(d))||((u={v:(u=d.match(Ae)||o)[1],n:u[2],i:u[3]}).p=u.i&&S(Function("return "+u.i),o,e),je.set(d,u)),u=x({},u,{r:d}),s.push(u)),u&&!u.v||Ee[n]){if(!(h=e.$a))for(v.push($);$!=t&&($=$.parentNode);){if(Ne[i=$.id]||(i=$.$v)){h=i;break}v.push($)}if(h){for(var p=0,m=v;p<m.length;p++)(d=m[p]).$a=h;$=e.id,Ne[$]&&(l=h=$);do{if((r=Ne[h])&&(c=r.$v)){f=(a=c.$so)[n];for(i in f)a={r:i,v:h,n:i},i?L(e,i)&&s.push(a):l&&s.unshift(a);if(c.$e&&!l){u&&!u.v&&(u.v=h);break}l=0}}while(r&&(h=r.pId))}}return s},He=function(e){for(var n,r,i,o,a,f,u,c,h=e.target,s=e.type,$=[];h!=t;){if((n=Oe(h,s)).length){$=[];for(var d=0,v=n;d<v.length;d++){var l=v[d],p=l.v,m=(l.r,l.n),g=l.p,b=l.i;if(u!=p){if(u&&e.isPropagationStopped())break;u=p}if(i=Ne[p],(o=i&&i.$v)&&(a=m+"\x1e"+s,(f=o[a])&&(e.eventTarget=h,c=g||{},b&&b.indexOf("\x1e")>0&&T(o.$d.$a,c,c={}),e.params=c,S(f,e,o),e.isImmediatePropagationStopped())))break}}if((r=h.$)&&r[s]||e.isPropagationStopped())break;$.push(h),h=h.parentNode||t}for(var y=0,w=$;y<w.length;y++)(r=(h=w[y]).$||(h.$={}))[s]=1},Re=function(e,n,r){var i=0|Pe[e],o=r?-1:1;i&&r!==i||M(t,e,He,r),Pe[e]=i+o,n&&(Ee[e]=(0|Ee[e])+o)},Le=/\\|'/g,Ze=/\r|\n/g,Me=/<%([@=!])?([\s\S]*?)%>|$/g,Be=new j,De=function(e,t){var n=Be.get(e);return n||(n=function(e){var t=0,n="$p+='";return e.replace(Me,function(r,i,o,a){return n+=e.slice(t,a).replace(Le,"\\$&").replace(Ze,"\\n"),t=a+r.length,"@"==i?n+="';$p+=$i("+o+");$p+='":"="==i?n+="'+$e("+o+")+'":"!"==i?n+="'+$n("+o+")+'":o&&(n+="';"+o+";$p+='"),r}),n+="';",n="var $t,$p='',$em={'&':'amp','<':'lt','>':'gt','\"':'#34','\\'':'#39','`':'#96'},$er=/[&<>\"'`]/g,$n=function(v){return v==null?'':''+v},$ef=function(m){return '&'+$em[m]+';'},$e=function(v){return $n(v).replace($er,$ef)},$i=function(v,k,f){for(f=$$[$g];--f;)if($$[k=$g+f]===v)return k;$$[k=$g+$$[$g]++]=v;return k},$um={'!':'%21','\\'':'%27','(':'%28',')':'%29','*':'%2A'},$uf=function(m){return $um[m]},$uq=/[!')(*]/g,$eu=function(v){return encodeURIComponent($n(v)).replace($uq,$uf)},$qr=/[\\\\'\"]/g,$eq=function(v){return $n(v).replace($qr,'\\\\$&')};"+n+"return $p",Function("$g","$$",n)}(e),Be.set(e,n)),n("\x1e",t)},ze={option:[1,"<select multiple>"],thead:[1,"<table>"],col:[2,"<table><colgroup>"],tr:[2,"<table><tbody>"],td:[3,"<table><tbody><tr>"],area:[1,"<map>"],param:[1,"<object>"],all:[0,""]},Fe=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i;ze.optgroup=ze.option,ze.tbody=ze.tfoot=ze.colgroup=ze.caption=ze.thead,ze.th=ze.td;var Je=f.implementation.createHTMLDocument(""),Qe=Je.createElement("base");Qe.href=f.location.href,Je.head.appendChild(Qe);var Xe=function(e,t){var n=function(e){return e.id||(e.id=l())}(t);e.$c[n]?e.unmountVframe(n,1):e.unmountZone(n,1)},_e={INPUT:[{a:"defaultValue",b:"value"},{a:"defaultChecked",b:"checked"},{a:"disabled"},{a:"readonly"}],OPTION:[{a:"selected"}]};_e.TEXTAREA=_e.INPUT;var Ge=function(e,t,n,r,i,o){for(var a,f,u,c,h=e.firstChild,s=t.firstChild,$=0,d={};h;)$++,u=(f=h).id,h=h.nextSibling,u&&(d[u]=f);for(h=e.firstChild;s;)$--,a=s,s=s.nextSibling,(u=a.id)&&(c=d[u])?(delete d[u],c!==h?e.insertBefore(c,h):h=h.nextSibling,Ke(c,a,e,n,r,i,o)):h?(d[u=h.id]&&delete d[u],f=h,h=h.nextSibling,Ke(f,a,e,n,r,i,o)):(e.appendChild(a),n.c=1);for(u in d)$--,f=d[u],Xe(r,f),e.removeChild(f),n.c=1;for(;--$>=0;)f=e.lastChild,Xe(r,f),e.removeChild(f),n.c=1},Ke=function(e,t,n,r,i,o,a){if(e.nodeType===t.nodeType)if(1===e.nodeType)if(e.nodeName===t.nodeName){var f=t.getAttribute("mx-view"),u=t.innerHTML,c=void 0,h=void 0,s=void 0,$=Ne[e.id],d=void 0,v=void 0,l=void 0,p=void 0,m=void 0,g=void 0,b=void 0,y=void 0;f&&$?(p=$.$j,d=$.$v,l=(v=z(f)).params,f.indexOf("\x1e")>-1&&T(o,l,l),g=p!=(m=q(o,v)),b=u!=$.$i,y=!d.$e,(!p||y||b||g)&&($.$n==v.path&&d.$g?(g&&e.setAttribute("mx-view",f),$.$i=u,$.$j=m,$.path=f,m={keys:a,node:t,deep:y,data:g,html:b},S(d.$g,[l,m],d)&&d.$b(),h=m.deep):(s=1,h=1,c=1))):(c=1,h=1,s=$),s&&$.unmountVframe(0,1),c&&function(e,t,n,r){var i,o,a,f,u,c,h=e.attributes,s=t.attributes,$=e.nodeName,d=_e[$];if(d)for(var v=0,l=d;v<l.length;v++)e[(u=l[v]).a]!=t[u.a]&&(e[a=u.b||u.a]=t[a]);for(a=h.length;a--;)f=(i=h[a]).namespaceURI,u=i.localName,(o=s.getNamedItemNS(f,u))||r&&"id"==u||h.removeNamedItemNS(f,u);for(a=s.length;a--;)f=(i=s[a]).namespaceURI,u=i.localName,o=h.getNamedItemNS(f,u),(c=r&&"id"==u)&&($=i.value,i.value=""),o?o.value!==i.value&&(o.value=i.value,c&&n.d.push([o,$])):(s.removeNamedItemNS(f,u),h.setNamedItemNS(i),c&&n.d.push([i,$]))}(e,t,r,s),h&&(r.c=1,Ge(e,t,r,i,o,a))}else Xe(i,e),n.replaceChild(t,e),r.c=1;else e.nodeValue!==t.nodeValue&&(e.nodeValue=t.nodeValue,r.c=1);else Xe(i,e),n.replaceChild(t,e),r.c=1},We=/\d+\x1d/g,Ye=function(e,t,n,r){var i,o,a,f=e.$b,c=Ne[f],h=c&&c.$v,s={d:[]},$=g(f);if(h&&h.$a>0&&(i=h.$e)){if(!i["\x1e"]){i["\x1e"]=1;var d=function(e){return d[e].tmpl},v=void 0,l=i.subs;if(l){for(a=l.length;a--;)(v=l[a]).s&&(d[v.s]=v,v.tmpl=v.tmpl.replace(We,d));i.html=i.html.replace(We,d)}}if(n){o=rt(De(i.html,t),f),Ge($,function(e){var t=Je.createElement("div"),n=(Fe.exec(e)||[0,""])[1].toLowerCase(),r=ze[n]||ze.all;t.innerHTML=r[1]+e;for(var i=r[0];i--;)t=t.lastChild;return t}(o),s,c,t,r);for(var p=0,m=s.d;p<m.length;p++)(a=m[p])[0].value=a[1];s.c&&(h.endUpdate(f),u.trigger({type:"htmlchanged",vId:f}))}h.fire("domready")}},et=function(e){this.$b=e,this.$c=1,this.$a=(t={vId:e},t["\x1e"]=1,t),this.$k={};var t};x(et.prototype,{get:function(e,t){return t=this.$a,e&&(t=t[e]),t},set:function(e){var t=this,n=t.$a,r=t.$k;return e&&(t.$c=y(e,n,r)||t.$c),t},digest:function(e,t,n){var r=this;return r.set(e),e=r.$a,t=r.$k,n=r.$c,r.$c=0,r.$k={},Ye(r,e,n,t),r},snapshot:function(){return this.$d=s(this.$a),this},altered:function(){if(this.$d)return this.$d!=s(this.$a)}});var tt=/^(\$?)([^<]*)<([^>]+)>$/,nt=/\x1f/g,rt=function(e,t){return(e+"").replace(nt,t)},it=function(e,t,n){return e.$h?n=e:((n=function(e){S(n.$h,e,this)}).$h=[e],n.$i=1),n.$h=n.$h.concat(t.$h||t),n},ot=function(e,t){var n,r,i=e.$r;for(n in i)r=i[n],(t||r.x)&&at(i,n,1)},at=function(e,t,n,r){var i,a,f=e[t];return f&&f!=r&&((i=(a=f.e).destroy)&&n&&S(i,o,a),delete e[t]),a},ft=function(e,t){var n,r=e.$eo,i=e.$so,o=e.$el,a=e.id;for(n in r)Re(n,i[n],t);for(var f=0,u=o;f<u.length;f++)n=u[f],M(n.e,n.n,Z,t,{i:a,v:e,f:n.f,e:n.e})},ut=[],ct={win:a,doc:f},ht=function(e){if(!e["\x1e"]){e["\x1e"]=[];var t=e.prototype,n=void 0,r=void 0,i=void 0,o=void 0,a={},f=[],u={},c=void 0,h=void 0,s=void 0,$=void 0,d=void 0,v={};if(r=t.mixins){for(var l=0,p=r;l<p.length;l++){c=p[l];for(s in c)n=c[s],i=v[s],"ctor"!=s?(tt.test(s)&&(i?n=it(i,n):n.$i=1),v[s]=n):e["\x1e"].push(n)}for(s in v)C(t,s)||(t[s]=v[s])}for(s in t)if(n=t[s],r=s.match(tt)){h=r[1],i=r[2];for(var m=0,g=o=(o=r[3]).split(",");m<g.length;m++){if($=g[m],c=ct[i],d=1,h){if(c){f.push({f:n,e:c,n:$});continue}d=2,(c=u[$])||(c=u[$]={}),c[i]=1}a[$]=a[$]|d,(c=t[$=i+"\x1e"+$])?c.$i&&(n.$i?t[$]=it(c,n):C(t,s)&&(t[$]=n)):t[$]=n}}!function(e,t,n,r,i){r=e[t],e[t]=e[n]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];(i=this).$a>0&&(i.$a++,i.fire("rendercall"),ot(i),S(r,e,i))}}(t,"render","$b"),t.$eo=a,t.$el=f,t.$so=u,t.$e=t.tmpl,t.$g=t.assign}return e["\x1e"]},st=function(e){var t,n,r,i=e.$l;if(i.f&&(i.p&&(t=ne.path),!t&&i.k)){r=ne.params;for(var o=0,a=i.k;o<a.length&&(n=a[o],!(t=C(r,n)));o++);}return t},$t=function(e,t){x(t=this,e),t.$l={k:[]},t.$r={},t.$a=1,t.updater=t.$d=new et(t.id),S(ut,e,t)},dt=$t.prototype;x($t,{merge:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n,r,i=0,o=e;i<o.length;i++)(r=(n=o[i])&&n.ctor)&&ut.push(r),x(dt,n)},extend:function(e,t){var n=this,r=(e=e||{}).ctor,i=[];r&&i.push(r);var o=function(e,t,r){n.call(this,e,t),S(i.concat(r),t,this)};return o.extend=n.extend,H(o,n,e,t)}}),x(dt,X,{init:h,wrapEvent:function(e){return rt(e,this.id)},beginUpdate:function(e,t){(t=this).$a>0&&t.$f&&t.owner.unmountZone(e,1)},endUpdate:function(e,t,n,r,i){(n=this).$a>0&&(e=e||n.id,t?i=t:(i=n.$f,n.$f=1),(r=n.owner).mountZone(e,t),i||c(n.wrapAsync(function(){!function(e,t,n){for(t=e.$e;t.length;)(n=t.shift()).r||e.invoke(n.n,n.a),delete t[n.k]}(r)}),0))},wrapAsync:function(e,t){var n=this,r=n.$a;return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(r>0&&r==n.$a)return e.apply(t||n,i)}},observeLocation:function(e,t){var r;(r=this.$l).f=1,n(e)&&(t=e.path,e=e.params),r.p=t,e&&(r.k=(e+"").split(","))},observeState:function(e){this.$os=(e+"").split(",")},capture:function(e,t,n,r){return r=this.$r,t?(at(r,e,1,t),r[e]={e:t,x:n}):t=(r=r[e])&&r.e,t},release:function(e,t){return at(this.$r,e,t)},leaveTip:function(e,t){var n=this,r=function(i){var o="a",a="b";"change"!=i.type&&(o="b",a="a"),r[o]?(i.prevent(),i.reject()):t()?(i.prevent(),r[a]=1,n.leaveConfirm(e,function(){r[a]=0,i.resolve()},function(){r[a]=0,i.reject()})):i.resolve()},i=function(n){t()&&(n.msg=e)};we.on("change",r),we.on("pageunload",i),n.on("unload",r),n.on("destroy",function(){we.off("change",r),we.off("pageunload",i)})},render:h}),Q.View=$t;var vt=e.type,lt=e.now||Date.now,pt=function(){this.id=l("b"),this.$={}};x(pt.prototype,{get:function(e,t,n){var i=t!=n,o=this.$;if(e){for(var a=r(e)?e.slice():(e+"").split("."),f=void 0;(f=a.shift())&&o;)o=o[f];f&&(o=n)}return i&&vt(t)!=vt(o)&&(o=t),o},set:function(e,t){n(e)||((r={})[e]=t,e=r),x(this.$,e);var r}});var mt=function(e,t,n){(n=this[e])&&(delete this[e],S(n,t,n.e))},gt=function(e,t,n,i,o){if(e.$d)return e;if(e.$e)return e.enqueue(gt.bind(e,e,t,n,i,o));e.$e=1,r(t)||(t=[t]);for(var a=e.constructor,f=0,u=a.$f,c=function(e,t,n,r,i,o){var a=[],f=0,u=0;return function(c,h){var s;u++;var $=this.$b,d=$.k;a[c+1]=this;var v,l={bag:this,error:h};if(h?(f=h,t.fire("fail",l),s=1):o.has(d)||(d&&o.set(d,this),$.t=lt(),(v=$.a)&&S(v,this,this),(v=$.x)&&t.clear(v),t.fire("done",l),s=1),!n.$d){var p=u==r;p&&(n.$e=0,2==i&&(a[0]=f,S(e,a,n))),1==i&&S(e,[h||null,this,p,c],n)}s&&t.fire("end",l)}}(n,a,e,t.length,i,a.$c),h=0,s=t;h<s.length;h++){var $=s[h];if($){var d=a.get($,o),v=d.e,l=v.$b.k,p=c.bind(v,f++),m=void 0;l&&u[l]?u[l].push(p):d.u?(l&&((m=[p]).e=v,u[l]=m,p=mt.bind(u,l)),a.$s(v,p)):p()}}return e},bt=function(){var e=this;e.id=l("s"),e.$g=[]};x(bt.prototype,{all:function(e,t){return gt(this,e,t,2)},save:function(e,t){return gt(this,e,t,2,1)},one:function(e,t){return gt(this,e,t,1)},enqueue:function(e){var t=this;return t.$d||(t.$g.push(e),t.dequeue(t.$h)),t},dequeue:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n,r=this;r.$e||r.$d||(r.$e=1,c(function(){r.$e=0,r.$d||(n=r.$g.shift())&&S(n,r.$h=e)},0))},destroy:function(e){(e=this).$d=1,e.$g=0}});var yt=function(e,t){return[s(t),s(e)].join("\x1e")},wt=function(e,t,n,r){(r=e&&e.$b)&&t[r.n]&&n.del(r.k)},xt=x({add:function(e){var t,n=this.$b;r(e)||(e=[e]);for(var i=0,o=e;i<o.length;i++)if(t=o[i]){var a=t.name,f=t.cache;t.cache=0|f,n[a]=t}},create:function(e){var t=this.meta(e),r=0|e.cache||t.cache,i=new pt;i.set(t),i.$b={n:t.name,a:t.after,x:t.cleans,k:r&&yt(t,e)},n(e)&&i.set(e);var o=t.before;return o&&S(o,i,i),this.fire("begin",{bag:i}),i},meta:function(e){return this.$b[e.name||e]||e},get:function(e,t){var n,r;return t||(n=this.cached(e)),n||(n=this.create(e),r=1),{e:n,u:r}},clear:function(e){this.$c.each(wt,J((e+"").split(",")))},cached:function(e){var t,n,r=this.$c,i=this.meta(e),o=0|e.cache||i.cache;if(o&&(n=yt(i,e)),n){var a=this.$f[n];a?t=a.e:(t=r.get(n))&&lt()-t.$b.t>o&&(r.del(n),t=0)}return t}},X);return bt.extend=function(e,t,n){var r=function(){bt.call(this)};return r.$s=e,r.$c=new j(t,n),r.$f={},r.$b={},H(r,bt,null,xt)},Q.Service=bt,x(h.prototype,X),h.extend=function e(t,n){var r=this,i=t&&t.ctor,o=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r.apply(this,e),i&&i.apply(this,e)};return o.extend=e,H(o,r,t,n)},Q.Base=h,Q});